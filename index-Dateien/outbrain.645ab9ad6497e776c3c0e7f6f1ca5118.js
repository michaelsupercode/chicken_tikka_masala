(()=>{"use strict";(()=>{function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:String(e)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function a(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function o(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,a(t,e,"get"))}function s(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,a(t,e,"set"),n),n}function l(t,e){c(t,e),e.add(t)}function u(t,e,n){c(t,e),e.set(t,n)}function c(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var f=new WeakMap,d=new WeakMap,w=new WeakMap,p=new WeakMap,b=new WeakMap,v=new WeakMap,y=new WeakMap,m=new WeakMap,g=new WeakSet,k=new WeakSet,S=new WeakSet,W=new WeakSet,A=new WeakSet,M=new WeakSet,j=new WeakSet,O=new WeakSet,T=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,O),l(this,j),l(this,M),l(this,A),l(this,W),l(this,S),l(this,k),l(this,g),u(this,f,{writable:!0,value:void 0}),u(this,d,{writable:!0,value:void 0}),u(this,w,{writable:!0,value:".js-ob-native-teasers"}),u(this,p,{writable:!0,value:"//widgets.outbrain.com/outbrain.js"}),u(this,b,{writable:!0,value:"AR_11"}),u(this,v,{writable:!0,value:"AR_10"}),u(this,y,{writable:!0,value:"TR_1"}),u(this,m,{writable:!0,value:void 0}),s(this,d,n),s(this,m,e),s(this,f,e.dataset.canonical)}var e,n,i;return e=t,(n=[{key:"init",value:function(){"_noad"===window.OB_ContextKeyValue||o(this,d).config.get("advertising.enableOutbrainTrackingWidget")?h(this,O,L).call(this):h(this,j,R).call(this)}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(){var t=document.createElement("script");return t.src=o(this,p),t.async=!0,t}function I(t){var e=document.createElement("div");return e.dataset.src=o(this,f),e.dataset.widgetId=t,e.classList.add("OUTBRAIN"),e.classList.add("outbrain"),e}function B(){var t=o(this,m).querySelector(o(this,w));o(this,d).config.get("advertising.enableOutbrainTrackingWidget")?h(this,M,P).call(this,o(this,m)):t?h(this,W,C).call(this,o(this,m)):h(this,A,_).call(this,o(this,m))}function C(t){o(this,d).log.info("Outbrain","Insert widgets around native teasers"),t.prepend(h(this,k,I).call(this,o(this,v))),t.append(h(this,k,I).call(this,o(this,b)))}function _(t){o(this,d).log.info("Outbrain","Insert widgets en block");var n=[o(this,v),o(this,b)];t.prepend.apply(t,e(n.map(h(this,k,I).bind(this))))}function P(t){o(this,d).log.info("Outbrain","Insert tracking widget"),t.prepend(h(this,k,I).call(this,o(this,y)))}function R(){var t=this;window.MoltenBundle.cmd.push((function(){var e=function(){window.MoltenBundle.adsAllowed&&(o(t,d).log.info("Outbrain","Ads are allowed by MoltenBundle"),h(t,O,L).call(t))};window.MoltenBundle.adsAllowedChecked?e():window.MoltenBundle.registerAdsAllowedCheckedHandler((function(){e()}))}))}function L(){h(this,S,B).call(this);var t=h(this,g,E).call(this);return o(this,m).appendChild(t),this}var q=window.gujService,x=document.querySelector(".js-ob");x instanceof HTMLElement&&q&&!q.isAlreadyExecuted("file:///usr/src/app/client/site/partials/outbrain/scripts/outbrain.js")&&new T(x,q).init()})()})();