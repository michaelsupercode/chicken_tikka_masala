"use strict";var foundation=foundation||{};foundation.plugin=foundation.plugin||{};foundation.plugin.advertising=(()=>{var _u=Object.create;var On=Object.defineProperty;var Tu=Object.getOwnPropertyDescriptor;var Iu=Object.getOwnPropertyNames;var Ou=Object.getPrototypeOf,ku=Object.prototype.hasOwnProperty;var wa=(o,s)=>()=>(s||o((s={exports:{}}).exports,s),s.exports),Ru=(o,s)=>{for(var p in s)On(o,p,{get:s[p],enumerable:!0})},Ps=(o,s,p,i)=>{if(s&&typeof s=="object"||typeof s=="function")for(let u of Iu(s))!ku.call(o,u)&&u!==p&&On(o,u,{get:()=>s[u],enumerable:!(i=Tu(s,u))||i.enumerable});return o};var Ut=(o,s,p)=>(p=o!=null?_u(Ou(o)):{},Ps(s||!o||!o.__esModule?On(p,"default",{value:o,enumerable:!0}):p,o)),Pu=o=>Ps(On({},"__esModule",{value:!0}),o);var Cs=wa(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.ErrorCodes=void 0;Rn.ErrorCodes={FALLBACK_DRM_ERROR:1e4,AUTHENTICATION_FAILED:11e3,TOKEN_PROBLEM:11100,TOKEN_INVALID:11110,TOKEN_MISSING:11120,PERMISSION_PROBLEM:11200,PAY_PERMISSION_MISSING:11210,DOWNLOAD_PERMISSION_MISSING:11220,RIGHTS_RESTRICTIONS_NOT_MET:12e3,GEOBLOCKING:12100,USING_OF_AN_ANONYM_PROXY_OR_VPN:12110,LOCATION_NOT_ALLOWED:12120,HDCP_REQUIREMENT_NOT_FULFILLED:12300,DEVICE_IS_DENYLISTED_BY_GOOGLE_FOR_WIDEVINE:12400,LICENSE:13e3,LICENSE_EXPIRED:13100,LICENSE_NOT_PERSISTABLE:13200,LICENSE_ENVIRONMENT:13300,INVALID_MISSING_FAIRPLAY_CERTIFICATE_URL:13310,INVALID_FAIRPLAY_CERTIFICATE_DATA:13320,CONTENT:2e4,MEDIA_FORMAT_UNSUPPORTED:20100,AVAILABILITY:21e3,CONTENT_NOT_AVAILABLE:21100,SOURCE_MATERIAL_NOT_AVAILABLE:21110,CONTENT_NOT_DOWNLOADABLE:21200,CLIENT:3e4,NO_PLAYABLE_TRACK_LEFT:30100,NETWORK_PROBLEM:31e3,BAD_INTERNET_CONNECTION:31110,PLATFORM:32e3,UNSUPPORTED_DRM:32100,NO_DRM_OPTION_AVAILABLE_ANY_MORE:32110,DRM_NOT_FULLY_IMPLEMENTED:32120,UNSUPPORTED_STREAM_TECH:32200,NO_MANIFESTS_PLAYABLE:32210,MANIFEST_NOT_SUPPORTED:32220,MAX_CONCURRENT_STREAMS_REACHED:33100,PLAYERCONFIG_PROBLEM:34e3,ADBLOCKER_DETECTED:34100,VIDEOSOURCES_CONFIG:34200,NO_MANIFEST_IN_CONFIG:34210,MISSING_PLAYER_ELEMENT_OR_ID:34300,FAULTY_ADVERTISING_ISLAND_CONFIGURED:34510,PLAYER_ALREADY_DESTROYED:35100,FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING:35210,MISSING_USER_INTERACTION:35310,OPERATION_ABORTED:35400,OPERATION_ABORTED_PLAY:35410,OPERATION_ABORTED_LOAD:35420,OPERATION_ABORTED_POWER_SAVING:35430,OPERATION_ABORTED_VIDEO_REMOVED:35440,DEPENDENCY:4e4,V3_UNAVAILABLE:41100,ENTITLEMENT_UNAVAILABLE:41200,DB_UNAVAILABLE:41300,GOOGLE_WIDEVINE_UNAVAILABLE:41400,MANIFEST_API_UNAVAILABLE:41500,OTHER_UNAVAILABLE:41600,ATV_SCHEDULER_UNAVAILABLE:41700,STUS_UNAVAILABLE:41800,ATV_SCHEDULER_REQUEST_FAILED_HTTP_STATUS_CODE_4XX:42700,ATV_SCHEDULER_REQUEST_FAILED_HTTP_STATUS_CODE_5XX:42710,STUS_RETURNS_4XX_ERROR:42800,ATV_SCHEDULER_REQUEST_TIMED_OUT:43700,INTERNAL_PLAYER_ERROR:5e4,UNEXPECTED_EVENT:51e3,PLAYER_DEPENDENCIES_COULD_NOT_BE_LOADED:52110,PLAYER_DEPENDENCY_MISSING:52120,PLAYER_DEPENDENCY_INVALID:52130,ERROR_NOT_TREATED:59e3}});var Ft=wa(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ErrorCodes=void 0;var Cu=Cs();Object.defineProperty(Pn,"ErrorCodes",{enumerable:!0,get:function(){return Cu.ErrorCodes}})});var Xs=wa((exports,module)=>{(function(){var ka=ka||{};ka.scope={},ka.arrayIteratorImpl=function(o){var s=0;return function(){return s<o.length?{done:!1,value:o[s++]}:{done:!0}}},ka.arrayIterator=function(o){return{next:ka.arrayIteratorImpl(o)}},ka.ASSUME_ES5=!1,ka.ASSUME_NO_NATIVE_MAP=!1,ka.ASSUME_NO_NATIVE_SET=!1,ka.SIMPLE_FROUND_POLYFILL=!1,ka.ISOLATE_POLYFILLS=!1,ka.FORCE_POLYFILL_PROMISE=!1,ka.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,ka.defineProperty=ka.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(o,s,p){return o==Array.prototype||o==Object.prototype||(o[s]=p.value),o},ka.getGlobal=function(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var s=0;s<o.length;++s){var p=o[s];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")},ka.global=ka.getGlobal(this),ka.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",ka.TRUST_ES6_POLYFILLS=!ka.ISOLATE_POLYFILLS||ka.IS_SYMBOL_NATIVE,ka.polyfills={},ka.propertyToPolyfillSymbol={},ka.POLYFILL_PREFIX="$jscp$",ka.polyfill=function(o,s,p,i){s&&(ka.ISOLATE_POLYFILLS?ka.polyfillIsolated(o,s,p,i):ka.polyfillUnisolated(o,s,p,i))},ka.polyfillUnisolated=function(o,s){for(var p=ka.global,i=o.split("."),u=0;u<i.length-1;u++){var v=i[u];if(!(v in p))return;p=p[v]}i=i[i.length-1],u=p[i],v=s(u),v!=u&&v!=null&&ka.defineProperty(p,i,{configurable:!0,writable:!0,value:v})},ka.polyfillIsolated=function(o,s,p){var i=o.split(".");o=i.length===1;var u=i[0];u=!o&&u in ka.polyfills?ka.polyfills:ka.global;for(var v=0;v<i.length-1;v++){var m=i[v];if(!(m in u))return;u=u[m]}i=i[i.length-1],p=ka.IS_SYMBOL_NATIVE&&p==="es6"?u[i]:null,s=s(p),s!=null&&(o?ka.defineProperty(ka.polyfills,i,{configurable:!0,writable:!0,value:s}):s!==p&&(ka.propertyToPolyfillSymbol[i]===void 0&&(o=1e9*Math.random()>>>0,ka.propertyToPolyfillSymbol[i]=ka.IS_SYMBOL_NATIVE?ka.global.Symbol(i):ka.POLYFILL_PREFIX+o+"$"+i),ka.defineProperty(u,ka.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:s})))},ka.initSymbol=function(){},ka.polyfill("Symbol",function(o){function s(v){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new p(i+(v||"")+"_"+u++,v)}function p(v,m){this.$jscomp$symbol$id_=v,ka.defineProperty(this,"description",{configurable:!0,writable:!0,value:m})}if(o)return o;p.prototype.toString=function(){return this.$jscomp$symbol$id_};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return s},"es6","es3"),ka.polyfill("Symbol.iterator",function(o){if(o)return o;o=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),p=0;p<s.length;p++){var i=ka.global[s[p]];typeof i=="function"&&typeof i.prototype[o]!="function"&&ka.defineProperty(i.prototype,o,{configurable:!0,writable:!0,value:function(){return ka.iteratorPrototype(ka.arrayIteratorImpl(this))}})}return o},"es6","es3"),ka.iteratorPrototype=function(o){return o={next:o},o[Symbol.iterator]=function(){return this},o},function(){function ja(o,s){return{get:o,set:s,configurable:!0,enumerable:!0}}function Ea(){var o=Qa(this).fragment;return o?"#"+o:""}function Ga(){return Qa(this).searchParams}function za(){var o=Qa(this).query;return o?"?"+o:""}function Xa(){var o=Qa(this),s=o.path;return o.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):""}function Za(){var o=Qa(this).port;return o===null?"":String(o)}function Bc(){var o=Qa(this).host;return o===null?"":yd(o)}function Hh(){var o=Qa(this),s=o.host;return o=o.port,s===null?"":o===null?yd(s):yd(s)+":"+o}function Ih(){return Qa(this).password}function Jh(){return Qa(this).username}function Kh(){return Qa(this).scheme+":"}function Lh(){var o=Qa(this),s=o.scheme,p=o.port;if(s=="blob")try{return new URL(s.path[0]).origin}catch(i){return"null"}return s!="file"&&$a(o)?s+"://"+yd(o.host)+(p!==null?":"+p:""):"null"}function ne(){var o=Qa(this),s=o.scheme,p=o.username,i=o.password,u=o.host,v=o.port,m=o.path,S=o.query,P=o.fragment,x=s+":";return u!==null?(x+="//",(o.username!=""||o.password!="")&&(x+=p+(i?":"+i:"")+"@"),x+=yd(u),v!==null&&(x+=":"+v)):s=="file"&&(x+="//"),x+=o.cannotBeABaseURL?m[0]:m.length?"/"+m.join("/"):"",S!==null&&(x+="?"+S),P!==null&&(x+="#"+P),x}function Cc(o){var s=zb(this,Cc,"URL"),p=1<arguments.length?arguments[1]:void 0,i=String(o),u=jm(s,{type:"URL"});if(p!==void 0){if(p instanceof Cc)var v=Qa(p);else if(p=Nb(v={},String(p)))throw TypeError(p)}if(p=Nb(u,i,null,v))throw TypeError(p);var m=u.searchParams=new km;i=tb(m),i.updateSearchParams(u.query),i.updateURL=function(){u.query=String(m)||null},ta||(s.href=ne.call(s),s.origin=Lh.call(s),s.protocol=Kh.call(s),s.username=Jh.call(s),s.password=Ih.call(s),s.host=Hh.call(s),s.hostname=Bc.call(s),s.port=Za.call(s),s.pathname=Xa.call(s),s.search=za.call(s),s.searchParams=Ga.call(s),s.hash=Ea.call(s))}function Nb(o,s,p,i){var u=p||vf,v=0,m="",S=!1,P=!1,x=!1;for(p||(o.scheme="",o.username="",o.password="",o.host=null,o.port=null,o.path=[],o.query=null,o.fragment=null,o.cannotBeABaseURL=!1,s=s.replace(lm,"")),s=s.replace(mm,""),s=Dc(s);v<=s.length;){var w=s[v];switch(u){case vf:if(w&&Mh.test(w))m+=w.toLowerCase(),u=Nh;else{if(p)return"Invalid scheme";u=wf;continue}break;case Nh:if(w&&(nm.test(w)||w=="+"||w=="-"||w=="."))m+=w.toLowerCase();else if(w==":"){if(p&&($a(o)!=ha(oe,m)||m=="file"&&(o.username!=""||o.password!=""||o.port!==null)||o.scheme=="file"&&!o.host))return;if(o.scheme=m,p){$a(o)&&oe[o.scheme]==o.port&&(o.port=null);return}m="",o.scheme=="file"?u=xf:$a(o)&&i&&i.scheme==o.scheme?u=Oh:$a(o)?u=Ph:s[v+1]=="/"?(u=Qh,v++):(o.cannotBeABaseURL=!0,o.path.push(""),u=Rh)}else{if(p)return"Invalid scheme";m="",u=wf,v=0;continue}break;case wf:if(!i||i.cannotBeABaseURL&&w!="#")return"Invalid scheme";if(i.cannotBeABaseURL&&w=="#"){o.scheme=i.scheme,o.path=i.path.slice(),o.query=i.query,o.fragment="",o.cannotBeABaseURL=!0,u=bc;break}u=i.scheme=="file"?xf:yf;continue;case Oh:if(w=="/"&&s[v+1]=="/")u=pe,v++;else{u=yf;continue}break;case Qh:if(w=="/"){u=qe;break}else{u=Ob;continue}case yf:if(o.scheme=i.scheme,w==null)o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=i.path.slice(),o.query=i.query;else if(w=="/"||w=="\\"&&$a(o))u=Sh;else if(w=="?")o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=i.path.slice(),o.query="",u=Ec;else if(w=="#")o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=i.path.slice(),o.query=i.query,o.fragment="",u=bc;else{o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=i.path.slice(),o.path.pop(),u=Ob;continue}break;case Sh:if(!$a(o)||w!="/"&&w!="\\")if(w=="/")u=qe;else{o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,u=Ob;continue}else u=pe;break;case Ph:if(u=pe,w!="/"||m.charAt(v+1)!="/")continue;v++;break;case pe:if(w!="/"&&w!="\\"){u=qe;continue}break;case qe:if(w=="@"){for(S&&(m="%40"+m),S=!0,m=Dc(m),w=0;w<m.length;w++){var W=m[w];W!=":"||x?(W=nc(W,zf),x?o.password+=W:o.username+=W):x=!0}m=""}else if(w==null||w=="/"||w=="?"||w=="#"||w=="\\"&&$a(o)){if(S&&m=="")return"Invalid authority";v-=Dc(m).length+1,m="",u=Af}else m+=w;break;case Af:case Bf:if(p&&o.scheme=="file"){u=Cf;continue}else if(w!=":"||P)if(w==null||w=="/"||w=="?"||w=="#"||w=="\\"&&$a(o)){if($a(o)&&m=="")return"Invalid host";if(p&&m==""&&(o.username!=""||o.password!=""||o.port!==null))return;if(u=Df(o,m))return u;if(m="",u=zd,p)return;continue}else w=="["?P=!0:w=="]"&&(P=!1),m+=w;else{if(m=="")return"Invalid host";if(u=Df(o,m))return u;if(m="",u=Ef,p==Bf)return}break;case Ef:if(Ff.test(w))m+=w;else if(w==null||w=="/"||w=="?"||w=="#"||w=="\\"&&$a(o)||p){if(m!=""){if(u=parseInt(m,10),65535<u)return"Invalid port";o.port=$a(o)&&u===oe[o.scheme]?null:u,m=""}if(p)return;u=zd;continue}else return"Invalid port";break;case xf:if(o.scheme="file",w=="/"||w=="\\")u=Th;else if(i&&i.scheme=="file")if(w==null)o.host=i.host,o.path=i.path.slice(),o.query=i.query;else if(w=="?")o.host=i.host,o.path=i.path.slice(),o.query="",u=Ec;else if(w=="#")o.host=i.host,o.path=i.path.slice(),o.query=i.query,o.fragment="",u=bc;else{Uh(s.slice(v).join(""))||(o.host=i.host,o.path=i.path.slice(),Vh(o)),u=Ob;continue}else{u=Ob;continue}break;case Th:if(w=="/"||w=="\\"){u=Cf;break}i&&i.scheme=="file"&&!Uh(s.slice(v).join(""))&&(Ad(i.path[0],!0)?o.path.push(i.path[0]):o.host=i.host),u=Ob;continue;case Cf:if(w==null||w=="/"||w=="\\"||w=="?"||w=="#"){if(!p&&Ad(m))u=Ob;else{if(m==""){if(o.host="",p)return}else{if(u=Df(o,m))return u;if(o.host=="localhost"&&(o.host=""),p)return;m=""}u=zd}continue}else m+=w;break;case zd:if($a(o)){if(u=Ob,w!="/"&&w!="\\")continue}else if(!p&&w=="?")o.query="",u=Ec;else if(!p&&w=="#")o.fragment="",u=bc;else if(w!=null&&(u=Ob,w!="/"))continue;break;case Ob:if(w==null||w=="/"||w=="\\"&&$a(o)||!p&&(w=="?"||w=="#")){if(W=m,W=W.toLowerCase(),W===".."||W==="%2e."||W===".%2e"||W==="%2e%2e"?(Vh(o),w=="/"||w=="\\"&&$a(o)||o.path.push("")):m==="."||m.toLowerCase()==="%2e"?w=="/"||w=="\\"&&$a(o)||o.path.push(""):(o.scheme=="file"&&!o.path.length&&Ad(m)&&(o.host&&(o.host=""),m=m.charAt(0)+":"),o.path.push(m)),m="",o.scheme=="file"&&(w==null||w=="?"||w=="#"))for(;1<o.path.length&&o.path[0]==="";)o.path.shift();w=="?"?(o.query="",u=Ec):w=="#"&&(o.fragment="",u=bc)}else m+=nc(w,Wh);break;case Rh:w=="?"?(o.query="",u=Ec):w=="#"?(o.fragment="",u=bc):w!=null&&(o.path[0]+=nc(w,re));break;case Ec:p||w!="#"?w!=null&&(w=="'"&&$a(o)?o.query+="%27":o.query=w=="#"?o.query+"%23":o.query+nc(w,re)):(o.fragment="",u=bc);break;case bc:w!=null&&(o.fragment+=nc(w,Xh))}v++}}function Vh(o){var s=o.path,p=s.length;!p||o.scheme=="file"&&p==1&&Ad(s[0],!0)||s.pop()}function Uh(o){var s;return 1<o.length&&Ad(o.slice(0,2))&&(o.length==2||(s=o.charAt(2))==="/"||s==="\\"||s==="?"||s==="#")}function Ad(o,s){var p;return o.length==2&&Mh.test(o.charAt(0))&&((p=o.charAt(1))==":"||!s&&p=="|")}function Gf(o){return!o.host||o.cannotBeABaseURL||o.scheme=="file"}function $a(o){return ha(oe,o.scheme)}function nc(o,s){var p=om(o,0);return 32<p&&127>p&&!ha(s,o)?o:encodeURIComponent(o)}function yd(o){var s,p;if(typeof o=="number"){var i=[];for(s=0;4>s;s++)i.unshift(o%256),o=pm(o/256);return i.join(".")}if(typeof o=="object"){i="",s=null;for(var u=1,v=null,m=0,S=0;8>S;S++)o[S]!==0?(m>u&&(s=v,u=m),v=null,m=0):(v===null&&(v=S),++m);for(m>u&&(s=v),u=s,s=0;8>s;s++)p&&o[s]===0||(p&&(p=!1),u===s?(i+=s?":":"::",p=!0):(i+=o[s].toString(16),7>s&&(i+=":")));return"["+i+"]"}return o}function qm(o){function s(){return o.charAt(v)}var p=[0,0,0,0,0,0,0,0],i=0,u=null,v=0,m,S;if(s()==":"){if(o.charAt(1)!=":")return;v+=2,i++,u=i}for(;s();){if(i==8)return;if(s()==":"){if(u!==null)return;v++,i++,u=i}else{for(m=S=0;4>S&&Yh.test(s());)m=16*m+parseInt(s(),16),v++,S++;if(s()=="."){if(S==0||(v-=S,6<i))return;for(m=0;s();){if(S=null,0<m)if(s()=="."&&4>m)v++;else return;if(!Ff.test(s()))return;for(;Ff.test(s());){var P=parseInt(s(),10);if(S===null)S=P;else{if(S==0)return;S=10*S+P}if(255<S)return;v++}p[i]=256*p[i]+S,m++,m!=2&&m!=4||i++}if(m!=4)return;break}else if(s()==":"){if(v++,!s())return}else if(s())return;p[i++]=m}}if(u!==null)for(m=i-u,i=7;i!=0&&0<m;)S=p[i],p[i--]=p[u+m-1],p[u+--m]=S;else if(i!=8)return;return p}function rm(o){var s=o.split("."),p;s.length&&s[s.length-1]==""&&s.pop();var i=s.length;if(4<i)return o;var u=[];for(p=0;p<i;p++){var v=s[p];if(v=="")return o;var m=10;if(1<v.length&&v.charAt(0)=="0"&&(m=sm.test(v)?16:8,v=v.slice(m==8?1:2)),v==="")v=0;else{if(!(m==10?tm:m==8?um:Yh).test(v))return o;v=parseInt(v,m)}u.push(v)}for(p=0;p<i;p++)if(v=u[p],p==i-1){if(v>=Zh(256,5-i))return null}else if(255<v)return null;for(o=u.pop(),p=0;p<u.length;p++)o+=u[p]*Zh(256,3-p);return o}function Df(o,s){var p;if(s.charAt(0)=="["){if(s.charAt(s.length-1)!="]")return"Invalid host";var i=qm(s.slice(1,-1));if(!i)return"Invalid host"}else if($a(o)){i=[];var u=s.toLowerCase().replace(vm,".").split(".");for(p=0;p<u.length;p++){var v=u[p],m=i,S=m.push;if(wm.test(v)){var P=v;v=[];var x=P;P=[];for(var w=0,W=x.length;w<W;){var Te=x.charCodeAt(w++);if(55296<=Te&&56319>=Te&&w<W){var z=x.charCodeAt(w++);(z&64512)==56320?P.push(((Te&1023)<<10)+(z&1023)+65536):(P.push(Te),w--)}else P.push(Te)}w=P.length,W=128;var G=0,J=72;for(x=0;x<P.length;x++){var _e=P[x];128>_e&&v.push(Hf(_e))}for((z=Te=v.length)&&v.push("-");z<w;){var tt=2147483647;for(x=0;x<P.length;x++)_e=P[x],_e>=W&&_e<tt&&(tt=_e);var Ue=z+1;if(tt-W>$c((2147483647-G)/Ue))throw RangeError("Overflow: input needs wider integers to process");for(G+=(tt-W)*Ue,W=tt,x=0;x<P.length;x++){if(_e=P[x],_e<W&&2147483647<++G)throw RangeError("Overflow: input needs wider integers to process");if(_e==W){var Ze=G;for(_e=36;tt=_e<=J?1:_e>=J+26?26:_e-J,!(Ze<tt);_e+=36){Ze-=tt;var it=36-tt,Qe=v;tt+=Ze%it,Qe.push.call(Qe,Hf(tt+22+75*(26>tt))),Ze=$c(Ze/it)}for(v.push(Hf(Ze+22+75*(26>Ze))),J=Ue,_e=0,G=z==Te?$c(G/700):G>>1,G+=$c(G/J);455<G;_e+=36)G=$c(G/35);J=$c(_e+36*G/(G+38)),G=0,++z}}++G,++W}v="xn--"+v.join("")}S.call(m,v)}if(s=i.join("."),xm.test(s)||(i=rm(s),i===null))return"Invalid host"}else{if(ym.test(s))return"Invalid host";for(i="",u=Dc(s),p=0;p<u.length;p++)i+=nc(u[p],re)}o.host=i}function Bd(){zb(this,Bd,"URLSearchParams");var o=0<arguments.length?arguments[0]:void 0,s=[],p,i,u;if($h(this,{type:"URLSearchParams",entries:s,updateURL:function(){},updateSearchParams:zm}),o!==void 0)if(qa(o)){var v=Cd(o);if(typeof v=="function")for(o=v.call(o),v=o.next;!(p=v.call(o)).done;){p=ai(Ia(p.value));var m=p.next;if((i=m.call(p)).done||(u=m.call(p)).done||!m.call(p).done)throw TypeError("Expected sequence with length 2");s.push({key:i.value+"",value:u.value+""})}else for(p in o)ha(o,p)&&s.push({key:p,value:o[p]+""})}else bi(s,typeof o=="string"?o.charAt(0)==="?"?o.slice(1):o:o+"")}function ad(o,s){if(o<s)throw TypeError("Not enough arguments")}function zm(o){this.entries.length=0,bi(this.entries,o)}function bi(o,s){if(s)for(var p=s.split("&"),i=0,u;i<p.length;)u=p[i++],u.length&&(u=u.split("="),o.push({key:ci(u.shift()),value:ci(u.join("="))}))}function di(o){return Am[o]}function ci(o){var s=o.replace(Bm," ");o=4;try{return decodeURIComponent(s)}catch(u){for(;o;){var p=s.replace,i=o--;i=ei[i-1]||(ei[i-1]=RegExp("((?:%[\\da-f]{2}){"+i+"})","gi")),s=p.call(s,i,Cm)}return s}}function Cm(o){try{return decodeURIComponent(o)}catch(s){return o}}function ai(o){var s=Cd(o);if(typeof s!="function")throw TypeError(String(o)+" is not iterable");return Ia(s.call(o))}function Dc(o){var s=ab(o),p=typeof this=="function"?this:Array,i=arguments.length,u=1<i?arguments[1]:void 0,v=u!==void 0,m=Cd(s),S=0;if(v&&(u=Fc(u,2<i?arguments[2]:void 0,2)),m==null||p==Array&&If(m))for(i=Ra(s.length),p=new p(i);i>S;S++)m=v?u(s[S],S):s[S],bd(p,S,m);else for(s=m.call(s),i=s.next,p=new p;!(m=i.call(s)).done;S++)m=v?fi(s,u,[m.value,S],!0):m.value,bd(p,S,m);return p.length=S,p}function gi(){return Dm.call(Oa(this))}function hi(o){var s=ab(o),p=arguments.length,i=1<p?arguments[1]:void 0,u=i!==void 0,v=Cd(s);if(v!=null&&!If(v)){var m=v.call(s),S=m.next;for(s=[];!(v=S.call(m)).done;)s.push(v.value)}for(u&&2<p&&(i=Fc(i,arguments[2],2)),v=Ra(s.length),m=new(Dd(this))(v),p=0;v>p;p++)m[p]=u?i(s[p],p):s[p];return m}function se(o,s){var p=Pb(o);if(0>p)throw RangeError("The argument can't be less than 0");if(p%s)throw RangeError("Wrong offset");return p}function Ka(o,s,p){if(ta){if(p)for(var i in oc){var u=T[i];u&&ha(u.prototype,o)&&delete u.prototype[o]}Eb[o]&&!p||Ta(Eb,o,p?s:pc&&Jf[o]||s)}}function Dd(o){if(bb){if(ii.call(Gc,o))return o}else for(var s in oc)if(ha(oc,ub)){var p=T[s];if(p&&(o===p||ii.call(p,o)))return o}throw TypeError("Target is not a typed array constructor")}function Oa(o){if(te(o))return o;throw TypeError("Target is not a typed array")}function te(o){return qa(o)&&ha(oc,cd(o))}function qc(o,s,p,i,u,v){p=dd(p);var m=ed(o);if(p+s>m.byteLength)throw ue("Wrong index");for(o=ed(m.buffer).bytes,p+=m.byteOffset,i=i(+u),u=0;u<s;u++)o[p+u]=i[v?u:s-u-1]}function rc(o,s,p,i){p=dd(p);var u=ed(o);if(p+s>u.byteLength)throw ue("Wrong index");return o=ed(u.buffer).bytes,p+=u.byteOffset,s=o.slice(p,p+s),i?s:s.reverse()}function ve(o,s){Em(o.prototype,s,{get:function(){return ed(this)[s]}})}function Fm(o){return ji(o,52,8)}function Gm(o){return ji(o,23,4)}function ki(o){return o[3]<<24|o[2]<<16|o[1]<<8|o[0]}function li(o){return[o&255,o>>8&255,o>>16&255,o>>24&255]}function mi(o){return[o&255,o>>8&255]}function ni(o){return[o&255]}function oi(o,s){var p=o.length,i=8*p-s-1,u=(1<<i)-1,v=u>>1;i-=7,--p;var m=o[p--],S=m&127;for(m>>=7;0<i;S=256*S+o[p],p--,i-=8);var P=S&(1<<-i)-1;for(S>>=-i,i+=s;0<i;P=256*P+o[p],p--,i-=8);if(S===0)S=1-v;else{if(S===u)return P?NaN:m?-Kf:Kf;P+=cc(2,s),S-=v}return(m?-1:1)*P*cc(2,S-s)}function ji(o,s,p){var i=Array(p);p=8*p-s-1;var u=(1<<p)-1,v=u>>1,m=s===23?cc(2,-24)-cc(2,-77):0,S=0>o||o===0&&0>1/o?1:0,P=0,x;if(o=Hm(o),o!=o||o===Kf){o=o!=o?1:0;var w=u}else w=Im(Jm(o)/Km),1>o*(x=cc(2,-w))&&(w--,x*=2),o=1<=w+v?o+m/x:o+m*cc(2,1-v),2<=o*x&&(w++,x/=2),w+v>=u?(o=0,w=u):1<=w+v?(o=(o*x-1)*cc(2,s),w+=v):(o=o*cc(2,v-1)*cc(2,s),w=0);for(;8<=s;i[P++]=o&255,o/=256,s-=8);for(w=w<<s|o,p+=s;0<p;i[P++]=w&255,w/=256,p-=8);return i[--P]|=128*S,i}function pi(o){var s=ab(this),p=Ra(s.length),i=arguments.length,u=vb(1<i?arguments[1]:void 0,p);for(i=2<i?arguments[2]:void 0,p=i===void 0?p:vb(i,p);p>u;)s[u++]=o;return s}function dd(o){if(o===void 0)return 0;o=Pb(o);var s=Ra(o);if(o!==s)throw RangeError("Wrong length or index");return s}function Lf(o,s){return Mf(o.entries,function(p){return p[0]===s})}function qi(){this.entries=[]}function we(o){return o.frozen||(o.frozen=new qi)}function ri(o){return function(s,p,i,u){Ab(p),s=ab(s);var v=Ed(s),m=Ra(s.length),S=o?m-1:0,P=o?-1:1;if(2>i)for(;;){if(S in v){u=v[S],S+=P;break}if(S+=P,o?0>S:m<=S)throw TypeError("Reduce of empty array with no initial value")}for(;o?0<=S:m>S;S+=P)S in v&&(u=p(u,v[S],S,s));return u}}function si(o){return function(s,p){var i=2<arguments.length,u=i?Lm.call(arguments,2):void 0;return o(i?function(){(typeof s=="function"?s:Function(s)).apply(this,u)}:s,p)}}function ti(o){var s=Qb(o,!1),p;if(typeof s=="string"&&2<s.length){if(s=xe(s),o=s.charCodeAt(0),o===43||o===45){if(o=s.charCodeAt(2),o===88||o===120)return NaN}else if(o===48){switch(s.charCodeAt(1)){case 66:case 98:o=2;var i=49;break;case 79:case 111:o=8,i=55;break;default:return+s}s=s.slice(2);var u=s.length;for(p=0;p<u;p++){var v=s.charCodeAt(p);if(48>v||v>i)return NaN}return parseInt(s,o)}}return+s}function Nf(o,s,p){function i(_e){var tt=P[_e];Ta(P,_e,_e=="add"?function(Ue){return tt.call(this,Ue===0?0:Ue),this}:_e=="delete"?function(Ue){return v&&!qa(Ue)?!1:tt.call(this,Ue===0?0:Ue)}:_e=="get"?function(Ue){return v&&!qa(Ue)?void 0:tt.call(this,Ue===0?0:Ue)}:_e=="has"?function(Ue){return v&&!qa(Ue)?!1:tt.call(this,Ue===0?0:Ue)}:function(Ue,Ze){return tt.call(this,Ue===0?0:Ue,Ze),this})}var u=o.indexOf("Map")!==-1,v=o.indexOf("Weak")!==-1,m=u?"set":"add",S=T[o],P=S&&S.prototype,x=S,w={};if(Rb(o,typeof S!="function"||!(v||P.forEach&&!ia(function(){new S().entries().next()}))))x=p.getConstructor(s,o,u,m),fd.REQUIRED=!0;else if(Rb(o,!0)){var W=new x,Te=W[m](v?{}:-0,1)!=W,z=ia(function(){W.has(1)}),G=ye(function(_e){new S(_e)}),J=!v&&ia(function(){for(var _e=new S,tt=5;tt--;)_e[m](tt,tt);return!_e.has(-0)});G||(x=s(function(_e,tt){zb(_e,x,o);var Ue=ze(new S,_e,x);return tt!=null&&Fd(tt,Ue[m],Ue,u),Ue}),x.prototype=P,P.constructor=x),(z||J)&&(i("delete"),i("has"),u&&i("get")),(J||Te)&&i(m),v&&P.clear&&delete P.clear}return w[o]=x,Y({global:!0,forced:x!=S},w),dc(x,o),v||p.setStrong(x,o,u),x}function ze(o,s,p){var i,u;return bb&&typeof(i=s.constructor)=="function"&&i!==p&&qa(u=i.prototype)&&u!==p.prototype&&bb(o,u),o}function Of(o,s,p,i,u,v,m){function S(J){if(J===u&&W)return W;if(!Ae&&J in x)return x[J];switch(J){case"keys":return function(){return new p(this,J)};case"values":return function(){return new p(this,J)};case"entries":return function(){return new p(this,J)}}return function(){return new p(this)}}ui(p,s,i),i=s+" Iterator";var P=!1,x=o.prototype,w=x[Gd]||x["@@iterator"]||u&&x[u],W=!Ae&&w||S(u),Te=s=="Array"&&x.entries||w,z;if(Te&&(o=Sb(Te.call(new o)),Be!==Object.prototype&&o.next&&(Sb(o)!==Be&&(bb?bb(o,Be):typeof o[Gd]!="function"&&Ua(o,Gd,Mm)),dc(o,i,!0))),u=="values"&&w&&w.name!=="values"&&(P=!0,W=function(){return w.call(this)}),x[Gd]!==W&&Ua(x,Gd,W),gd[s]=W,u){var G={values:S("values"),keys:v?W:S("keys"),entries:S("entries")};if(m)for(z in G)!Ae&&!P&&z in x||Ta(x,z,G[z]);else Y({target:s,proto:!0,forced:Ae||P},G)}return G}function Mm(){return this}function vi(o){if(!qa(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype");return o}function ui(o,s,p){return s+=" Iterator",o.prototype=wb(Be,{next:Tb(1,p)}),dc(o,s,!1),gd[s]=Nm,o}function Nm(){return this}function Om(){return this}function wi(o){return function(s,p,i){s=String(Bb(s));var u=s.length;return i=i===void 0?" ":String(i),p=Ra(p),p<=u||i==""?s:(p-=u,u=xi.call(i,Pm(p/i.length)),u.length>p&&(u=u.slice(0,p)),o?s+u:u+s)}}function yi(o){var s=/./;try{"/./"[o](s)}catch(p){try{return s[Qm]=!1,"/./"[o](s)}catch(i){}}return!1}function zi(o){if(Pf(o))throw TypeError("The method doesn't accept regular expressions");return o}function Pf(o){var s;return qa(o)&&((s=o[Rm])!==void 0?!!s:xb(o)=="RegExp")}function Hd(o){Qf[Rf][o]=!0}function Id(o){return 51<=Ce||!ia(function(){var s=[];return(s.constructor={})[Sm]=function(){return{foo:1}},s[o](Boolean).foo!==1})}function bd(o,s,p){s=Qb(s),s in o?Va.f(o,s,Tb(0,p)):o[s]=p}function Fb(o,s){if(ha(Sf,o))return Sf[o];s||(s={});var p=[][o],i=ha(s,"ACCESSORS")?s.ACCESSORS:!1,u=ha(s,0)?s[0]:Ai,v=ha(s,1)?s[1]:void 0;return Sf[o]=!!p&&!ia(function(){if(i&&!ta)return!0;var m={length:-1};i?Tm(m,1,{enumerable:!0,get:Ai}):m[1]=1,p.call(m,u,v)})}function Ai(o){throw o}function Hc(o,s){var p=[][o];return!!p&&ia(function(){p.call(null,s||function(){throw 1},1)})}function Tf(o){var s=o===Cb;o=Bi(s?Jd:lb(o));var p=[];return Ic(o,function(i){!ha(ec,i)||s&&!ha(Cb,i)||p.push(ec[i])}),p}function Ci(o){o=Bi(lb(o));var s=[];return Ic(o,function(p){ha(ec,p)||ha(hd,p)||s.push(p)}),s}function Di(o,s){var p=lb(o),i=Qb(s,!0);if(p!==Cb||!ha(ec,i)||ha(Jd,i)){var u=Ei(p,i);return!u||!ha(ec,i)||ha(p,mb)&&p[mb][i]||(u.enumerable=!0),u}}function Uf(o){o=Qb(o,!0);var s=Um.call(this,o);return this===Cb&&ha(ec,o)&&!ha(Jd,o)?!1:s||!ha(this,o)||!ha(ec,o)||ha(this,mb)&&this[mb][o]?s:!0}function Fi(o,s){Ia(o);var p=lb(s),i=fc(p).concat(Tf(p));return Ic(i,function(u){ta&&!Uf.call(p,u)||De(o,u,p[u])}),o}function De(o,s,p){return o===Cb&&De(Jd,s,p),Ia(o),s=Qb(s,!0),Ia(p),ha(ec,s)?(p.enumerable?(ha(o,mb)&&o[mb][s]&&(o[mb][s]=!1),p=wb(p,{enumerable:Tb(0,!1)})):(ha(o,mb)||sc(o,mb,Tb(1,{})),o[mb][s]=!0),Vf(o,s,p)):sc(o,s,p)}function Wf(o,s){var p=ec[o]=wb(nb.prototype);return Vm(p,{type:"Symbol",tag:o,description:s}),ta||(p.description=s),p}function Jc(o){var s=o==1,p=o==2,i=o==3,u=o==4,v=o==6,m=o==5||v;return function(S,P,x,w){var W=ab(S),Te=Ed(W);P=Fc(P,x,3),x=Ra(Te.length);var z=0;w=w||Xf,S=s?w(S,x):p?w(S,0):void 0;for(var G;x>z;z++)if((m||z in Te)&&(w=Te[z],G=P(w,z,W),o)){if(s)S[z]=G;else if(G)switch(o){case 3:return!0;case 5:return w;case 6:return z;case 2:Wm.call(S,w)}else if(u)return!1}return v?-1:i||u?u:S}}function Xf(o,s){if(tc(o)){var p=o.constructor;typeof p!="function"||p!==Array&&!tc(p.prototype)?qa(p)&&(p=p[Xm],p===null&&(p=void 0)):p=void 0}return new(p===void 0?Array:p)(s===0?0:s)}function Gi(o){var s=T.Symbol||(T.Symbol={});ha(s,o)||Ym(s,o,{value:Hi.f(o)})}function Yf(o){if(Ii&&Zm.call(o)=="[object Window]")try{var s=Ji(o)}catch(p){s=Ii.slice()}else s=Ji(lb(o));return s}function Ee(){try{Zf=document.domain&&new ActiveXObject("htmlfile")}catch(s){}if(Zf){var o=Zf;o.write("<script><\/script>"),o.close(),o=o.parentWindow.Object}else o=Fe?id.createElement("iframe"):{},o.style.display="none",$f.appendChild(o),o.src="javascript:",o=o.contentWindow.document,o.open(),o.write("<script>document.F=Object<\/script>"),o.close(),o=o.F;for(Ee=o,o=Ge.length;o--;)delete Ee.prototype[Ge[o]];return Ee()}function ag(){}function ab(o){return Object(Bb(o))}function bg(o){return function(s){return s=String(Bb(s)),o&1&&(s=s.replace($m,"")),o&2&&(s=s.replace(an,"")),s}}function cg(o,s,p,i){if(!s.done){s.done=!0,i&&(s=i);try{if(o===p)throw Ki("Promise can't be resolved itself");var u=Li(p);u?Mi(function(){var v={done:!1};try{u.call(p,jd(cg,o,v,s),jd(kd,o,v,s))}catch(m){kd(o,v,m,s)}}):(s.value=p,s.state=1,dg(o,s,!1))}catch(v){kd(o,{done:!1},v,s)}}}function kd(o,s,p,i){s.done||(s.done=!0,i&&(s=i),s.value=p,s.state=2,dg(o,s,!0))}function jd(o,s,p,i){return function(u){o(s,p,u,i)}}function bn(o,s){eg.call(T,function(){Kd?He.emit("rejectionHandled",o):Ni("rejectionhandled",o,s.value)})}function cn(o,s){eg.call(T,function(){var p=s.value;if(s.rejection!==1&&!s.parent){var i=fg(function(){Kd?He.emit("unhandledRejection",p,o):Ni("unhandledrejection",o,p)});if(s.rejection=Kd||s.rejection!==1&&!s.parent?2:1,i.error)throw i.value}})}function Ni(o,s,p){var i;if(dn){var u=gg.createEvent("Event");u.promise=s,u.reason=p,u.initEvent(o,!1,!0),T.dispatchEvent(u)}else u={promise:s,reason:p};(i=T["on"+o])?i(u):o==="unhandledrejection"&&en("Unhandled promise rejection",p)}function dg(o,s,p){if(!s.notified){s.notified=!0;var i=s.reactions;Mi(function(){for(var u=s.value,v=s.state==1,m=0;i.length>m;){var S=i[m++],P=v?S.ok:S.fail,x=S.resolve,w=S.reject,W=S.domain,Te;try{if(P){if(v||(s.rejection===2&&bn(o,s),s.rejection=1),P===!0)var z=u;else if(W&&W.enter(),z=P(u),W){W.exit();var G=!0}z===S.promise?w(Ki("Promise-chain cycle")):(Te=Li(z))?Te.call(z,x,w):x(z)}else w(u)}catch(J){W&&!G&&W.exit(),w(J)}}s.reactions=[],s.notified=!1,p&&!s.rejection&&cn(o,s)})}}function Li(o){var s;return qa(o)&&typeof(s=o.then)=="function"?s:!1}function fg(o){try{return{error:!1,value:o()}}catch(s){return{error:!0,value:s}}}function en(o,s){var p=T.console;p&&p.error&&(arguments.length===1?p.error(o):p.error(o,s))}function Oi(o,s){if(Ia(o),qa(s)&&s.constructor===o)return s;var p=hg.f(o),i=p.resolve;return i(s),p.promise}function fn(o){var s,p;this.promise=new o(function(i,u){if(s!==void 0||p!==void 0)throw TypeError("Bad Promise constructor");s=i,p=u}),this.resolve=Ab(s),this.reject=Ab(p)}function Pi(o){T.postMessage(o+"",Qi.protocol+"//"+Qi.host)}function Ri(o){ig(o.data)}function jg(o){return function(){ig(o)}}function ig(o){if(Ld.hasOwnProperty(o)){var s=Ld[o];delete Ld[o],s()}}function Kc(o,s){var p=Ia(o).constructor,i;return p===void 0||(i=Ia(p)[gn])==null?s:Ab(i)}function ye(o,s){if(!s&&!Si)return!1;var p=!1;try{var i={};i[Ti]=function(){return{next:function(){return{done:p=!0}}}},o(i)}catch(u){}return p}function fi(o,s,p,i){try{return i?s(Ia(p)[0],p[1]):s(p)}catch(u){throw s=o.return,s!==void 0&&Ia(s.call(o)),u}}function Cd(o){if(o!=null)return o[hn]||o["@@iterator"]||gd[cd(o)]}function Fc(o,s,p){if(Ab(o),s===void 0)return o;switch(p){case 0:return function(){return o.call(s)};case 1:return function(i){return o.call(s,i)};case 2:return function(i,u){return o.call(s,i,u)};case 3:return function(i,u,v){return o.call(s,i,u,v)}}return function(){return o.apply(s,arguments)}}function If(o){return o!==void 0&&(gd.Array===o||jn[kn]===o)}function zb(o,s,p){if(!(o instanceof s))throw TypeError("Incorrect "+(p?p+" ":"")+"invocation");return o}function Ie(o){o=Ub(o);var s=Va.f;ta&&o&&!o[Ui]&&s(o,Ui,{configurable:!0,get:function(){return this}})}function dc(o,s,p){o&&!ha(o=p?o:o.prototype,Vi)&&ln(o,Vi,{configurable:!0,value:s})}function gc(o,s,p){for(var i in s)Ta(o,i,s[i],p);return o}function Ab(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}function Md(o,s){var p=o.exec;if(typeof p=="function"){if(p=p.call(o,s),typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(xb(o)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return Nd.call(o,s)}function kg(o,s,p){return s+(p?Wi(o,s).length:1)}function Xi(o){return function(s,p){var i=String(Bb(s)),u=Pb(p),v=i.length,m;if(0>u||u>=v)return o?"":void 0;var S=i.charCodeAt(u);return 55296>S||56319<S||u+1===v||56320>(m=i.charCodeAt(u+1))||57343<m?o?i.charAt(u):S:o?i.slice(u,u+2):(S-55296<<10)+(m-56320)+65536}}function lg(o,s,p,i){var u=Ca(o),v=!ia(function(){var x={};return x[u]=function(){return 7},""[o](x)!=7}),m=v&&!ia(function(){var x=!1,w=/a/;return o==="split"&&(w={constructor:{}},w.constructor[mn]=function(){return w},w.flags="",w[u]=/./[u]),w.exec=function(){return x=!0,null},w[u](""),!x});if(!v||!m||o==="replace"&&(!nn||!Yi||Zi)||o==="split"&&!on){var S=/./[u];p=p(u,""[o],function(x,w,W,Te,z){return w.exec===Nd?v&&!z?{done:!0,value:S.call(w,W,Te)}:{done:!0,value:x.call(W,w,Te)}:{done:!1}},{REPLACE_KEEPS_$0:Yi,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Zi});var P=p[1];Ta(String.prototype,o,p[0]),Ta(RegExp.prototype,u,s==2?function(x,w){return P.call(x,this,w)}:function(x){return P.call(x,this)})}i&&Ua(RegExp.prototype[u],"sham",!0)}function Ca(o){return ha(Je,o)||(hc&&ha(Od,o)?Je[o]=Od[o]:Je[o]=pn("Symbol."+o)),Je[o]}function mg(){var o=Ia(this),s="";return o.global&&(s+="g"),o.ignoreCase&&(s+="i"),o.multiline&&(s+="m"),o.dotAll&&(s+="s"),o.unicode&&(s+="u"),o.sticky&&(s+="y"),s}function $i(o){return function(s){s=lb(s);for(var p=fc(s),i=p.length,u=0,v=[],m;i>u;)m=p[u++],ta&&!qn.call(s,m)||v.push(o?[m,s[m]]:s[m]);return v}}function Y(o,s){var p=o.target,i=o.global,u=o.stat,v,m,S;if(m=i?T:u?T[p]||ng(p,{}):(T[p]||{}).prototype)for(S in s){var P=s[S],x=o.noTargetGet?(v=rn(m,S))&&v.value:m[S];if(v=Rb(i?S:p+(u?".":"#")+S,o.forced),!v&&x!==void 0){if(typeof P==typeof x)continue;aj(P,x)}(o.sham||x&&x.sham)&&Ua(P,"sham",!0),Ta(m,S,P,o)}}function Rb(o,s){var p=sn[tn(o)];return p==un?!0:p==vn?!1:typeof s=="function"?ia(s):!!s}function aj(o,s){for(var p=wn(s),i=Va.f,u=Vb,v=0;v<p.length;v++){var m=p[v];ha(o,m)||i(o,m,u(s,m))}}function bj(o,s){var p=lb(o),i=0,u=[],v;for(v in p)!ha(hd,v)&&ha(p,v)&&u.push(v);for(;s.length>i;)ha(p,v=s[i++])&&(~og(u,v)||u.push(v));return u}function cj(o){return function(s,p,i){s=lb(s);var u=Ra(s.length);if(i=vb(i,u),o&&p!=p){for(;u>i;)if(p=s[i++],p!=p)return!0}else for(;u>i;i++)if((o||i in s)&&s[i]===p)return o||i||0;return!o&&-1}}function vb(o,s){var p=Pb(o);return 0>p?xn(p+s,0):yn(p,s)}function Ra(o){return 0<o?zn(Pb(o),9007199254740991):0}function Pb(o){return isNaN(o=+o)?0:(0<o?An:Bn)(o)}function Ub(o,s){return 2>arguments.length?dj(T[o])||dj(T[o]):T[o]&&T[o][s]||T[o]&&T[o][s]}function dj(o){return typeof o=="function"?o:void 0}function Ke(o){return ej[o]||(ej[o]=ld(o))}function ld(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++Cn+Dn).toString(36)}function ng(o,s){try{Ua(T,o,s)}catch(p){T[o]=s}return s}function Ia(o){if(!qa(o))throw TypeError(String(o)+" is not an object");return o}function ha(o,s){return En.call(o,s)}function Qb(o,s){if(!qa(o))return o;var p,i;if(s&&typeof(p=o.toString)=="function"&&!qa(i=p.call(o))||typeof(p=o.valueOf)=="function"&&!qa(i=p.call(o))||!s&&typeof(p=o.toString)=="function"&&!qa(i=p.call(o)))return i;throw TypeError("Can't convert object to primitive value")}function qa(o){return typeof o=="object"?o!==null:typeof o=="function"}function lb(o){return Ed(Bb(o))}function Bb(o){if(o==null)throw TypeError("Can't call method on "+o);return o}function xb(o){return Fn.call(o).slice(8,-1)}function Tb(o,s){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:s}}function ia(o){try{return!!o()}catch(s){return!0}}function Le(o){return o&&o.Math==Math&&o}function uc(o,s,p){return p={path:s,exports:{},require:function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},o(p,p.exports),p.exports}function fj(o,s){(s==null||s>o.length)&&(s=o.length);for(var p=0,i=Array(s);p<s;p++)i[p]=o[p];return i}function Pd(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function la(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function gj(o,s){for(var p=0;p<s.length;p++){var i=s[p];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0);var u=Object,v=u.defineProperty;e:{var m=i.key;if(typeof m=="object"&&m){var S=m[Symbol.toPrimitive];if(S!==void 0){if(m=S.call(m,"string"),typeof m!="object")break e;throw new TypeError("@@toPrimitive must return a primitive value.")}m=String(m)}}v.call(u,o,typeof m=="symbol"?m:m+"",i)}}function ma(o,s,p){return s&&gj(o.prototype,s),p&&gj(o,p),Object.defineProperty(o,"prototype",{writable:!1}),o}function hj(o,s){var p=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!p){if(Array.isArray(o)||(p=ij(o))||s&&o&&typeof o.length=="number"){p&&(o=p);var i=0,u=function(){};return{s:u,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(P){throw P},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,m=!0,S=!1;return{s:function(){p=p.call(o)},n:function(){var P=p.next();return m=P.done,P},e:function(P){S=!0,v=P},f:function(){try{m||p.return==null||p.return()}finally{if(S)throw v}}}}function xa(o){var s=jj();return function(){var p=Fa(o);if(s){var i=Fa(this).constructor;p=Reflect.construct(p,arguments,i)}else p=p.apply(this,arguments);return Wb(this,p)}}function Ja(){return Ja=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(o,s,p){var i;for(i=o;!{}.hasOwnProperty.call(i,s)&&(i=Fa(i))!==null;);if(i)return i=Object.getOwnPropertyDescriptor(i,s),i.get?i.get.call(3>arguments.length?o:p):i.value},Ja.apply(null,arguments)}function Fa(o){return Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Fa(o)}function ya(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&pg(o,s)}function jj(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(s){}return(jj=function(){return!!o})()}function Wb(o,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pd(o)}function pg(o,s){return pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,i){return p.__proto__=i,p},pg(o,s)}function qg(o,s){var p=Array.isArray(o)?o:void 0;if(!p)e:{var i=o==null?null:typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(i!=null){var u,v,m,S=[],P=!0,x=!1;try{if(v=(i=i.call(o)).next,s===0){if(Object(i)!==i){p=void 0;break e}P=!1}else for(;!(P=(u=v.call(i)).done)&&(S.push(u.value),S.length!==s);P=!0);}catch(W){x=!0;var w=W}finally{try{if(!P&&i.return!=null&&(m=i.return(),Object(m)!==m)){p=void 0;break e}}finally{if(x)throw w}}p=S}else p=void 0}if(!(u=p||ij(o,s)))throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);return u}function ra(o){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ra(o)}function ij(o,s){if(o){if(typeof o=="string")return fj(o,s);var p={}.toString.call(o).slice(8,-1);return p==="Object"&&o.constructor&&(p=o.constructor.name),p==="Map"||p==="Set"?Array.from(o):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?fj(o,s):void 0}}function Qd(){}function kj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var s=16*Math.random()|0;return(o==="x"?s:s&3|8).toString(16)})}function Me(o){return encodeURIComponent(o).replace(/[!'()*]/g,function(s){return"%"+s.charCodeAt(0).toString(16)})}function Ne(o){o=!Number.isFinite(o)||0>o?0:o;var s=new Date(null);return s.setSeconds(o),s.toISOString().substr(11,8)+".000"}function lj(){return Math.round(Math.random()*89999999)+1e7}function Gn(){var o=new Date,s=o.toISOString();return o=o.getTimezoneOffset()/60,o=(0>o?"-":"+")+("0"+Math.abs(o)).slice(-2),s.replace("Z",o)}function Oe(o){if(typeof o!="string")return o;var s=null;return DOMParser?s=new DOMParser().parseFromString(o,"text/xml"):ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.loadXML(o)),s}function Rd(o,s){if(o.indexOf("//")===0){var p=location.protocol;return(p==="about:"||p==="file:")&&(p="https:"),p+o}return o.indexOf("://")===-1?s.slice(0,s.lastIndexOf("/"))+"/"+o:o}function mj(o){return window.location.protocol==="https:"&&(o+"").indexOf("http://")!==0||window.location.protocol!=="https:"}function Lc(o){var s=[];return s.forEach.call(s.slice.call(arguments,1),function(p){if(p)for(var i in p)({}).hasOwnProperty.call(p,i)&&(ra(o[i])==="object"&&ra(p[i])==="object"&&p[i]!==null?o[i]=Lc(o[i],p[i]):o[i]=p[i])}),o}function vc(o,s){var p=document.createElement(o);return Object.keys(s||{}).forEach(function(i){p.setAttribute(i,s[i])}),p}function Hn(o,s,p){var i;return new Promise(function(u){i=vc("iframe",{id:o,style:s}),i.onload=function(){var v=vc("script",{type:"text/javascript"});v.innerHTML="var inDapIF = true;",i.contentDocument.body.appendChild(v),v=vc("style"),v.innerHTML="html,body{margin:0;}",i.contentDocument.body.appendChild(v),u(i)},p.insertBefore(i,p.firstChild)})}function Pe(o){return typeof o.getPlayerElement=="function"?o.getPlayerElement():o.getVideoElement()}function In(o,s){if(!o)return[];var p=Object.values(md),i=[],u=document.createElement("video"),v=document.createElement("audio");return s&&0<s.length&&(p=s),p.filter(function(m){return"canPlayType"in u&&m!=="application/javascript"?u.canPlayType(m)!==""||v.canPlayType(m)!==""?i.push(m):!1:i.push(m)}),(0>=i.length||i.length===1&&i[0]==="application/javascript")&&(i=p),o.filter(function(m){return i.find(function(S){return m.mimeType===S})})}function Jn(o,s,p,i){function u(S){var P=[],x=Ba.create(Ba.CREATIVE),w;for(w in S){var W=w.toUpperCase();if(S.hasOwnProperty(w)&&nj.hasOwnProperty(W)&&0<S[w].length){var Te=Ba.create(Ba.MEDIA_FILE);Te.fileURL=S[w],Te.mimeType=nj[W],x.mediaFiles.push(Te)}}return x.supportedMediaFiles=x.mediaFiles,P.push(x),P}var v=i||Ba.create(Ba.GLOBAL_CONFIG),m={BUMPER:cb.BUMPER,CLOSER:cb.CLOSER,OPENER:cb.OPENER};return function(){for(var S in m)p&&p.hasOwnProperty(m[S])&&function(){var P=p[m[S]];if(!Ba.validate(P,Ba.SEPARATION_CLIP)||!s&&!P.forcePlay)return"continue";var x=Ba.create(Ba.AD);switch(x.variant=x.info.variant=m[S],x.id=x.info.adId=m[S],x.creatives=u(P),x.properCreative=x.creatives[0],x.properCreative.selectedMediaFile=x.properCreative.supportedMediaFiles[0],x.config=v,x.enrichment=new Mc,x.adReinsertion=new sa(v.adReinsertion,x.enrichment),x.expectedAdType=p.type,x.isPaused=!0,m[S]){case m.BUMPER:var w=[];if(o.forEach(function(W,Te){0<Te&&W.variant!==o[Te-1].variant&&w.push({offset:Te,ad:x})}),p[m[S]].forcePlay&&w.length===0){o[0].variant==="sponsored"?o.unshift(x):o.push(x);break}w.forEach(function(W,Te){o.splice(W.offset+Te,0,W.ad)});break;case m.CLOSER:o.push(x);break;case m.OPENER:o.unshift(x)}}()}(),function(){var S=0,P=0,x=0,w=1,W=o.length;o.forEach(function(G){G.variant===cb.COMMERCIAL?(P+=1,!G.fallbackOnNoAd&&G.fallbackOnNoAd||!G.hasError||(S+=1)):!G.fallbackOnNoAd&&G.fallbackOnNoAd||!G.hasError||(x+=1)});for(var Te=0;Te<W;Te++){var z=o[Te];z.sequence=""+(Te+1),z.info=z.info||{},z.info.currentClip=Te+1,z.info.totalClips=W,z.info.totalCommercials=P,z.info.totalPlayableClips=W-S-x,z.info.currentCommercial=z.variant===cb.COMMERCIAL?w++:-1,z.info.totalPlayableCommercials=P-S}}(),o}function oj(o){function s(m){m.info.adId=m.id,m.info.title=m.title,m.info.variant=m.variant,m.info.currentTime=-1,m.info.duration=m.duration,m.info.skippable=m.isSkippable,m.info.universalAdId=m.universalAdId}function p(m){var S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;if(S&&(S=S.extensionXML.getElementsByTagName("AdInfo"),S.length!==0))for(var P=S.item(0).attributes,x=0;x<P.length;x++){var w=P.item(x).name;w!=="variant"&&(m.info[w]=S.item(0).getAttribute(w))}}for(var i=0;i<o.length;i++){var u=o[i];u.info=u.info||{};var v=u.extensions||[];v.forEach(function(m){typeof m.extensionXML=="string"&&(m.extensionXML=new DOMParser().parseFromString(m.extensionXML,"application/xml").getElementsByTagName("Extension").item(0))}),v=v.filter(function(m){return m.extensionXML&&m.extensionXML.getAttribute("name")==="SXP"}).shift(),s(u),p(u,v)}return o}function Kn(o,s){var p=document.implementation.createDocument(null,"VAST",null);return p.documentElement.setAttribute("version","3.0"),o.forEach(function(i,u){var v=p.createElement("Ad");u<s&&(v.setAttribute("sequence",u+1),v.setAttribute("fallbackOnNoAd",!0),v.setAttribute("allowMultipleAds",!0)),u+1<=s&&v.setAttribute("fallbackType","waterfall");var m=p.createElement("Wrapper"),S=p.createElement("VASTAdTagURI");S.appendChild(p.createTextNode(i)),m.appendChild(S),v.appendChild(m),p.documentElement.appendChild(v)}),p}function Gb(o,s){this._error={code:o,timestamp:Date.now(),message:s}}function Ln(o,s){if(!o)return s.warn("[AdBreakValidation] Setup Error: No adBreak definition."),!1;if(!Ba.validate(o,Ba.AD_BREAK))return s.warn("[AdBreakValidation] Setup Error: Invalid adBreak definition. Try creating an Object with the SCHEMA utils."),s.info("smartclientcore.SCHEMA.create(smartclientcore.SCHEMA.AD_BREAK)",Ba.create(Ba.AD_BREAK)),!1;var p=o.hasOwnProperty("tag")&&0<o.tag.length,i=o.hasOwnProperty("response")&&0<o.response.length,u=o.hasOwnProperty("opener")||o.hasOwnProperty("bumper")||o.hasOwnProperty("closer");return p||i||u}function Mn(o,s,p,i,u){var v=v||{};(function(){var m={globalConfig:o,clientConfig:s,clientAPIs:p,utilsReady:i,onFailure:u};(function(){function S(G){var J=0;return function(){return J<G.length?{done:!1,value:G[J++]}:{done:!0}}}function P(G,J){if(J)e:{var _e=Te;G=G.split(".");for(var tt=0;tt<G.length-1;tt++){var Ue=G[tt];if(!(Ue in _e))break e;_e=_e[Ue]}G=G[G.length-1],tt=_e[G],J=J(tt),J!=tt&&J!=null&&z(_e,G,{configurable:!0,writable:!0,value:J})}}function x(G){return G={next:G},G[Symbol.iterator]=function(){return this},G}function w(G){var J=typeof Symbol!="undefined"&&Symbol.iterator&&G[Symbol.iterator];return J?J.call(G):{next:S(G)}}function W(G,J){return Object.prototype.hasOwnProperty.call(G,J)}var Te=function(G){G=[(typeof globalThis=="undefined"?"undefined":ra(globalThis))=="object"&&globalThis,G,(typeof window=="undefined"?"undefined":ra(window))=="object"&&window,(typeof self=="undefined"?"undefined":ra(self))=="object"&&self,(typeof global=="undefined"?"undefined":ra(global))=="object"&&global];for(var J=0;J<G.length;++J){var _e=G[J];if(_e&&_e.Math==Math)return _e}throw Error("Cannot find global object")}(this),z=typeof Object.defineProperties=="function"?Object.defineProperty:function(G,J,_e){return G==Array.prototype||G==Object.prototype||(G[J]=_e.value),G};P("Symbol",function(G){function J(Ue){if(this instanceof J)throw new TypeError("Symbol is not a constructor");return new _e("jscomp_symbol_"+(Ue||"")+"_"+tt++,Ue)}function _e(Ue,Ze){this.j=Ue,z(this,"description",{configurable:!0,writable:!0,value:Ze})}if(G)return G;_e.prototype.toString=function(){return this.j};var tt=0;return J}),P("Symbol.iterator",function(G){if(G)return G;G=Symbol("Symbol.iterator");for(var J="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),_e=0;_e<J.length;_e++){var tt=Te[J[_e]];typeof tt=="function"&&typeof tt.prototype[G]!="function"&&z(tt.prototype,G,{configurable:!0,writable:!0,value:function(){return x(S(this))}})}return G}),P("WeakMap",function(G){function J(We){if(this.h=(Qe+=Math.random()+1).toString(),We){We=w(We);for(var Ye;!(Ye=We.next()).done;)Ye=Ye.value,this.set(Ye[0],Ye[1])}}function _e(){}function tt(We){var Ye=ra(We);return Ye==="object"&&We!==null||Ye==="function"}function Ue(We){if(!W(We,it)){var Ye=new _e;z(We,it,{value:Ye})}}function Ze(We){var Ye=Object[We];Ye&&(Object[We]=function(at){return at instanceof _e?at:(Object.isExtensible(at)&&Ue(at),Ye(at))})}if(function(){if(!G||!Object.seal)return!1;try{var We=Object.seal({}),Ye=Object.seal({}),at=new G([[We,2],[Ye,3]]);return at.get(We)!=2||at.get(Ye)!=3?!1:(at.delete(We),at.set(Ye,4),!at.has(We)&&at.get(Ye)==4)}catch(pt){return!1}}())return G;var it="$jscomp_hidden_"+Math.random();Ze("freeze"),Ze("preventExtensions"),Ze("seal");var Qe=0;return J.prototype.set=function(We,Ye){if(!tt(We))throw Error("Invalid WeakMap key");if(Ue(We),!W(We,it))throw Error("WeakMap key fail: "+We);return We[it][this.h]=Ye,this},J.prototype.get=function(We){return tt(We)&&W(We,it)?We[it][this.h]:void 0},J.prototype.has=function(We){return tt(We)&&W(We,it)&&W(We[it],this.h)},J.prototype.delete=function(We){return tt(We)&&W(We,it)&&W(We[it],this.h)?delete We[it][this.h]:!1},J}),P("Map",function(G){function J(){var Qe={};return Qe.c=Qe.next=Qe.head=Qe}function _e(Qe,We){var Ye=Qe.b;return x(function(){if(Ye){for(;Ye.head!=Qe.b;)Ye=Ye.c;for(;Ye.next!=Ye.head;)return Ye=Ye.next,{done:!1,value:We(Ye)};Ye=null}return{done:!0,value:void 0}})}function tt(Qe,We){var Ye=We&&ra(We);Ye=="object"||Ye=="function"?Ze.has(We)?Ye=Ze.get(We):(Ye=""+ ++it,Ze.set(We,Ye)):Ye="p_"+We;var at=Qe.g[Ye];if(at&&W(Qe.g,Ye))for(Qe=0;Qe<at.length;Qe++){var pt=at[Qe];if(We!==We&&pt.key!==pt.key||We===pt.key)return{id:Ye,list:at,index:Qe,a:pt}}return{id:Ye,list:at,index:-1,a:void 0}}function Ue(Qe){if(this.g={},this.b=J(),this.size=0,Qe){Qe=w(Qe);for(var We;!(We=Qe.next()).done;)We=We.value,this.set(We[0],We[1])}}if(function(){if(!G||typeof G!="function"||!G.prototype.entries||typeof Object.seal!="function")return!1;try{var Qe=Object.seal({x:4}),We=new G(w([[Qe,"s"]]));if(We.get(Qe)!="s"||We.size!=1||We.get({x:4})||We.set({x:4},"t")!=We||We.size!=2)return!1;var Ye=We.entries(),at=Ye.next();return at.done||at.value[0]!=Qe||at.value[1]!="s"?!1:(at=Ye.next(),!(at.done||at.value[0].x!=4||at.value[1]!="t"||!Ye.next().done))}catch(pt){return!1}}())return G;var Ze=new WeakMap;Ue.prototype.set=function(Qe,We){Qe=Qe===0?0:Qe;var Ye=tt(this,Qe);return Ye.list||(Ye.list=this.g[Ye.id]=[]),Ye.a?Ye.a.value=We:(Ye.a={next:this.b,c:this.b.c,head:this.b,key:Qe,value:We},Ye.list.push(Ye.a),this.b.c.next=Ye.a,this.b.c=Ye.a,this.size++),this},Ue.prototype.delete=function(Qe){return Qe=tt(this,Qe),Qe.a&&Qe.list?(Qe.list.splice(Qe.index,1),Qe.list.length||delete this.g[Qe.id],Qe.a.c.next=Qe.a.next,Qe.a.next.c=Qe.a.c,Qe.a.head=null,this.size--,!0):!1},Ue.prototype.clear=function(){this.g={},this.b=this.b.c=J(),this.size=0},Ue.prototype.has=function(Qe){return!!tt(this,Qe).a},Ue.prototype.get=function(Qe){return(Qe=tt(this,Qe).a)&&Qe.value},Ue.prototype.entries=function(){return _e(this,function(Qe){return[Qe.key,Qe.value]})},Ue.prototype.keys=function(){return _e(this,function(Qe){return Qe.key})},Ue.prototype.values=function(){return _e(this,function(Qe){return Qe.value})},Ue.prototype.forEach=function(Qe,We){for(var Ye=this.entries(),at;!(at=Ye.next()).done;)at=at.value,Qe.call(We,at[1],at[0],this)},Ue.prototype[Symbol.iterator]=Ue.prototype.entries;var it=0;return Ue}),P("Object.is",function(G){return G||function(J,_e){return J===_e?J!==0||1/J===1/_e:J!==J&&_e!==_e}}),P("Array.prototype.includes",function(G){return G||function(J,_e){var tt=this;tt instanceof String&&(tt=String(tt));var Ue=tt.length;for(_e=_e||0,0>_e&&(_e=Math.max(_e+Ue,0));_e<Ue;_e++){var Ze=tt[_e];if(Ze===J||Object.is(Ze,J))return!0}return!1}}),P("String.prototype.includes",function(G){return G||function(J,_e){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(J instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return(this+"").indexOf(J,_e||0)!==-1}}),P("Array.from",function(G){return G||function(J,_e,tt){_e=_e!=null?_e:function(Qe){return Qe};var Ue=[],Ze=typeof Symbol!="undefined"&&Symbol.iterator&&J[Symbol.iterator];if(typeof Ze=="function"){J=Ze.call(J);for(var it=0;!(Ze=J.next()).done;)Ue.push(_e.call(tt,Ze.value,it++))}else for(Ze=J.length,it=0;it<Ze;it++)Ue.push(_e.call(tt,J[it],it));return Ue}}),function(){function G(){this.f={},this.global={},this.client={},this.i={}}function J(){return"abcdef123456789abcdef123456789abcdef123456789".split("").sort(function(){return Math.random()-.5}).join("").substr(0,40)}function _e(it){return it=="True"||it=="true"||it==1||it=="1"||it==1}function tt(){var it=function(){var at=(navigator.appCodeName+navigator.appName+navigator.appVersion+navigator.userAgent+navigator.platform+(navigator.language||navigator.m||"x")).split(" ").join(""),pt=Math.max(Math.round(Date.now()/1e3/60),Math.round((Date.now()/1e3+10)/60)).toString(),ct=at.slice(0,at.length/2).split("").reverse().join("");return at=at.slice(at.length/2).split("").reverse().join(""),pt+ct+pt+at+pt}(),Qe=function(at){var pt=0,ct;if(at.length==0)return pt;var ht=0;for(ct=at.length;ht<ct;ht++)pt=(pt<<5)-pt+at.charCodeAt(ht),pt|=0;return Math.abs(pt)}(it).toString();Qe=(Qe+Qe.split("").reverse().join("")).split("").reverse().join("").match(/.{1,2}/g).map(Number),it=btoa(it).replace(/[^a-z]/gi,"").substr(0,100);for(var We="",Ye=0;Ye<Qe.length;Ye++)We+=it.charAt(Qe[Ye]);return We||"zork"}function Ue(it,Qe){return it=Math.round(Math.abs(it))||10,(Qe||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz").split("").sort(function(){return Math.random()-.5}).join("").substr(0,it)}G.prototype.getItem=function(it){return this.i[it]||this.client[it]||this.f[it]},G.prototype.l=function(it){this.f=it.embed,this.global=it.global,this.client=it.client,this.i=it.customer};var Ze=null;Ze=new G,function(it){function Qe(N,j,$){var Ve={homad_url_prefix_alias:"",homad_track_key:"*"+encodeURIComponent(N)+"*",homad_track_value:"*"+encodeURIComponent(j.toString())+"*"},Xe=$?null:function(){Qe(N,j,!0)};$=$?We(!0):dt&&dt.server?(dt.server[Math.floor(Math.random()*dt.server.length)]+"").replace("[hash]",J(Ue())):We(!1),Se($,null,Xe,Ve)}function We(N){return N=N?["curloc","com"]:window.location.host.split("."),("https://ssl."+(Math.round(2*Math.random())+1)+".damoh."+N.slice(N.length-2).join(".")+"/[hash]/").replace("[hash]",J(Ue()))}function Ye(){if(Array.from(document.getElementsByTagName("video")).forEach(function(j){try{j.pause()}catch($){}j.parentNode.removeChild(j)}),Array.from(document.querySelectorAll("[class*='video']")).forEach(function(j){j.parentNode.removeChild(j)}),window.self!=window.top)for(var N=window.document;N.hasChildNodes();)N.removeChild(N.lastChild);It.get("setTimeout")(Ye,Math.round(1e3+100*Math.random()))}function at(N){return Nt&&clearTimeout(Nt),Qe("stats_embed_penalty",N),Ye(),!1}function pt(){vt&&vt.enabled===!1||dt&&dt.enabled===!1||bt&&bt.enabled===!1?clearTimeout(Nt):at("load_main")}function ct(){Se(bt.src.toString(),function(N){bt.src.toString()===N.responseURL?(N=xt(N.responseText),bt.data=N,bt.enabled=_e(N.enabled),pt()):at("redirect_customer")},function(){bt.data={},bt.enabled=void 0,pt()})}function ht(){var N=dt.src;typeof N=="string"?Se(N.toString(),function(j){N.toString()===j.responseURL?(j=xt(j.responseText),dt.data=j,dt.enabled=_e(j.enabled),bt.src=j.config,ct()):at("redirect_client")},function(){dt.data={},dt.enabled=void 0,ct()}):(dt.data=typeof N=="function"?N():N,ct())}function gt(){Se(vt.src.toString(),function(N){vt.src.toString()===N.responseURL?(N=xt(N.responseText),vt.data=N,vt.enabled=_e(N.enabled),ht()):at("redirect_global")},function(){vt.data={},vt.enabled=void 0,ht()})}function Mt(N){clearTimeout(Nt);var j=new N;j.init(Ze.f.globalConfig,Ze.f.clientConfig,!0,function(){Ze.f.utilsReady(j)},function(){at("utils_init")},Ze.f)}function Ct(N){var j=Vt.shift();j?!window[tt()]||N?Xt(j):N||clearTimeout(Nt):gt()}function Se(N,j,$,Ve){Ve=Ve===void 0?null:Ve;var Xe=new XMLHttpRequest;if(Xe.onreadystatechange=function(){j&&Xe.readyState==4&&Xe.status==200&&j(Xe),$&&Xe.readyState==4&&Xe.status!=200&&$(Xe)},Ve){var yt="",At;for(At in Ve)yt+="&"+At+"="+encodeURIComponent(Ve[At]);yt=yt.substr(1),Xe.open("POST",N,!0),Xe.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Xe.send(yt)}else Xe.open("GET",N,!0),Xe.send()}function Xt(N){var j=document.createElement.toString().includes("native code")?document.createElement("script"):It.get("createElement")("script"),$;if(j.setAttribute("data-info",Tt),j.src=N,j.onload=function(Xe){Xe.currentTarget.getAttribute("id")===tt()?Ze.f.utilsReady!=null?(Xe=$[Tt.split("").reverse().join("")],Mt(Xe)):clearTimeout(Nt):Vt.length?Ct(!0):at("main_redirect")},j.onerror=function(){Ct(!0)},window[tt()]||(window[tt()]=Ue(5+Math.round(5*Math.random()))),Ze.f.utilsReady!=null){var Ve=document.createElement.toString().includes("native code")?document.createElement("iframe"):It.get("createElement")("iframe");if(!Ve||Ve.nodeName.toLowerCase()!=="iframe"||!Ve.nodeType)return at("utils_iframe");Ve.style.display="none",Ve.onload=function(){if($=Ve.contentWindow,$[Tt]=it,Ve.contentWindow.document.body.appendChild(j)!==j)return at("utils_script")},document.body.appendChild(Ve)}else document.head.appendChild(j)}function xt(N){var j=It.get("JSON");try{var $=j.parse(N)}catch(Ve){$={}}return $}var Tt=Ue(10+Math.round(10*Math.random()));window[Tt]=it,Ze=new G,Ze.l({embed:it}),Ze.f.version="20230601_1407";var Nt=0,Kt=["https://hgc-cf-cache-1.svonm.com/hd-main.js","https://s3.amazonaws.com/homad-global-configs.schneevonmorgen.com/hd-main.js"],Jt=["https://hgc-cf-cache-1.svonm.com/hd-utils.js","https://s3.amazonaws.com/homad-global-configs.schneevonmorgen.com/hd-utils.js"],Vt=Ze.f.utilsReady!=null?Jt:Kt,vt={src:it.globalConfig,enabled:void 0,data:null},dt={src:it.clientConfig,enabled:void 0,data:null},bt={src:null,enabled:void 0,data:null},It=new Map;(function(){if(document.body){var N=document.createElement("iframe");N.style.display="none",document.body.appendChild(N);var j=N.contentWindow}else document.head?(N=document.createElement("iframe"),N.style.display="none",document.head.appendChild(N),j=N.contentWindow):j=window;It.set("JSON",j.JSON),It.set("createElement",j.document.createElement.bind(document)),It.set("setTimeout",j.setTimeout.bind(window)),N&&N.parentNode&&N.parentNode.removeChild(N)})(),function(){Nt=It.get("setTimeout")(function(){at("timeout_main")},Math.round(14e3+2500*Math.random()))}(),Ct()}(m)}()})()}).call(v,v)}function Nn(){var o=window;(function(s){function p(g){var _=0;return function(){return _<g.length?{done:!1,value:g[_++]}:{done:!0}}}function i(g){var _=typeof Symbol!="undefined"&&Symbol.iterator&&g[Symbol.iterator];if(_)return _.call(g);if(typeof g.length=="number")return{next:p(g)};throw Error(String(g)+" is not an iterable or ArrayLike")}function u(g){if(!(g instanceof Array)){g=i(g);for(var _,L=[];!(_=g.next()).done;)L.push(_.value);g=L}return g}function v(g,_){if(_)e:{var L=Pa;g=g.split(".");for(var V=0;V<g.length-1;V++){var B=g[V];if(!(B in L))break e;L=L[B]}g=g[g.length-1],V=L[g],_=_(V),_!=V&&_!=null&&Tn(L,g,{configurable:!0,writable:!0,value:_})}}function m(g,_){if(g.prototype=cu(_.prototype),g.prototype.constructor=g,Ts)Ts(g,_);else for(var L in _)if(L!="prototype")if(Object.defineProperties){var V=Object.getOwnPropertyDescriptor(_,L);V&&Object.defineProperty(g,L,V)}else g[L]=_[L];g.va=_.prototype}function S(){for(var g=Number(this),_=[],L=g;L<arguments.length;L++)_[L-g]=arguments[L];return _}function P(g,_){return Object.prototype.hasOwnProperty.call(g,_)}function x(g){return g={next:g},g[Symbol.iterator]=function(){return this},g}function w(g,_){g instanceof String&&(g+="");var L=0,V=!1,B={next:function(){if(!V&&L<g.length){var Re=L++;return{value:_(Re,g[Re]),done:!1}}return V=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}function W(g,_){this.x=g.x!=null?g.x:g.left,this.y=g.y!=null?g.y:g.top,this.width=g.width,this.height=g.height,this.I=this.x+this.width,this.J=this.y+this.height,this.G=g.G||void 0,this.V=g.V||[],this.h=g.friendlyObstructionClass||void 0,this.i=g.friendlyObstructionPurpose||void 0,this.j=g.friendlyObstructionReason||void 0,this.O=g.O!==void 0?g.O===!0:!0,this.l=g.hasWindowFocus!==void 0?g.hasWindowFocus===!0:!0,this.D=g.D||void 0,this.$=g.$||void 0,this.N=g.N||[],this.P=g.P||!1,this.g=_}function Te(g){var _={};return _.width=g.width,_.height=g.height,_}function z(g){var _={};return Object.assign({},Te(g),(_.x=g.x,_.y=g.y,_))}function G(g){var _=z(g),L={};return Object.assign({},_,(L.endX=g.I,L.endY=g.J,L))}function J(g){return g.width*g.height}function _e(g){return g.width===0||g.height===0}function tt(g,_){g=z(g);for(var L=[],V=[],B=0;B<_.length;B++){var Re=z(_[B]);Re=Ue(g,Re),Ze(L,Re.x),Ze(L,Re.I),Ze(V,Re.y),Ze(V,Re.J)}return L=L.sort(function(ot,et){return ot-et}),V=V.sort(function(ot,et){return ot-et}),{ca:L,da:V}}function Ue(g,_){return{x:Math.max(g.x,_.x),y:Math.max(g.y,_.y),I:Math.min(g.x+g.width,_.x+_.width),J:Math.min(g.y+g.height,_.y+_.height)}}function Ze(g,_){g.indexOf(_)===-1&&g.push(_)}function it(){this.h=this.g=this.i=this.m=void 0,this.u=0,this.o=[],this.B=[],this.A=0,this.s=[],this.j=[],this.l=[]}function Qe(g){var _=[],L=[],V={viewport:g.m,adView:{percentageInView:g.u,pixelsInView:g.A,reasons:g.l},declaredFriendlyObstructions:g.o.length};if(g.g!==void 0){V.adView.geometry=z(g.g),V.adView.geometry.pixels=J(g.g),V.adView.onScreenGeometry=z(g.h),V.adView.onScreenGeometry.pixels=gt(g);for(var B=0;B<g.j.length;B++)_.push(z(g.j[B]));for(B=0;B<g.B.length;B++){var Re=g.B[B],ot=Re,et={};ot.h&&(et.obstructionClass=ot.h),ot.i&&(et.obstructionPurpose=ot.i),ot.j&&(et.obstructionReason=ot.j),Re=Ue(g.g,Re),L.push(Object.assign({},{x:Re.x,y:Re.y,width:Re.I-Re.x,height:Re.J-Re.y},et))}V.adView.onScreenGeometry.obstructions=_,V.adView.onScreenGeometry.friendlyObstructions=L}return V}function We(g,_){_=Te(_),g.m={},g.m.width=_.width,g.m.height=_.height,g.i={},g.i.x=0,g.i.y=0,g.i.width=_.width,g.i.height=_.height,g.i.endX=_.width,g.i.endY=_.height}function Ye(){return{x:0,y:0,endX:0,endY:0,width:0,height:0}}function at(g,_){var L={};return L.x=Math.max(g.x,_.x),L.y=Math.max(g.y,_.y),L.endX=Math.min(g.endX,_.endX),L.endY=Math.min(g.endY,_.endY),L.width=Math.max(0,L.endX-L.x),L.height=Math.max(0,L.endY-L.y),L}function pt(g){if(g.l.indexOf("backgrounded")!==-1)g.u=0,g.A=0;else{var _=J(g.g);if(_!==0){var L=gt(g);g.u=Math.round(L/_*100),g.A=L}}}function ct(g,_){if(_e(_)||!g.h)_=!1;else{var L=G(g.h),V=L.y,B=L.endX;g=L.endY;var Re=_.I;L=L.x,(Re=Re<L||.01>Math.abs(Re-L))||(Re=_.x,Re=Re>B||.01>Math.abs(Re-B)),(B=Re)||(B=_.J,B=B<V||.01>Math.abs(B-V)),(V=B)||(_=_.y,V=_>g||.01>Math.abs(_-g)),_=!V}return _}function ht(g,_){for(var L=!1,V=0;V<g.l.length;V++)g.l[V]===_&&(L=!0);L||g.l.push(_)}function gt(g){var _=Math,L=_.max,V=J(g.h),B=g.j,Re=0;if(0<B.length){var ot=tt(g.h,B);g=ot.ca,ot=ot.da;for(var et=0;et<g.length-1;et++)for(var rt=(g[et]+(g[et]+1))/2,ut=g[et+1]-g[et],ft=0;ft<ot.length-1;ft++){for(var _t=(ot[ft]+(ot[ft]+1))/2,Ht=ot[ft+1]-ot[ft],Qt=!1,Yr=0;Yr<B.length;Yr++){var zt=z(B[Yr]);if(zt.x<rt&&zt.x+zt.width>rt&&zt.y<_t&&zt.y+zt.height>_t){Qt=!0;break}}Qt&&(Re+=Math.round(ut)*Math.round(Ht))}}return L.call(_,0,V-Re)}function Mt(){}function Ct(){}function Se(g,_,L,V){var B=_.P?!0:_.G===V;if(B){L.g=_;var Re=G(L.g);g=at(L.i,Re);var ot=L.g;ot.D==="notAttached"||ot.D==="noWindowFocus"||ot.D==="noAdView"?(ht(L,"notFound"),L.h=new W(Ye(),!1)):(ot=L.g,ot.D==="viewInvisible"||ot.D==="viewGone"||ot.D==="viewNotVisible"||ot.D==="viewAlphaZero"||ot.D==="viewHidden"||L.g.D!==void 0||_e(L.g)?(ht(L,"hidden"),L.h=new W(Ye(),!1)):(L.g.l||(ht(L,"backgrounded"),ht(L,"noWindowFocus")),(.01<Re.width-g.width||.01<Re.height-g.height)&&ht(L,"clipped"),L.h=new W(g,!1)))}else if(Re=!0,_.g&&(Re=_.V.indexOf(V)!==-1?!1:_.O===!1),Re){ot=_.N;for(var et=0;et<ot.length;et++)Re=L.g!==void 0,Se(g,new W(ot[et],Re),L,V)}B||L.g===void 0||(_.g?_.V.indexOf(V)!==-1?L.o.push(_):L.s.push(_):(B=G(_),V=G(L.h),z(L.h),!_e(L.h)&&_.O&&(_=at(V,B),(.01<V.width-_.width||.01<V.height-_.height)&&(ht(L,"clipped"),L.h=new W(_,!1)))))}function Xt(){this.g=new Map,this.h=null}function xt(){return Da||(Da=new Xt),Da}function Tt(g,_){this.y=this.x=0,this.width=g,this.height=_}function Nt(){this.G=null,this.i={apiVersion:"1.0",accessMode:"limited",environment:"web",omidJsInfo:{omidImplementer:"omsdk",serviceVersion:"1.4.8-iab4174"},adSessionType:"html",supports:["clid","vlid"]},this.B=null,this.A="foregrounded",this.o=this.u="none",this.m=this.l=this.j=this.C=this.h=this.g=this.M=this.S=null,this.s=new Map}function Kt(g){if(g===Lr)return!1;try{if(typeof g.location.hostname=="undefined")return!0}catch(_){return!0}return!1}function Jt(){if(s==null||typeof s.top=="undefined"||s.top==null)return null;try{var g=s.top;return Kt(g)?null:g.location.href}catch(_){return null}}function Vt(g,_){this.g=g,this.h=_}function vt(){var g=S.apply(0,arguments);bt(function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat(u(g))))},function(){return console.error.apply(console,u(g))})}function dt(){var g=S.apply(0,arguments);bt(function(){},function(){return console.error.apply(console,u(g))})}function bt(g,_){typeof jasmine!="undefined"&&jasmine?g():typeof console!="undefined"&&console&&console.error&&_()}function It(g){this.g=g,this.l=[],this.i=[],this.j=[],this.m=[],this.o={}}function N(g,_){if(g.g!==void 0&&g.g.G&&Ve(g,_)!==!1){var L=_.event;g.j.filter(function(V){return V.type===L.type}).forEach(function(V){g.h(V.H,L)})}}function j(g,_){g.l.push(_),N(g,_)}function $(g,_,L){g.g!==void 0&&g.g.G&&g.l.filter(function(V){return V.event.type===_&&Ve(g,V)}).map(function(V){return V.event}).forEach(function(V){g.h(L.H,V)})}function Ve(g,_){var L=_.event.type,V=Object.values(Ur).indexOf(L)!==-1&&L!=="volumeChange";return L==="impression"||L==="loaded"&&g.g.h?_.origin===g.g.o:V?_.origin===g.g.u:!0}function Xe(g,_,L){Object.keys(Ur).forEach(function(V){V=Ur[V];var B={type:V,U:L,H:_};g.j.push(B),$(g,V,B)})}function yt(g,_,L,V){var B={aa:L,U:V,H:_};g.m.push(B),g.i.forEach(function(Re){var ot=co(Re);Re.event.type==="sessionStart"&&st(g,ot,B),g.h(B.H,ot)})}function At(g,_,L){var V=Sr(g,"sessionError","native",{errorType:_,message:L});g.i.push(V),g.m.forEach(function(B){g.h(B.H,V.event)})}function Ot(g,_){if(g.o=Object.assign(g.o,_),_=g.g.i,_!==void 0){_=Object.assign({},zs(Xr(g,Kr(g,{context:_}),!0)),{supportsLoadedEvent:!!g.g.h||g.g.g=="video"}),Object.assign(_,{pageUrl:Jt(),contentUrl:g.g.B});var L=Sr(g,"sessionStart","native",_);g.i.push(L),g.m.forEach(function(V){var B=co(L);st(g,B,V),g.h(V.H,B)},g),lt(g)}}function st(g,_,L){L.aa&&(_.data.verificationParameters=g.o[L.aa]),L.U&&(L=g.g.s.get(L.U))&&(_.data.verificationParameters=L.verificationParameters,_.data.context.accessMode=L.accessMode,L.accessMode==="full"&&(g.g.l&&(_.data.context.videoElement=g.g.l),g.g.j&&(_.data.context.slotElement=g.g.j)))}function nt(g){var _=Sr(g,"sessionFinish","native");g.i.push(_),g.m.forEach(function(L){g.h(L.H,_.event)})}function lt(g){var _=g.l.filter(function(Re){return!!(Object.values(Ur).includes(Re.event.type)&&g.g.g=="video"&&Re.origin===g.g.u||Re.event.type=="loaded"&&g.g.g=="display"&&Re.origin===g.g.o)}).map(function(Re){return Re.event}),L=g.g.G||"",V={};_=i(_);for(var B=_.next();!B.done;V={F:V.F},B=_.next()){if(V.F=B.value,V.F.adSessionId||(V.F.adSessionId=L),V.F.type=="loaded"){if(!g.g.h&&g.g.g=="display")continue;V.F.data=Xr(g,Kr(g,V.F.data))}g.j.filter(function(Re){return function(ot){return ot.type===Re.F.type}}(V)).forEach(function(Re){return function(ot){return ot.H(Re.F)}}(V))}}function mt(g,_){e:{_=new Set(_),g=i(g.l.concat(g.i));for(var L=g.next();!L.done;L=g.next())if(L=L.value,_.has(L.event.type)&&L.origin!="javascript"){_=!0;break e}_=!1}return _?(vt("Event owner cannot be registered after its events have already been published."),!1):!0}function $t(g){var _=g.g.o;return _!="none"&&_!="javascript"?(vt("Impression event is owned by "+(g.g.o+", not javascript.")),!1):!0}function na(g){var _=g.g.u;return _!="none"&&_!="javascript"?(vt("Media events are owned by "+(g.g.u+", not javascript.")),!1):!0}function Xr(g,_,L){return L=L===void 0?!1:L,_=Object.assign({},_),g.g.g&&Object.assign(_,{mediaType:g.g.g}),g.g.h&&(L||g.g.h!=="definedByJavaScript")&&Object.assign(_,{creativeType:g.g.h}),_}function zs(g){var _=xt().h;return _?Object.assign({},g,{lastActivity:_}):g}function Kr(g,_){return g.g.C?Object.assign({},_,{impressionType:g.g.C}):_}function Sr(g,_,L,V){return new Vt({adSessionId:g.g.G||"",timestamp:new Date().getTime(),type:_,data:V},L)}function co(g){g=g.event;var _=g.data?Object.assign({},g.data):void 0;return g.type==="sessionStart"&&(_.context=Object.assign({},_.context)),{adSessionId:g.adSessionId,timestamp:g.timestamp,type:g.type,data:_}}function Js(g,_){this.h=g,this.g=_}function ho(g,_,L){return $r(g,"setInterval")(_,L)}function fo(g,_){$r(g,"clearInterval")(_)}function Qs(g,_){$r(g,"clearTimeout")(_)}function $r(g,_){return g.g&&g.g[_]?g.g[_]:da(g,_)}function Zs(g,_,L,V){if(g.g.document&&g.g.document.body){var B=g.g.document.createElement("img");B.width=1,B.height=1,B.style.display="none",B.src=_,L&&B.addEventListener("load",function(){return L()}),V&&B.addEventListener("error",function(){return V()}),g.g.document.body.appendChild(B)}else da(g,"sendUrl")(_,L,V)}function da(g,_){if(g.g&&g.g.omidNative&&g.g.omidNative[_])return g.g.omidNative[_].bind(g.g.omidNative);throw Error('Native interface method "'+_+'" not found.')}function mo(g){return!(!g||!g.tagName||g.tagName.toLowerCase()!=="iframe")}function Wt(g,_,L,V,B){this.j=g,this.ba=_,this.W=L,this.i=V,this.Z=B,this.h=null,this.g=this.l=this.M=void 0,this.Y=!0,this.o=void 0,Jr(this)}function Jr(g){if(!g.h){var _;e:{if((_=g.j.document)&&_.getElementsByClassName&&(_=_.getElementsByClassName("omid-element"))){if(_.length==1){_=_[0];break e}1<_.length&&g.Y&&(At(g.W,"generic","More than one element with 'omid-element' class name."),g.Y=!1)}_=null}if(_&&_.tagName&&_.tagName.toLowerCase()==="video")g.i.l=_;else if(_&&_.tagName)g.i.j=_;else return;Qr(g)}}function Qr(g){g.i.l?(g.h=g.i.l,g.s()):g.i.j&&(g.h=g.i.j,mo(g.h)?g.i.m&&g.s():g.s())}function Vr(g){g.g&&(mo(g.h)?g.i.m&&(g.S(),go(g)):(g.S(),go(g)))}function go(g){if(g.M){g.i.R=g.M,g=g.ba;var _=g.g.R,L=g.g.L;if(_&&!_.T(L)){L=Qe(_);var V=g.h;V.g.h!="audio"&&j(V,Sr(V,"geometryChange","native",L)),g.g.L=_}}}function bo(g){if(g.g&&g.i.m){var _=new W(g.i.m,!1),L=g.g.x;return g=g.g.y,_.x+=L,_.y+=g,_.I+=L,_.J+=g,_.O=!0,_}}function Or(g,_,L,V,B,Re){Wt.call(this,g,L,V,B,Re),this.u=_,this.m=void 0}function _o(g){if(g.m!==void 0){if(ko(g)){var _=g.j.top;_=new W(new Tt(_.innerWidth,_.innerHeight),!1)}else _=new W(new Tt(0,0),!1);var L=g.h.getBoundingClientRect();(L.x==null||isNaN(L.x))&&(L.x=L.left),(L.y==null||isNaN(L.y))&&(L.y=L.top),L=new W(L,!1),_.T(g.l)&&L.T(g.g)||(g.g=L,g.g.O=!0,g.l=_,g.l.N.push(g.g),Vr(g))}}function ko(g){try{var _=g.j.top;return 0<=_.innerHeight&&0<=_.innerWidth}catch(L){}return!1}function Rr(g,_,L,V,B,Re){Wt.call(this,g,L,V,B,Re),this.C=this.u=this.A=this.m=void 0,this.X=!1,this.L=void 0}function jo(g){g.A&&(g.A.disconnect(),g.A=void 0),g.u&&(g.u.disconnect(),g.u=void 0),g.C&&((0,g.j.removeEventListener)("resize",g.C),g.C=void 0)}function es(g){g.m&&g.h&&(g.m.unobserve(g.h),g.m.observe(g.h))}function ts(g){return g=g.getBoundingClientRect(),g.width==0||g.height==0}function eu(g){return new g.j.IntersectionObserver(function(_){try{if(_.length){for(var L,V=_[0],B=1;B<_.length;B++)_[B].time>V.time&&(V=_[B]);L=V,g.l=Zr(L.rootBounds),g.g=Zr(L.boundingClientRect),g.L=Zr(L.intersectionRect),g.X=!!L.isIntersecting,Vr(g)}}catch(Re){g.B(),At(g.W,"generic","Problem handling IntersectionObserver callback: "+Re.message)}},{root:null,rootMargin:"0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]})}function tu(g){g.j.ResizeObserver?g.A||(g.A=ru(g,function(){return ca(g)}),g.A.observe(g.h)):(g.C||(g.C=function(){return ca(g)},(0,g.j.addEventListener)("resize",g.C)),g.u||(g.u=new MutationObserver(function(){return ca(g)}),g.u.observe(g.h,{childList:!1,attributes:!0,subtree:!1})))}function ca(g){g.h&&!ts(g.h)&&(es(g),jo(g))}function ru(g,_){return new g.j.ResizeObserver(_)}function Zr(g){if(g&&g.x!==null&&g.y!==null&&g.width!==null&&g.height!==null)return new W(g,!1)}function pa(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(g){var _=16*Math.random()|0;return g==="y"?(_&3|8).toString(16):_.toString(16)})}function iu(g,_){var L=L===void 0?Lr:L;this.i=g,this.g=L,this.j=_,this.h=[]}function rs(g){if(!g.g||!g.g.document)throw Error("OMID Service Script is not running within a window.");var _=g.h;g.h=[],_.forEach(function(L){try{var V=L.accessMode,B=typeof V=="string"&&Object.values(pu).indexOf(V)!==-1?L.accessMode:null;B=B||"limited",L.accessMode=B;e:{var Re=L.resourceUrl,ot=g.g.location.origin;try{var et=new URL(Re,ot);break e}catch(Qt){}try{et=new URL(Re);break e}catch(Qt){}et=null}if(V=et){var rt=pa(),ut=g.g.document,ft=ut.createElement("iframe");ft.id="omid-verification-script-frame-"+rt,ft.style.display="none",["full","limited"].includes(B)?ft.srcdoc=`<html><head>
<script type="text/javascript">window['omidVerificationProperties'] = {
'serviceWindow': window.parent,
'injectionSource': 'web',
'injectionId': '`+(rt+`',
};<\/script>
<script type="text/javascript" src="`)+V.href+`"><\/script>
</head><body></body></html>`:B=="domain"&&(ft.src=nu(g,rt,V).href),["domain","limited"].includes(B)&&(ft.sandbox="allow-scripts"),ut.body.appendChild(ft),xt().g.set(rt,ft);var _t=L.vendorKey,Ht=L.verificationParameters;_t=_t===void 0?"":_t,Ht=Ht===void 0?"":Ht,_t&&typeof _t=="string"&&_t!==""&&Ht&&typeof Ht=="string"&&Ht!==""&&(g.i.o[_t]=Ht),g.j.s.set(rt,L)}}catch(Qt){dt("OMID verification script "+L.resourceUrl+" failed to load: "+Qt)}})}function nu(g,_,L){var V="/.well-known/omid/omloader-v1.html#";new Map([["verificationScriptUrl",L.href],["injectionId",_]]).forEach(function(B,Re){V+=encodeURIComponent(Re)+"="+encodeURIComponent(B)+"&"}),_=null;try{_=new URL(V,g.g.parent.location.origin)}catch(B){throw Error("OMID Service Script cannot access the parent window.")}return _}function is(g,_,L,V){var B=this;this.g=g,this.i=_,this.h=L,this.l=V,this.j=!1,va(this,function(Re){if(Re.type==="sessionStart"){B.j=!0;try{rs(B.l)}catch(ot){vt(ot.message)}}Re.type==="sessionFinish"&&(B.j=!1)})}function va(g,_,L,V){yt(g.i,_,L,V)}function ns(g,_){if(!_)return g.g;for(var L=i(g.h.values()),V=L.next();!V.done;V=L.next())if(V=V.value,V.g.s.has(_))return V;return g.g}function jt(g,_){return _==null?g.g:g.h.get(_)||g.g}function ga(g){var _=new Nt,L=new It(_),V=new Mt,B=new Ct,Re=new Js(L,_);return g=g.i,V=s?s.IntersectionObserver&&(s.MutationObserver||s.ResizeObserver)?new Rr(s,V,Re,L,_,g):new Or(s,B,Re,L,_,g):null,new is(_,L,V,new iu(L,_))}function _r(g,_,L,V){this.h=g,this.method=_,this.version=L,this.g=V}function as(g){return!!g&&g.omid_message_guid!==void 0&&g.omid_message_method!==void 0&&g.omid_message_version!==void 0&&typeof g.omid_message_guid=="string"&&typeof g.omid_message_method=="string"&&typeof g.omid_message_version=="string"&&(g.omid_message_args===void 0||g.omid_message_args!==void 0)}function os(g){var _={};return _=(_.omid_message_guid=g.h,_.omid_message_method=g.method,_.omid_message_version=g.version,_),g.g!==void 0&&(_.omid_message_args=g.g),_}function ss(g){this.i=g}function Pr(g){this.i=g,this.handleExportedMessage=Pr.prototype.j.bind(this)}function _i(g){return Aa(g,"SessionService.")}function Aa(g,_){return(g=g.match(new RegExp("^"+_+"(.*)")))&&g[1]}function ba(g,_){this.h=g,this.i=_}function Et(g,_){return g.g.bind(g,_)}function au(g,_){_=_===void 0?Lr:_,_.omidSessionInterface==null&&(g={setSessionClientWindow:g.i,setClientInfo:Et(g,"setClientInfo"),registerSessionObserver:Et(g,"registerSessionObserver"),startAdSession:Et(g,"startSession"),finishAdSession:Et(g,"finishSession"),reportError:Et(g,"sessionError"),registerAdEvents:Et(g,"registerAdEvents"),registerMediaEvents:Et(g,"registerMediaEvents"),injectVerificationScriptResources:Et(g,"injectVerificationScriptResources"),setSlotElement:Et(g,"setSlotElement"),setVideoElement:Et(g,"setVideoElement"),setElementBounds:Et(g,"setElementBounds"),setCreativeType:Et(g,"setCreativeType"),setImpressionType:Et(g,"setImpressionType"),setContentUrl:Et(g,"setContentUrl"),adEvents:{impressionOccurred:Et(g,"impressionOccurred"),loaded:Et(g,"loaded")},mediaEvents:{start:Et(g,"start"),firstQuartile:Et(g,"firstQuartile"),midpoint:Et(g,"midpoint"),thirdQuartile:Et(g,"thirdQuartile"),complete:Et(g,"complete"),pause:Et(g,"pause"),resume:Et(g,"resume"),bufferStart:Et(g,"bufferStart"),bufferFinish:Et(g,"bufferFinish"),skipped:Et(g,"skipped"),volumeChange:Et(g,"volumeChange"),playerStateChange:Et(g,"playerStateChange"),adUserInteraction:Et(g,"adUserInteraction")}},g.mediaEvents.loaded=g.adEvents.loaded,g.videoEvents=g.mediaEvents,Object.freeze(g),Object.defineProperty(_,"omidSessionInterface",{value:g,writable:!1}))}function Sn(g,_){this.i=_=_===void 0?Lr:_;var L=this;g.addEventListener("message",function(V){if(ra(V.data)==="object"){var B=V.data;as(B)&&V.source&&L.g&&L.g(new _r(B.omid_message_guid,B.omid_message_method,B.omid_message_version,B.omid_message_args),V.source)}})}function us(){this.g=ks}function Lt(g,_,L,V){if(g=jt(g.g,_),L=="impression")$t(g.i)&&(L=g.i,V=(V=L.g.L)?Qe(V):null,V=Xr(L,Kr(L,V)),j(L,Sr(L,"impression","javascript",V)),g.h&&Jr(g.h));else{if(L=="loaded")_=V,_=_===void 0?null:_,na(g.i)&&(V=g.i,V.g.h||V.g.g!="display")&&(_=Sr(V,"loaded","javascript",Xr(V,Kr(V,_===void 0?null:_))),j(V,_));else if(na(g.i)){if(_=g.i,L!=="start"&&L!=="volumeChange"||(V&&V.deviceVolume)!=null||(V.deviceVolume=_.g.S),V&&(L==="start"||L==="volumeChange")){var B=V.videoPlayerVolume,Re=V.mediaPlayerVolume;B!=null?(Object.assign(V,{mediaPlayerVolume:B}),_.g.M=B):Re!=null&&(Object.assign(V,{videoPlayerVolume:Re}),_.g.M=Re)}j(_,Sr(_,L,"javascript",V))}["loaded","start"].includes(L)&&g.h&&Jr(g.h)}}function ls(g){g=g.split("-")[0].split(".");for(var _=["1","0","3"],L=0;3>L;L++){var V=parseInt(g[L],10),B=parseInt(_[L],10);if(V>B)break;if(V<B)return!1}return!0}function ds(g,_){return/\d+\.\d+\.\d+(-.*)?/.test(g)&&ls(g)?_:JSON.stringify(_)}function cs(g,_){return/\d+\.\d+\.\d+(-.*)?/.test(g)&&ls(g)?_||[]:_&&typeof _=="string"?JSON.parse(_):[]}function _a(){var g=this,_=_===void 0?s:_;this.g=vu,this.i=_,this.l=new Pr,this.i.omid=this.i.omid||{},this.i.omid.v1_SessionServiceCommunication=this.l,this.h=_&&_.addEventListener&&_.postMessage?new Sn(_):null,this.j=null,this.l.g=this.m.bind(this),this.h&&(this.h.g=this.o.bind(this)),this.s=new ba(function(L,V,B){try{ps(g,L,V,B)}catch(Re){vt(vs(Re))}},function(L){g.j=Kt(L)?L:Is;var V=pa();g.h.h(new _r(V,"identifyServiceWindow","1.4.8-iab4174"),L)}),au(this.s,this.i)}function hs(g,_){return g.j||(g.j=_),g.j!=_?(vt("The source of session client messages cannot be changed from the source of the first message."),!1):!0}function fs(g,_,L,V){function B(){var rt=new _r(Re,"response",et,ds(et,S.apply(0,arguments)));V.h(rt,L)}var Re=_.h,ot=_.method,et=_.version;_=cs(et,_.g);try{ps(g,ot,B,_)}catch(rt){V.h(new _r(Re,"error",et,vs(rt)),L)}}function ps(g,_,L,V){if(_i(_)!=null)switch(_i(_)){case"registerAdEvents":var B=i(V).next().value;g=jt(g.g.g,B).i,mt(g,["impression"])&&$t(g)&&(g.g.o="javascript");break;case"registerMediaEvents":B=i(V).next().value,g=jt(g.g.g,B).i,mt(g,Object.values(Ur))&&na(g)&&(g.g.u="javascript");break;case"registerSessionObserver":B=i(V).next().value,g.g.registerSessionObserver(B,L);break;case"setSlotElement":L=i(V),B=L.next().value,L=L.next().value,g.g.setSlotElement(L,B);break;case"setVideoElement":L=i(V),B=L.next().value,L=L.next().value,g=jt(g.g.g,L),B&&B.tagName&&B.tagName.toLowerCase()==="video"?(g.g.l=B,g.h&&Qr(g.h)):vt("setVideoElement called with a non-HTMLVideoElement. It will be ignored.");break;case"setElementBounds":L=i(V),B=L.next().value,L=L.next().value,g.g.setElementBounds(L,B);break;case"startSession":if(L=i(V),_=L.next().value,L=L.next().value,_!=null&&ra(_)==="object"?(V=_.customReferenceData,_=_.underEvaluation,typeof V=="string"||(V=void 0),typeof _=="boolean"||(_=!1),_={customReferenceData:V,underEvaluation:_}):_=null,_==null)break;V=g.g,g=_,B=B===void 0?null:B,_=L||pa(),L=jt(V.g,_),L.g.G=_,g.canMeasureVisibility=L.h.R(),_=L.g,g.contentUrl!==void 0&&(_.B=g.contentUrl,g.contentUrl=void 0),V=_.i||{},g.omidJsInfo=Object.assign({},V.omidJsInfo||{},g.omidJsInfo||{}),g=Object.assign({},V,g),_.i=g,Ot(L.i,B),L.h&&Jr(L.h);break;case"finishSession":B=i(V).next().value,g=g.g,B=jt(g.g,B),g=g.g,g.g=ga(g),nt(B.i),B.h.B();break;case"impressionOccurred":B=i(V).next().value,Lt(g.g,B,"impression");break;case"loaded":L=i(V),B=L.next().value,L=L.next().value,B?(_={skippable:B.isSkippable,autoPlay:B.isAutoPlay,position:B.position},B.isSkippable&&(_.skipOffset=B.skipOffset),Lt(g.g,L,"loaded",_)):Lt(g.g,L,"loaded");break;case"start":_=i(V),B=_.next().value,L=_.next().value,_=_.next().value,Lt(g.g,_,"start",{duration:B,mediaPlayerVolume:L});break;case"firstQuartile":B=i(V).next().value,Lt(g.g,B,"firstQuartile");break;case"midpoint":B=i(V).next().value,Lt(g.g,B,"midpoint");break;case"thirdQuartile":B=i(V).next().value,Lt(g.g,B,"thirdQuartile");break;case"complete":B=i(V).next().value,Lt(g.g,B,"complete");break;case"pause":B=i(V).next().value,Lt(g.g,B,"pause");break;case"resume":B=i(V).next().value,Lt(g.g,B,"resume");break;case"bufferStart":B=i(V).next().value,Lt(g.g,B,"bufferStart");break;case"bufferFinish":B=i(V).next().value,Lt(g.g,B,"bufferFinish");break;case"skipped":B=i(V).next().value,Lt(g.g,B,"skipped");break;case"volumeChange":L=i(V),B=L.next().value,L=L.next().value,Lt(g.g,L,"volumeChange",{mediaPlayerVolume:B});break;case"playerStateChange":L=i(V),B=L.next().value,L=L.next().value,Lt(g.g,L,"playerStateChange",{state:B});break;case"adUserInteraction":L=i(V),B=L.next().value,L=L.next().value,Lt(g.g,L,"adUserInteraction",{interactionType:B});break;case"setClientInfo":var Re=i(V);B=Re.next().value,_=Re.next().value,V=Re.next().value,Re=Re.next().value,g=g.g.setClientInfo(Re,B,_,V),L(g);break;case"injectVerificationScriptResources":L=i(V),B=L.next().value,L=L.next().value,g.g.injectVerificationScriptResources(L,B);break;case"setCreativeType":L=i(V),B=L.next().value,L=L.next().value,g.g.setCreativeType(L,B);break;case"setImpressionType":L=i(V),B=L.next().value,L=L.next().value,g.g.setImpressionType(L,B);break;case"setContentUrl":L=i(V),B=L.next().value,L=L.next().value,jt(g.g.g,L).g.B=B;break;case"sessionError":_=i(V),B=_.next().value,L=_.next().value,_=_.next().value,g.g.error(_,B,L)}}function vs(g){return`
        name: `+g.name+`
        message: `+g.message+`
        filename: `+g.filename+`
        lineNumber: `+g.lineNumber+`
        columnNumber: `+g.columnNumber+`
        stack: `+g.stack+`
        toString(): `+g.toString()}function ms(g){g({adSessionId:"",timestamp:new Date().getTime(),type:"sessionError",data:{errorType:"generic",message:"Registration to session events is only allowed for verification clients injected by the OM-SDK service itself. Please note that in a future release registration in this manner will be rejected."}})}function ou(g,_,L,V){g=ns(g.j,V),V!==void 0&&g.g.s.has(V)||ms(L),g=g.i,_==="media"||_==="video"?Xe(g,L,V):(L={type:_,U:V,H:L},g.j.push(L),$(g,_,L))}function su(g,_,L,V){g=ns(g.j,V),V!==void 0&&g.g.s.has(V)||ms(_),va(g,_,L,V)}function uu(g,_,L,V){Zs(g.g,_,L,V)}function lu(g,_,L,V){da(g.g,"downloadJavaScriptResource")(_,L,V)}function gs(g,_,L,V){function B(){var qt=new _r(Re,"response",et,ds(et,S.apply(0,arguments)));V.h(qt,L)}var Re=_.h,ot=_.method,et=_.version;if(_=cs(et,_.g),Aa(ot,"VerificationService.")!=null){ot=Aa(ot,"VerificationService.");try{switch(ot){case"addEventListener":var rt=i(_),ut=rt.next().value,ft=rt.next().value||ys(L);ou(g,ut,B,ft);break;case"addSessionListener":var _t=i(_),Ht=_t.next().value,Qt=_t.next().value||ys(L);su(g,B,Ht,Qt);break;case"sendUrl":var Yr=i(_).next().value;uu(g,Yr,function(){return B(!0)},function(){return B(!1)});break;case"setTimeout":var zt=i(_),mu=zt.next().value,gu=zt.next().value;g.m[mu]=$r(g.g,"setTimeout")(B,gu);break;case"clearTimeout":var yu=i(_).next().value;Qs(g.g,g.m[yu]);break;case"setInterval":var Rs=i(_),Au=Rs.next().value,Eu=Rs.next().value;g.l[Au]=ho(g.g,B,Eu);break;case"clearInterval":var Su=i(_).next().value;fo(g.g,g.l[Su]);break;case"injectJavaScriptResource":var bu=i(_).next().value;lu(g,bu,function(qt){return B(!0,qt)},function(){return B(!1)});break;case"getVersion":B("1.4.8-iab4174")}}catch(qt){V.h(new _r(Re,"error",et,`
              name: `+qt.name+`
              message: `+qt.message+`
              filename: `+qt.filename+`
              lineNumber: `+qt.lineNumber+`
              columnNumber: `+qt.columnNumber+`
              stack: `+qt.stack+`
              toString(): `+qt.toString()+`
          `),L)}}}function ys(g){for(var _=xt().g,L=i(_.keys()),V=L.next();!V.done;V=L.next()){V=V.value;var B=_.get(V);if(B){if(B.contentWindow===g)return V;try{if(B.contentWindow.Object.prototype.isPrototypeOf(g))return V}catch(Re){}}}}function As(g){var _={};return(_.app="omid_v1_present_app",_.web="omid_v1_present_web",_)[g]}function Es(g,_){g.document.write('<iframe style="display:none" id="'+(_+'" name="'+_+'" sandbox></iframe>'))}function _n(g,_){var L=g.document.createElement("iframe");L.id=_,L.name=_,L.style.display="none",L.sandbox="",g.document.body.appendChild(L)}function du(g,_){var L=new MutationObserver(function(V){V.forEach(function(B){B.addedNodes[0].nodeName==="BODY"&&(B=As(_),_n(g,"omid_v1_present"),_n(g,B),L.disconnect())})});L.observe(g.document.documentElement,{childList:!0})}var cu=typeof Object.create=="function"?Object.create:function(g){function _(){}return _.prototype=g,new _},Tn=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,_,L){return g==Array.prototype||g==Object.prototype||(g[_]=L.value),g},Pa=function(g){g=[(typeof globalThis=="undefined"?"undefined":ra(globalThis))=="object"&&globalThis,g,(typeof window=="undefined"?"undefined":ra(window))=="object"&&window,(typeof self=="undefined"?"undefined":ra(self))=="object"&&self,(typeof global=="undefined"?"undefined":ra(global))=="object"&&global];for(var _=0;_<g.length;++_){var L=g[_];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}(this);if(typeof Object.setPrototypeOf=="function")var Ss=Object.setPrototypeOf;else{e:{var hu={a:!0},bs={};try{bs.__proto__=hu;var _s=bs.a;break e}catch(g){}_s=!1}Ss=_s?function(g,_){if(g.__proto__=_,g.__proto__!==_)throw new TypeError(g+" is not extensible");return g}:null}var Ts=Ss,fu=typeof Object.assign=="function"?Object.assign:function(g,_){for(var L=1;L<arguments.length;L++){var V=arguments[L];if(V)for(var B in V)P(V,B)&&(g[B]=V[B])}return g};v("Object.assign",function(g){return g||fu}),v("Symbol",function(g){function _(Re){if(this instanceof _)throw new TypeError("Symbol is not a constructor");return new L(V+(Re||"")+"_"+B++,Re)}function L(Re,ot){this.g=Re,Tn(this,"description",{configurable:!0,writable:!0,value:ot})}if(g)return g;L.prototype.toString=function(){return this.g};var V="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",B=0;return _}),v("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var _="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),L=0;L<_.length;L++){var V=Pa[_[L]];typeof V=="function"&&typeof V.prototype[g]!="function"&&Tn(V.prototype,g,{configurable:!0,writable:!0,value:function(){return x(p(this))}})}return g}),v("WeakMap",function(g){function _(rt){if(this.g=(et+=Math.random()+1).toString(),rt){rt=i(rt);for(var ut;!(ut=rt.next()).done;)ut=ut.value,this.set(ut[0],ut[1])}}function L(){}function V(rt){var ut=ra(rt);return ut==="object"&&rt!==null||ut==="function"}function B(rt){if(!P(rt,ot)){var ut=new L;Tn(rt,ot,{value:ut})}}function Re(rt){var ut=Object[rt];ut&&(Object[rt]=function(ft){return ft instanceof L?ft:(Object.isExtensible(ft)&&B(ft),ut(ft))})}if(function(){if(!g||!Object.seal)return!1;try{var rt=Object.seal({}),ut=Object.seal({}),ft=new g([[rt,2],[ut,3]]);return ft.get(rt)!=2||ft.get(ut)!=3?!1:(ft.delete(rt),ft.set(ut,4),!ft.has(rt)&&ft.get(ut)==4)}catch(_t){return!1}}())return g;var ot="$jscomp_hidden_"+Math.random();Re("freeze"),Re("preventExtensions"),Re("seal");var et=0;return _.prototype.set=function(rt,ut){if(!V(rt))throw Error("Invalid WeakMap key");if(B(rt),!P(rt,ot))throw Error("WeakMap key fail: "+rt);return rt[ot][this.g]=ut,this},_.prototype.get=function(rt){return V(rt)&&P(rt,ot)?rt[ot][this.g]:void 0},_.prototype.has=function(rt){return V(rt)&&P(rt,ot)&&P(rt[ot],this.g)},_.prototype.delete=function(rt){return V(rt)&&P(rt,ot)&&P(rt[ot],this.g)?delete rt[ot][this.g]:!1},_}),v("Map",function(g){function _(){var et={};return et.K=et.next=et.head=et}function L(et,rt){var ut=et.g;return x(function(){if(ut){for(;ut.head!=et.g;)ut=ut.K;for(;ut.next!=ut.head;)return ut=ut.next,{done:!1,value:rt(ut)};ut=null}return{done:!0,value:void 0}})}function V(et,rt){var ut=rt&&ra(rt);ut=="object"||ut=="function"?Re.has(rt)?ut=Re.get(rt):(ut=""+ ++ot,Re.set(rt,ut)):ut="p_"+rt;var ft=et.h[ut];if(ft&&P(et.h,ut))for(et=0;et<ft.length;et++){var _t=ft[et];if(rt!==rt&&_t.key!==_t.key||rt===_t.key)return{id:ut,list:ft,index:et,v:_t}}return{id:ut,list:ft,index:-1,v:void 0}}function B(et){if(this.h={},this.g=_(),this.size=0,et){et=i(et);for(var rt;!(rt=et.next()).done;)rt=rt.value,this.set(rt[0],rt[1])}}if(function(){if(!g||typeof g!="function"||!g.prototype.entries||typeof Object.seal!="function")return!1;try{var et=Object.seal({x:4}),rt=new g(i([[et,"s"]]));if(rt.get(et)!="s"||rt.size!=1||rt.get({x:4})||rt.set({x:4},"t")!=rt||rt.size!=2)return!1;var ut=rt.entries(),ft=ut.next();return ft.done||ft.value[0]!=et||ft.value[1]!="s"?!1:(ft=ut.next(),!(ft.done||ft.value[0].x!=4||ft.value[1]!="t"||!ut.next().done))}catch(_t){return!1}}())return g;var Re=new WeakMap;B.prototype.set=function(et,rt){et=et===0?0:et;var ut=V(this,et);return ut.list||(ut.list=this.h[ut.id]=[]),ut.v?ut.v.value=rt:(ut.v={next:this.g,K:this.g.K,head:this.g,key:et,value:rt},ut.list.push(ut.v),this.g.K.next=ut.v,this.g.K=ut.v,this.size++),this},B.prototype.delete=function(et){return et=V(this,et),et.v&&et.list?(et.list.splice(et.index,1),et.list.length||delete this.h[et.id],et.v.K.next=et.v.next,et.v.next.K=et.v.K,et.v.head=null,this.size--,!0):!1},B.prototype.clear=function(){this.h={},this.g=this.g.K=_(),this.size=0},B.prototype.has=function(et){return!!V(this,et).v},B.prototype.get=function(et){return(et=V(this,et).v)&&et.value},B.prototype.entries=function(){return L(this,function(et){return[et.key,et.value]})},B.prototype.keys=function(){return L(this,function(et){return et.key})},B.prototype.values=function(){return L(this,function(et){return et.value})},B.prototype.forEach=function(et,rt){for(var ut=this.entries(),ft;!(ft=ut.next()).done;)ft=ft.value,et.call(rt,ft[1],ft[0],this)},B.prototype[Symbol.iterator]=B.prototype.entries;var ot=0;return B}),v("Object.values",function(g){return g||function(_){var L=[],V;for(V in _)P(_,V)&&L.push(_[V]);return L}}),v("Array.prototype.keys",function(g){return g||function(){return w(this,function(_){return _})}}),v("Set",function(g){function _(L){if(this.g=new Map,L){L=i(L);for(var V;!(V=L.next()).done;)this.add(V.value)}this.size=this.g.size}return function(){if(!g||typeof g!="function"||!g.prototype.entries||typeof Object.seal!="function")return!1;try{var L=Object.seal({x:4}),V=new g(i([L]));if(!V.has(L)||V.size!=1||V.add(L)!=V||V.size!=1||V.add({x:4})!=V||V.size!=2)return!1;var B=V.entries(),Re=B.next();return Re.done||Re.value[0]!=L||Re.value[1]!=L?!1:(Re=B.next(),Re.done||Re.value[0]==L||Re.value[0].x!=4||Re.value[1]!=Re.value[0]?!1:B.next().done)}catch(ot){return!1}}()?g:(_.prototype.add=function(L){return L=L===0?0:L,this.g.set(L,L),this.size=this.g.size,this},_.prototype.delete=function(L){return L=this.g.delete(L),this.size=this.g.size,L},_.prototype.clear=function(){this.g.clear(),this.size=0},_.prototype.has=function(L){return this.g.has(L)},_.prototype.entries=function(){return this.g.entries()},_.prototype.values=function(){return this.g.values()},_.prototype.keys=_.prototype.values,_.prototype[Symbol.iterator]=_.prototype.values,_.prototype.forEach=function(L,V){var B=this;this.g.forEach(function(Re){return L.call(V,Re,Re,B)})},_)}),v("Object.is",function(g){return g||function(_,L){return _===L?_!==0||1/_===1/L:_!==_&&L!==L}}),v("Array.prototype.includes",function(g){return g||function(_,L){var V=this;V instanceof String&&(V=String(V));var B=V.length;for(L=L||0,0>L&&(L=Math.max(L+B,0));L<B;L++){var Re=V[L];if(Re===_||Object.is(Re,_))return!0}return!1}}),v("String.prototype.includes",function(g){return g||function(_,L){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(_ instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(_,L||0)!==-1}}),v("Array.prototype.values",function(g){return g||function(){return w(this,function(_,L){return L})}});var Ur={ma:"loaded",sa:"start",ja:"firstQuartile",na:"midpoint",ta:"thirdQuartile",ha:"complete",oa:"pause",qa:"resume",ga:"bufferStart",fa:"bufferFinish",ra:"skipped",ua:"volumeChange",pa:"playerStateChange",ea:"adUserInteraction"},pu={ka:"full",ia:"domain",la:"limited"};W.prototype.T=function(g){if(g==null)return!1;g=z(g);var _=g.y,L=g.width,V=g.height;return this.x===g.x&&this.y===_&&this.width===L&&this.height===V},it.prototype.T=function(g){return g==null?!1:JSON.stringify(Qe(this))===JSON.stringify(Qe(g))};var Da=null,Lr=function(){if(typeof s!="undefined"&&s)return s;if(typeof global!="undefined"&&global)return global;if(typeof window!="undefined"&&window)return window;if(typeof globalThis!="undefined"&&globalThis)return globalThis;var g=Function("return this")();if(g)return g;throw Error("Could not determine global object context.")}();Pa.Object.defineProperties(Vt.prototype,{event:{configurable:!0,enumerable:!0,get:function(){return this.g}},origin:{configurable:!0,enumerable:!0,get:function(){return this.h}}}),It.prototype.h=function(g){var _=S.apply(1,arguments);try{g.apply(null,u(_))}catch(L){dt(L)}},Wt.prototype.B=function(){this.o&&(this.j.document.removeEventListener("visibilitychange",this.o),this.o=void 0)},Wt.prototype.s=function(){var g=this;this.o||(this.o=function(){g.i.A=g.j.document.hidden?"backgrounded":"foregrounded",Vr(g)},this.j.document.addEventListener("visibilitychange",this.o),this.o())},m(Or,Wt),Or.prototype.B=function(){this.m!==void 0&&(fo(this.Z,this.m),this.m=void 0),Wt.prototype.B.call(this)},Or.prototype.s=function(){var g=this;Wt.prototype.s.call(this),this.h==null?this.m=void 0:this.m===void 0&&(this.m=ho(this.Z,function(){return _o(g)},200),_o(this))},Or.prototype.S=function(){if(this.l){var g=bo(this);if(g){this.g.P=!1,g.P=!0;for(var _=!1,L=0;L<this.g.N.length;L++)if(this.g.N[L].P){this.g.N[L]=g,_=!0;break}_||this.g.N.push(g)}else this.g.P=!0;_=this.u,L=this.i.A;var V=this.i.G,B=this.R();g=new it;var Re=new W(this.l,!1);if(We(g,Re),Se(_,Re,g,V),B)if(Re.$&&(ht(g,"backgrounded"),ht(g,"noOutputDevice")),L==="backgrounded")ht(g,"backgrounded");else if(g.g!==void 0){for(_=0;_<g.o.length;_++)ct(g,g.o[_])&&g.B.push(g.o[_]);for(_=0;_<g.s.length;_++){if(L=ct(g,g.s[_])){e:{for(L=g.s[_],V=0;V<g.j.length;V++)if(g.j[V].T(L)){L=!0;break e}L=!1}L=!L}L&&(ht(g,"obstructed"),g.j.push(g.s[_]))}pt(g)}else ht(g,"notFound");else g.l=["unmeasurable"],g.m=void 0,g.u=0,g.j=[],g.g&&(_=g.g,L={},_=new W((L.x=0,L.y=0,L.width=_.width,L.height=_.height,L),_.g),g.g=_),g.h=Ye();this.M=g}},Or.prototype.R=function(){return ko(this)},m(Rr,Wt),Rr.prototype.B=function(){this.m&&this.m.disconnect(),jo(this),Wt.prototype.B.call(this)},Rr.prototype.s=function(){Wt.prototype.s.call(this),this.h&&(this.m||(this.m=eu(this)),es(this),ts(this.h)&&tu(this),this.i.A==="backgrounded")&&(this.L=this.g=this.l=Zr(new Tt(0,0)),Vr(this))},Rr.prototype.S=function(){if(this.g&&this.L){var g=bo(this);if(g){var _=g,L=this.L,V=Math.max(g.x,L.x),B=Math.max(g.y,L.y),Re=Math.min(g.I,L.I);g=Math.min(g.J,L.J),Re<=V||g<=B?V=null:(L={},V=new W((L.x=V,L.y=B,L.width=Math.abs(Re-V),L.height=Math.abs(g-B),L),!1)),V||(V=new W({x:0,y:0,width:0,height:0},!1))}else _=this.g,V=this.L;B=new it,this.l&&We(B,this.l),(Re=this.i.A=="backgrounded")&&ht(B,"backgrounded"),B.g=_,B.h=V,pt(B),this.X?!Re&&_e(B.g)?ht(B,"hidden"):Re||B.u===100||ht(B,"clipped"):ht(B,"viewport"),this.M=B}},Rr.prototype.R=function(){return!0};var Dt=is.prototype;Dt.setSlotElement=function(g){g&&g.tagName?(this.g.j=g,this.h&&Qr(this.h)):vt("setSlotElement called with a non-HTMLElement.  It will be ignored.")},Dt.setElementBounds=function(g){this.g.m=g,this.h&&Qr(this.h),this.h&&Vr(this.h)},Dt.error=function(g,_){At(this.i,g,_)},Dt.injectVerificationScriptResources=function(g){var _=this.l;if(_.h.push.apply(_.h,u(g)),this.j)try{rs(this.l)}catch(L){vt(L.message)}},Dt.setCreativeType=function(g,_){_=_===void 0?null:_,(!this.g.g||this.g.h)&&(this.g.h=g,g=="video"||g=="audio"?this.g.g="video":g=="htmlDisplay"||g=="nativeDisplay"?this.g.g="display":g=="definedByJavaScript"&&_&&(this.g.g=_=="none"?"display":"video"))},Dt.setImpressionType=function(g){(!this.g.g||this.g.h)&&(this.g.C=g)},Dt.setClientInfo=function(g,_,L){var V=this.g.i||{};return V.omidJsInfo=Object.assign({},V.omidJsInfo,{sessionClientVersion:g,partnerName:_,partnerVersion:L}),this.g.i=V,this.g.i.omidJsInfo.serviceVersion},m(Pr,ss),Pr.prototype.h=function(g,_){if(_=_===void 0?this.i:_,!_)throw Error("Message destination must be defined at construction time or when sending the message.");_.handleExportedMessage(os(g),this)},Pr.prototype.j=function(g,_){as(g)&&this.g&&this.g(new _r(g.omid_message_guid,g.omid_message_method,g.omid_message_version,g.omid_message_args),_)},ba.prototype.g=function(g){var _=S.apply(1,arguments);e:switch(g){case"registerSessionObserver":var L=_.slice(1);break e;default:L=_}return this.h("SessionService."+g,this.j.bind(this,g,_),L)},ba.prototype.j=function(g,_,L){switch(g){case"registerSessionObserver":g=i(_).next().value,g(L)}},m(Sn,ss),Sn.prototype.h=function(g,_){if(_=_===void 0?this.i:_,!_)throw Error("Message destination must be defined at construction time or when sending the message.");_.postMessage(os(g),"*")},Dt=us.prototype,Dt.registerSessionObserver=function(g,_){va(jt(this.g,g),_)},Dt.setSlotElement=function(g,_){jt(this.g,g).setSlotElement(_)},Dt.setElementBounds=function(g,_){jt(this.g,g).setElementBounds(_)},Dt.error=function(g,_,L){jt(this.g,g).error(_,L)},Dt.injectVerificationScriptResources=function(g,_){jt(this.g,g).injectVerificationScriptResources(_)},Dt.setCreativeType=function(g,_,L){L=L===void 0?null:L,jt(this.g,g).setCreativeType(_,L)},Dt.setImpressionType=function(g,_){jt(this.g,g).setImpressionType(_)},Dt.setClientInfo=function(g,_,L,V){var B=this.g;if(g==null)g=B.g;else{var Re=[].concat(u(B.h.values())).includes(B.g)?ga(B):B.g;B.h.set(g,Re),g=Re}return g.setClientInfo(_,L,V)};var Is=new function(){};_a.prototype.m=function(g,_){_i(g.method)!=null&&hs(this,Is)&&fs(this,g,_,this.l)},_a.prototype.o=function(g,_){_i(g.method)!=null&&hs(this,_)&&fs(this,g,_,this.h)};var Os=new function(){this.g=s},ks=new function(){this.i=Os,this.h=new Map,this.g=ga(this)},vu=new us;new function(){var g=this,_=_===void 0?Lr:_;this.j=ks,this.g=Os,this.m={},this.l={},this.i=new Pr,_.omid=_.omid||{},_.omid.v1_VerificationServiceCommunication=this.i,this.h=null,_&&_.addEventListener&&_.postMessage&&(this.h=new Sn(_)),this.i.g=function(L,V){gs(g,L,V,g.i)},this.h&&(this.h.g=function(L,V){g.h&&gs(g,L,V,g.h)})},new _a,function(g,_){g.frames&&g.document&&!["omid_v1_present","omid_v1_present_web","omid_v1_present_app"].some(function(L){return!!g.frames[L]})&&(g.document.body==null&&"MutationObserver"in g?du(g,_):(_=As(_),g.document.body?(_n(g,"omid_v1_present"),_n(g,_)):(Es(g,"omid_v1_present"),Es(g,_))))}(Lr,"web")}).call(o,o)}var qb=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},T=Le(typeof globalThis=="object"&&globalThis)||Le(typeof window=="object"&&window)||Le(typeof self=="object"&&self)||Le(typeof qb=="object"&&qb)||Function("return this")(),ta=!ia(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),bk={}.propertyIsEnumerable,ck=Object.getOwnPropertyDescriptor,Vd=ck&&!bk.call({1:2},1)?function(o){return o=ck(this,o),!!o&&o.enumerable}:bk,Fn={}.toString,po="".split,Ed=ia(function(){return!Object("z").propertyIsEnumerable(0)})?function(o){return xb(o)=="String"?po.call(o,""):Object(o)}:Object,En={}.hasOwnProperty,id=T.document,Fe=qa(id)&&qa(id.createElement),dk=!ta&&!ia(function(){return Object.defineProperty(Fe?id.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),ek=Object.getOwnPropertyDescriptor,Vb=ta?ek:function(o,s){if(o=lb(o),s=Qb(s,!0),dk)try{return ek(o,s)}catch(p){}if(ha(o,s))return Tb(!Vd.call(o,s),o[s])},fk=Object.defineProperty,Va={f:ta?fk:function(o,s,p){if(Ia(o),s=Qb(s,!0),Ia(p),dk)try{return fk(o,s,p)}catch(i){}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(o[s]=p.value),o}},Ua=ta?function(o,s,p){return Va.f(o,s,Tb(1,p))}:function(o,s,p){return o[s]=p,o},Wd=T["__core-js_shared__"]||ng("__core-js_shared__",{}),qo=Function.toString;typeof Wd.inspectSource!="function"&&(Wd.inspectSource=function(o){return qo.call(o)});var Cg=Wd.inspectSource,gk=T.WeakMap,hk=typeof gk=="function"&&/native code/.test(Cg(gk)),Pc=uc(function(o){(o.exports=function(s,p){return Wd[s]||(Wd[s]=p!==void 0?p:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),Cn=0,Dn=Math.random(),ej=Pc("keys"),hd={},ro=T.WeakMap;if(hk)var rd=new ro,so=rd.get,to=rd.has,uo=rd.set,Dg=function(o,s){return uo.call(rd,o,s),s},$e=function(o){return so.call(rd,o)||{}},Eg=function(o){return to.call(rd,o)};else{var Xd=Ke("state");hd[Xd]=!0,Dg=function(o,s){return Ua(o,Xd,s),s},$e=function(o){return ha(o,Xd)?o[Xd]:{}},Eg=function(o){return ha(o,Xd)}}var Ma={set:Dg,get:$e,has:Eg,enforce:function(o){return Eg(o)?$e(o):Dg(o,{})},getterFor:function(o){return function(s){var p;if(!qa(s)||(p=$e(s)).type!==o)throw TypeError("Incompatible receiver, "+o+" required");return p}}},Ta=uc(function(o){var s=Ma.get,p=Ma.enforce,i=String(String).split("String");(o.exports=function(u,v,m,S){var P=S?!!S.unsafe:!1,x=S?!!S.enumerable:!1;S=S?!!S.noTargetGet:!1,typeof m=="function"&&(typeof v!="string"||ha(m,"name")||Ua(m,"name",v),p(m).source=i.join(typeof v=="string"?v:"")),u===T?x?u[v]=m:ng(v,m):(P?!S&&u[v]&&(x=!0):delete u[v],x?u[v]=m:Ua(u,v,m))})(Function.prototype,"toString",function(){return typeof this=="function"&&s(this).source||Cg(this)})}),Bn=Math.ceil,An=Math.floor,zn=Math.min,xn=Math.max,yn=Math.min,ik=cj(!0),og=cj(!1),Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),vo=Ge.concat("length","prototype"),Qc={f:Object.getOwnPropertyNames||function(o){return bj(o,vo)}},Yd={f:Object.getOwnPropertySymbols},wn=Ub("Reflect","ownKeys")||function(o){var s=Qc.f(Ia(o)),p=Yd.f;return p?s.concat(p(o)):s},wo=/#|\.prototype\./,tn=Rb.normalize=function(o){return String(o).replace(wo,".").toLowerCase()},sn=Rb.data={},vn=Rb.NATIVE="N",un=Rb.POLYFILL="P",rn=Vb,fc=Object.keys||function(o){return bj(o,Ge)},qn=Vd,xo=$i(!0),yo=$i(!1);Y({target:"Object",stat:!0},{entries:function(o){return xo(o)}});var af=ia(function(){var o=/a/y;return o.lastIndex=2,o.exec("abcd")!=null}),zo=ia(function(){var o=RegExp("^r","gy");return o.lastIndex=2,o.exec("str")!=null}),bf=RegExp.prototype.exec,Ao=String.prototype.replace,jk=bf,Fg=function(){var o=/a/,s=/b*/g;return bf.call(o,"a"),bf.call(s,"a"),o.lastIndex!==0||s.lastIndex!==0}(),kk=af||zo,Gg=/()??/.exec("")[1]!==void 0;(Fg||Gg||kk)&&(jk=function(o){var s,p=kk&&this.sticky,i=mg.call(this),u=this.source,v=0,m=o;if(p){i=i.replace("y",""),i.indexOf("g")===-1&&(i+="g"),m=String(o).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&o[this.lastIndex-1]!==`
`)&&(u="(?: "+u+")",m=" "+m,v++);var S=new RegExp("^(?:"+u+")",i)}if(Gg&&(S=new RegExp("^"+u+"$(?!\\s)",i)),Fg)var P=this.lastIndex;var x=bf.call(p?S:this,m);return p?x?(x.input=x.input.slice(v),x[0]=x[0].slice(v),x.index=this.lastIndex,this.lastIndex+=x[0].length):this.lastIndex=0:Fg&&x&&(this.lastIndex=this.global?x.index+x[0].length:P),Gg&&x&&1<x.length&&Ao.call(x[0],S,function(){for(s=1;s<arguments.length-2;s++)arguments[s]===void 0&&(x[s]=void 0)}),x});var Nd=jk;Y({target:"RegExp",proto:!0,forced:/./.exec!==Nd},{exec:Nd});var hc=!!Object.getOwnPropertySymbols&&!ia(function(){return!String(Symbol())}),lk=hc&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Je=Pc("wks"),Od=T.Symbol,pn=lk?Od:Od&&Od.withoutSetter||ld,mn=Ca("species"),nn=!ia(function(){var o=/./;return o.exec=function(){var s=[];return s.groups={a:"7"},s},"".replace(o,"$<a>")!=="7"}),Yi="a".replace(/./,"$0")==="$0",mk=Ca("replace"),Zi=/./[mk]?/./[mk]("a","$0")==="":!1,on=!ia(function(){var o=/(?:)/,s=o.exec;return o.exec=function(){return s.apply(this,arguments)},o="ab".split(o),o.length!==2||o[0]!=="a"||o[1]!=="b"}),om=Xi(!1),Wi=Xi(!0);lg("match",1,function(o,s,p){return[function(i){var u=Bb(this),v=i==null?void 0:i[o];return v!==void 0?v.call(i,u):new RegExp(i)[o](String(u))},function(i){var u=p(s,i,this);if(u.done)return u.value;if(i=Ia(i),u=String(this),!i.global)return Md(i,u);var v=i.unicode;i.lastIndex=0;for(var m=[],S=0,P;(P=Md(i,u))!==null;)P=String(P[0]),m[S]=P,P===""&&(i.lastIndex=kg(u,Ra(i.lastIndex),v)),S++;return S===0?null:m}]}),Y({target:"Object",stat:!0,forced:!ta,sham:!ta},{defineProperty:Va.f}),Object.entries||(Object.entries=function(o){var s=[];for(k in o)typeof k=="string"&&o.propertyIsEnumerable(k)&&s.push([k,o[k]]);return s}),function(){function o(p,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var u=document.createEvent("CustomEvent");return u.initCustomEvent(p,i.bubbles,i.cancelable,i.detail),u}var s=navigator.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];/trident|msie/i.test(s[1])&&(o.prototype=window.Event.prototype,window.CustomEvent=o,window.Event=o)}(),function(o){o&&o.prototype&&o.prototype.firstElementChild===void 0&&Object.defineProperty(o.prototype,"firstElementChild",{get:function(){for(var s,p=this.childNodes,i=0;s=p[i++];)if(s.nodeType===1)return s;return null}})}(window.Node||window.Element),Y({target:"Object",stat:!0},{values:function(o){return yo(o)}});var Db={ON_AD_PLAYLIST_LOADED:"AdPlaylistLoaded",ON_AD_PLAYLIST_LOAD_ERROR:"AdPlaylistLoadError",ON_AD_PLAYLIST_START:"AdPlaylistStart",ON_AD_PLAYLIST_STARTED:"AdPlaylistStarted",ON_AD_PLAYLIST_STOPPED:"AdPlaylistStopped",ON_AD_PLAYLIST_COMPLETE:"AdPlaylistComplete"},nk=[].slice,Hg={},ok=Function.bind||function(o){function s(){var u=i.concat(nk.call(arguments));if(this instanceof s){var v=u.length;if(!(v in Hg)){for(var m=[],S=0;S<v;S++)m[S]="a["+S+"]";Hg[v]=Function("C,a","return new C("+m.join(",")+")")}u=Hg[v](p,u)}else u=p.apply(o,u);return u}var p=Ab(this),i=nk.call(arguments,1);return qa(p.prototype)&&(s.prototype=p.prototype),s};Y({target:"Function",proto:!0},{bind:ok});var Rc=!1,jb=function(){function o(){la(this,o)}return ma(o,[{key:"setDebugEnabled",value:function(s){Rc=s}},{key:"getDebugEnabled",value:function(){return Rc}},{key:"debug",get:function(){var s=!1;return typeof localStorage!="undefined"&&(s=localStorage.getItem("debug")==="true"),{info:(s||Rc&&console.info?console.info:Qd).bind(console,"[OIS_DEBUG]"),warn:(s||Rc&&console.warn?console.warn:Qd).bind(console,"[OIS_DEBUG]"),error:(s||Rc&&console.error?console.error:Qd).bind(console,"[OIS_DEBUG]"),critical:(s||Rc&&console.error?console.error:Qd).bind(console,"[OIS_DEBUG]"),table:(s||Rc&&console.table?console.table:Qd).bind(console)}}}]),o}(),Bo=function(){function o(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};la(this,o),this.player=s,this.currentContentSource={},this.PLAYER_EVENT_MAP={ended:"ended",error:"error",playerPause:"pause",playerPlay:"playing",playerResize:"resize",loadeddata:"loadeddata",timeupdate:"timeupdate",volumeChanged:"volumechange"}}return ma(o,[{key:"handshakeVersion",value:function(){return"3.2"}},{key:"load",value:function(){}},{key:"addEventListener",value:function(){}},{key:"removeEventListener",value:function(){}},{key:"lockContent",value:function(){}},{key:"releaseContent",value:function(){}},{key:"getCurrentContentSource",value:function(){}},{key:"getCurrentTime",value:function(){}},{key:"getDuration",value:function(){}},{key:"getEnvironmentVars",value:function(){}},{key:"getError",value:function(){}},{key:"getPlayerSize",value:function(){}},{key:"getViewportSize",value:function(){}},{key:"getVideoElement",value:function(){}},{key:"getPlayerElement",value:function(){}},{key:"setVolume",value:function(){}},{key:"getVolume",value:function(){}},{key:"isMuted",value:function(){}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"isPaused",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}},{key:"seek",value:function(){}}]),o}(),Co=Ca("toStringTag"),pk={};pk[Co]="z";var Ig=String(pk)==="[object z]",Do=Ca("toStringTag"),Eo=xb(function(){return arguments}())=="Arguments",cd=Ig?xb:function(o){var s;if(o===void 0)var p="Undefined";else{if(o===null)var i="Null";else{e:{var u=o=Object(o);try{i=u[Do];break e}catch(v){}i=void 0}i=typeof(p=i)=="string"?p:Eo?xb(o):(s=xb(o))=="Object"&&typeof o.callee=="function"?"Arguments":s}p=i}return p},Fo=Ig?{}.toString:function(){return"[object "+cd(this)+"]"};Ig||Ta(Object.prototype,"toString",Fo,{unsafe:!0});var cf=T.Promise,ln=Va.f,Vi=Ca("toStringTag"),Ui=Ca("species"),gd={},kn=Ca("iterator"),jn=Array.prototype,hn=Ca("iterator"),Fd=uc(function(o){function s(p,i){this.stopped=p,this.result=i}(o.exports=function(p,i,u,v,m){i=Fc(i,u,v?2:1);var S,P;if(!m){if(m=Cd(p),typeof m!="function")throw TypeError("Target is not iterable");if(If(m)){for(u=0,S=Ra(p.length);S>u;u++)if((m=v?i(Ia(P=p[u])[0],P[1]):i(p[u]))&&m instanceof s)return m;return new s(!1)}p=m.call(p)}for(u=p.next;!(P=u.call(p)).done;)if(m=fi(p,i,P.value,v),typeof m=="object"&&m&&m instanceof s)return m;return new s(!1)}).stop=function(p){return new s(!0,p)}}),Ti=Ca("iterator"),Si=!1;try{var Go=0,qk={next:function(){return{done:!!Go++}},return:function(){Si=!0}};qk[Ti]=function(){return this},Array.from(qk,function(){throw 2})}catch(o){}var gn=Ca("species"),$f=Ub("document","documentElement"),Zd=Ub("navigator","userAgent")||"",rk=/(iphone|ipod|ipad).*applewebkit/i.test(Zd),Qi=T.location,Jg=T.setImmediate,sk=T.clearImmediate,tk=T.process,uk=T.MessageChannel,Kg=T.Dispatch,Lg=0,Ld={};if(!Jg||!sk)if(Jg=function(o){for(var s=[],p=1;arguments.length>p;)s.push(arguments[p++]);return Ld[++Lg]=function(){(typeof o=="function"?o:Function(o)).apply(void 0,s)},$d(Lg),Lg},sk=function(o){delete Ld[o]},xb(tk)=="process")var $d=function(o){tk.nextTick(jg(o))};else if(Kg&&Kg.now)$d=function(o){Kg.now(jg(o))};else if(uk&&!rk){var vk=new uk,wk=vk.port2;vk.port1.onmessage=Ri,$d=Fc(wk.postMessage,wk,1)}else!T.addEventListener||typeof postMessage!="function"||T.importScripts||ia(Pi)?$d="onreadystatechange"in(Fe?id.createElement("script"):{})?function(o){$f.appendChild(Fe?id.createElement("script"):{}).onreadystatechange=function(){$f.removeChild(this),ig(o)}}:function(o){setTimeout(jg(o),0)}:($d=Pi,T.addEventListener("message",Ri,!1));var eg=Jg,Ho=Vb,xk=T.MutationObserver||T.WebKitMutationObserver,Mg=T.process,Ng=T.Promise,yk=xb(Mg)=="process",zk=Ho(T,"queueMicrotask"),Ak=zk&&zk.value,Sc,ae;if(!Ak){var df=function(){var o;for(yk&&(o=Mg.domain)&&o.exit();Sc;){var s=Sc.fn;Sc=Sc.next;try{s()}catch(p){throw Sc?be():ae=void 0,p}}ae=void 0,o&&o.enter()};if(yk)var be=function(){Mg.nextTick(df)};else if(xk&&!rk){var Bk=!0,Ck=document.createTextNode("");new xk(df).observe(Ck,{characterData:!0}),be=function(){Ck.data=Bk=!Bk}}else if(Ng&&Ng.resolve){var Dk=Ng.resolve(void 0),Io=Dk.then;be=function(){Io.call(Dk,df)}}else be=function(){eg.call(T,df)}}var Mi=Ak||function(o){o={fn:o,next:void 0},ae&&(ae.next=o),Sc||(Sc=o,be()),ae=o},hg={f:function(o){return new fn(o)}},Ek=T.process,Fk=Ek&&Ek.versions,Gk=Fk&&Fk.v8;if(Gk)var Tc=Gk.split("."),Og=Tc[0]+Tc[1];else Zd&&(Tc=Zd.match(/Edge\/(\d+)/),(!Tc||74<=Tc[1])&&(Tc=Zd.match(/Chrome\/(\d+)/))&&(Og=Tc[1]));var Ce=Og&&+Og,Jo=Ca("species"),Hk=Ma.get,Ko=Ma.set,Lo=Ma.getterFor("Promise"),rb=cf,Ki=T.TypeError,gg=T.document,He=T.process,Ik=Ub("fetch"),sd=hg.f,Mo=sd,Kd=xb(He)=="process",dn=!!(gg&&gg.createEvent&&T.dispatchEvent),ce=Rb("Promise",function(){function o(p){p(function(){},function(){})}if(Cg(rb)===String(rb)&&(Ce===66||!Kd&&typeof PromiseRejectionEvent!="function"))return!0;if(51<=Ce&&/native code/.test(rb))return!1;var s=rb.resolve(1);return(s.constructor={})[Jo]=o,!(s.then(function(){})instanceof o)}),No=ce||!ye(function(o){rb.all(o).catch(function(){})});if(ce){rb=function(o){zb(this,rb,"Promise"),Ab(o),Pg.call(this);var s=Hk(this);try{o(jd(cg,this,s),jd(kd,this,s))}catch(p){kd(this,s,p)}};var Pg=function(){Ko(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};Pg.prototype=gc(rb.prototype,{then:function(o,s){var p=Lo(this),i=sd(Kc(this,rb));return i.ok=typeof o=="function"?o:!0,i.fail=typeof s=="function"&&s,i.domain=Kd?He.domain:void 0,p.parent=!0,p.reactions.push(i),p.state!=0&&dg(this,p,!1),i.promise},catch:function(o){return this.then(void 0,o)}});var Oo=function(){var o=new Pg,s=Hk(o);this.promise=o,this.resolve=jd(cg,o,s),this.reject=jd(kd,o,s)};if(hg.f=sd=function(o){return o===rb||o===Po?new Oo(o):Mo(o)},typeof cf=="function"){var Qo=cf.prototype.then;Ta(cf.prototype,"then",function(o,s){var p=this;return new rb(function(i,u){Qo.call(p,i,u)}).then(o,s)},{unsafe:!0}),typeof Ik=="function"&&Y({global:!0,enumerable:!0,forced:!0},{fetch:function(o){return Oi(rb,Ik.apply(T,arguments))}})}}Y({global:!0,wrap:!0,forced:ce},{Promise:rb}),dc(rb,"Promise",!1),Ie("Promise");var Po=Ub("Promise");Y({target:"Promise",stat:!0,forced:ce},{reject:function(o){var s=sd(this);return s.reject.call(void 0,o),s.promise}}),Y({target:"Promise",stat:!0,forced:ce},{resolve:function(o){return Oi(this,o)}}),Y({target:"Promise",stat:!0,forced:No},{all:function(o){var s=this,p=sd(s),i=p.resolve,u=p.reject,v=fg(function(){var m=Ab(s.resolve),S=[],P=0,x=1;Fd(o,function(w){var W=P++,Te=!1;S.push(void 0),x++,m.call(s,w).then(function(z){Te||(Te=!0,S[W]=z,--x||i(S))},u)}),--x||i(S)});return v.error&&u(v.value),p.promise},race:function(o){var s=this,p=sd(s),i=p.reject,u=fg(function(){var v=Ab(s.resolve);Fd(o,function(m){v.call(s,m).then(p.resolve,i)})});return u.error&&i(u.value),p.promise}}),Y({target:"Date",stat:!0},{now:function(){return new Date().getTime()}});var Qg=Date.prototype,Ro=Qg.toString,So=Qg.getTime;new Date(NaN)+""!="Invalid Date"&&Ta(Qg,"toString",function(){var o=So.call(this);return o===o?Ro.call(this):"Invalid Date"});var $m=RegExp(`^[	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF][	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*`),an=RegExp(`[	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF][	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$`);bg(1),bg(2);var xe=bg(3),ef=T.parseInt,To=/^[+-]?0[Xx]/,Jk=ef(`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF08`)!==8||ef(`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF0x16`)!==22?function(o,s){var p=xe(String(o));return ef(p,s>>>0||(To.test(p)?16:10))}:ef;Y({global:!0,forced:parseInt!=Jk},{parseInt:Jk});var tc=Array.isArray||function(o){return xb(o)=="Array"},Rg=ta?Object.defineProperties:function(o,s){Ia(o);for(var p=fc(s),i=p.length,u=0,v;i>u;)Va.f(o,v=p[u++],s[v]);return o},Kk=Ke("IE_PROTO"),Zf;hd[Kk]=!0;var wb=Object.create||function(o,s){if(o!==null){ag.prototype=Ia(o);var p=new ag;ag.prototype=null,p[Kk]=o}else p=Ee();return s===void 0?p:Rg(p,s)},Ji=Qc.f,Zm={}.toString,Ii=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Hi={f:Ca},Ym=Va.f,Xm=Ca("species"),Wm=[].push,Ic=Jc(0),Lk=Jc(1),Mk=Jc(2),Nk=Jc(3),Uo=Jc(4),Mf=Jc(5),Ok=Jc(6),mb=Ke("hidden"),Pk=Ca("toPrimitive"),Vm=Ma.set,Qk=Ma.getterFor("Symbol"),Cb=Object.prototype,nb=T.Symbol,de=Ub("JSON","stringify"),Ei=Vb,sc=Va.f,Bi=Yf,Um=Vd,ec=Pc("symbols"),Jd=Pc("op-symbols"),Sg=Pc("string-to-symbol-registry"),Tg=Pc("symbol-to-string-registry"),Vo=Pc("wks"),Ug=T.QObject,Vg=!Ug||!Ug.prototype||!Ug.prototype.findChild,Vf=ta&&ia(function(){return wb(sc({},"a",{get:function(){return sc(this,"a",{value:7}).a}})).a!=7})?function(o,s,p){var i=Ei(Cb,s);i&&delete Cb[s],sc(o,s,p),i&&o!==Cb&&sc(Cb,s,i)}:sc,Wg=lk?function(o){return typeof o=="symbol"}:function(o){return Object(o)instanceof nb};if(hc||(nb=function(){function o(i){this===Cb&&o.call(Jd,i),ha(this,mb)&&ha(this[mb],p)&&(this[mb][p]=!1),Vf(this,p,Tb(1,i))}if(this instanceof nb)throw TypeError("Symbol is not a constructor");var s=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,p=ld(s);return ta&&Vg&&Vf(Cb,p,{configurable:!0,set:o}),Wf(p,s)},Ta(nb.prototype,"toString",function(){return Qk(this).tag}),Ta(nb,"withoutSetter",function(o){return Wf(ld(o),o)}),Vd=Uf,Va.f=De,Vb=Di,Qc.f=Yf=Ci,Yd.f=Tf,Hi.f=function(o){return Wf(Ca(o),o)},ta&&(sc(nb.prototype,"description",{configurable:!0,get:function(){return Qk(this).description}}),Ta(Cb,"propertyIsEnumerable",Uf,{unsafe:!0}))),Y({global:!0,wrap:!0,forced:!hc,sham:!hc},{Symbol:nb}),Ic(fc(Vo),function(o){Gi(o)}),Y({target:"Symbol",stat:!0,forced:!hc},{for:function(o){if(o=String(o),ha(Sg,o))return Sg[o];var s=nb(o);return Sg[o]=s,Tg[s]=o,s},keyFor:function(o){if(!Wg(o))throw TypeError(o+" is not a symbol");if(ha(Tg,o))return Tg[o]},useSetter:function(){Vg=!0},useSimple:function(){Vg=!1}}),Y({target:"Object",stat:!0,forced:!hc,sham:!ta},{create:function(o,s){return s===void 0?wb(o):Fi(wb(o),s)},defineProperty:De,defineProperties:Fi,getOwnPropertyDescriptor:Di}),Y({target:"Object",stat:!0,forced:!hc},{getOwnPropertyNames:Ci,getOwnPropertySymbols:Tf}),Y({target:"Object",stat:!0,forced:ia(function(){Yd.f(1)})},{getOwnPropertySymbols:function(o){return Yd.f(ab(o))}}),de){var Wo=!hc||ia(function(){var o=nb();return de([o])!="[null]"||de({a:o})!="{}"||de(Object(o))!="{}"});Y({target:"JSON",stat:!0,forced:Wo},{stringify:function(o,s,p){for(var i=[o],u=1,v;arguments.length>u;)i.push(arguments[u++]);if(v=s,(qa(s)||o!==void 0)&&!Wg(o))return tc(s)||(s=function(m,S){if(typeof v=="function"&&(S=v.call(this,m,S)),!Wg(S))return S}),i[1]=s,de.apply(null,i)}})}nb.prototype[Pk]||Ua(nb.prototype,Pk,nb.prototype.valueOf),dc(nb,"Symbol"),hd[mb]=!0;var Xo=Va.f,kc=T.Symbol;if(ta&&typeof kc=="function"&&!("description"in kc.prototype&&kc().description===void 0)){var Rk={},ee=function(){var o=1>arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),s=this instanceof ee?new kc(o):o===void 0?kc():kc(o);return o===""&&(Rk[s]=!0),s};aj(ee,kc);var Xg=ee.prototype=kc.prototype;Xg.constructor=ee;var Yo=Xg.toString,Zo=String(kc("test"))=="Symbol(test)",$o=/^Symbol\((.*)\)[^)]+$/;Xo(Xg,"description",{configurable:!0,get:function(){var o=qa(this)?this.valueOf():this,s=Yo.call(o);return ha(Rk,o)?"":(o=Zo?s.slice(7,-1):s.replace($o,"$1"),o===""?void 0:o)}}),Y({global:!0,forced:!0},{Symbol:ee})}var Tm=Object.defineProperty,Sf={},ap=Hc("forEach"),bp=Fb("forEach"),fe=ap&&bp?[].forEach:function(o){return Ic(this,o,1<arguments.length?arguments[1]:void 0)};Y({target:"Array",proto:!0,forced:[].forEach!=fe},{forEach:fe});var Yg={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Sk;for(Sk in Yg){var Tk=T[Sk],ff=Tk&&Tk.prototype;if(ff&&ff.forEach!==fe)try{Ua(ff,"forEach",fe)}catch(o){ff.forEach=fe}}var cp=ia(function(){fc(1)});Y({target:"Object",stat:!0,forced:cp},{keys:function(o){return fc(ab(o))}});var md={VPAID:"application/javascript",SIMID:"text/html",MP4:"video/mp4",WEBM:"video/webm",OGG:"video/ogg",MP3:"audio/mpeg"},Sm=Ca("species"),dp=Id("slice"),ep=Fb("slice",{ACCESSORS:!0,0:0,1:2}),fp=Ca("species"),gp=[].slice,hp=Math.max;Y({target:"Array",proto:!0,forced:!dp||!ep},{slice:function(o,s){var p=lb(this),i=Ra(p.length),u=vb(o,i);i=vb(s===void 0?i:s,i);var v;if(tc(p)){var m=p.constructor;if(typeof m!="function"||m!==Array&&!tc(m.prototype)?qa(m)&&(m=m[fp],m===null&&(m=void 0)):m=void 0,m===Array||m===void 0)return gp.call(p,u,i)}for(m=new(m===void 0?Array:m)(hp(i-u,0)),v=0;u<i;u++,v++)u in p&&bd(m,v,p[u]);return m.length=v,m}});var ip=Id("map"),jp=Fb("map");Y({target:"Array",proto:!0,forced:!ip||!jp},{map:function(o){return Lk(this,o,1<arguments.length?arguments[1]:void 0)}});var Rf=Ca("unscopables"),Qf=Array.prototype;Qf[Rf]==null&&Va.f(Qf,Rf,{configurable:!0,value:wb(null)});var kp=Fb("indexOf",{ACCESSORS:!0,1:0});Y({target:"Array",proto:!0,forced:!kp},{includes:function(o){return ik(this,o,1<arguments.length?arguments[1]:void 0)}}),Hd("includes");var Rm=Ca("match"),Qm=Ca("match");Y({target:"String",proto:!0,forced:!yi("includes")},{includes:function(o){return!!~String(Bb(this)).indexOf(zi(o),1<arguments.length?arguments[1]:void 0)}});var Uk=RegExp.prototype,Vk=Uk.toString,lp=ia(function(){return Vk.call({source:"a",flags:"b"})!="/a/b"}),mp=Vk.name!="toString";(lp||mp)&&Ta(RegExp.prototype,"toString",function(){var o=Ia(this),s=String(o.source),p=o.flags;return o=String(p===void 0&&o instanceof RegExp&&!("flags"in Uk)?mg.call(o):p),"/"+s+"/"+o},{unsafe:!0}),Y({target:"String",proto:!0,forced:function(o){return ia(function(){return!!`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`[o]()||"\u200B\x85\u180E"[o]()!="\u200B\x85\u180E"||`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`[o].name!==o})}("trim")},{trim:function(){return xe(this)}});var np=Id("filter"),op=Fb("filter");Y({target:"Array",proto:!0,forced:!np||!op},{filter:function(o){return Mk(this,o,1<arguments.length?arguments[1]:void 0)}});var pp=[].push,qp=Math.min,td=!ia(function(){return!RegExp(4294967295,"y")});lg("split",2,function(o,s,p){var i="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(u,v){var m=String(Bb(this)),S=v===void 0?4294967295:v>>>0;if(S===0)return[];if(u===void 0)return[m];if(!Pf(u))return s.call(m,u,S);for(var P=[],x=0,w=new RegExp(u.source,(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(u.sticky?"y":"")+"g"),W,Te,z;(W=Nd.call(w,m))&&(Te=w.lastIndex,!(Te>x&&(P.push(m.slice(x,W.index)),1<W.length&&W.index<m.length&&pp.apply(P,W.slice(1)),z=W[0].length,x=Te,P.length>=S)));)w.lastIndex===W.index&&w.lastIndex++;return x===m.length?(z||!w.test(""))&&P.push(""):P.push(m.slice(x)),P.length>S?P.slice(0,S):P}:"0".split(void 0,0).length?function(u,v){return u===void 0&&v===0?[]:s.call(this,u,v)}:s;return[function(u,v){var m=Bb(this),S=u==null?void 0:u[o];return S!==void 0?S.call(u,m,v):i.call(String(m),u,v)},function(u,v){var m=p(i,u,this,v,i!==s);if(m.done)return m.value;var S=Ia(u);m=String(this);var P=Kc(S,RegExp),x=S.unicode;if(S=new P(td?S:"^(?:"+S.source+")",(S.ignoreCase?"i":"")+(S.multiline?"m":"")+(S.unicode?"u":"")+(td?"y":"g")),P=v===void 0?4294967295:v>>>0,P===0)return[];if(m.length===0)return Md(S,m)===null?[m]:[];for(var w=0,W=0,Te=[];W<m.length;){S.lastIndex=td?W:0;var z=Md(S,td?m:m.slice(W)),G;if(z===null||(G=qp(Ra(S.lastIndex+(td?0:W)),m.length))===w)W=kg(m,W,x);else{if(Te.push(m.slice(w,W)),Te.length===P)return Te;for(w=1;w<=z.length-1;w++)if(Te.push(z[w]),Te.length===P)return Te;W=w=G}}return Te.push(m.slice(w)),Te}]},!td);var Wk=[].indexOf,Xk=!!Wk&&0>1/[1].indexOf(1,-0),rp=Hc("indexOf"),sp=Fb("indexOf",{ACCESSORS:!0,1:0});Y({target:"Array",proto:!0,forced:Xk||!rp||!sp},{indexOf:function(o){return Xk?Wk.apply(this,arguments)||0:og(this,o,1<arguments.length?arguments[1]:void 0)}});var Sa={LINEAR:"linear",NON_LINEAR:"nonlinear"},ua=function(){function o(){la(this,o)}return ma(o,null,[{key:"convertTimeStringToSeconds",value:function(s){return s=new Date("1970-01-01T"+s+"Z").getTime(),isNaN(s)?null:s/1e3}},{key:"getNode",value:function(s){return s&&s!==" "&&s.length!==0?s:null}},{key:"getNodeAttribute",value:function(s){return s&&s!==" "?s:!1}},{key:"trim",value:function(s){return s&&s.trim().length!==0&&s!=="null"?s.trim():null}},{key:"getUnique",value:function(s,p){return s.map(function(i){return i[p]}).map(function(i,u,v){return v.indexOf(i)===u&&u}).filter(function(i){return s[i]}).map(function(i){return s[i]})}},{key:"getMostNestedElement",value:function(s,p){var i=-1,u=null;return[].slice.call(s.querySelectorAll(p)).forEach(function(v){for(var m=0,S=v;S.parentNode!==s;)m++,S=S.parentNode;m>i&&(i=m,u=v)}),u}}]),o}(),xc=function(){function o(s){la(this,o),this.adSourceXML=s,this._source=this.adSourceXML.querySelector("AdTagURI, VASTAdData, VASTData, CustomAdData")}return ma(o,[{key:"allowMultipleAds",get:function(){return this.adSourceXML.getAttribute("allowMultipleAds")==="true"}},{key:"followRedirects",get:function(){return this.adSourceXML.getAttribute("followRedirects")==="true"}},{key:"id",get:function(){return this.adSourceXML.getAttribute("id")}},{key:"source",get:function(){return this._source.nodeName===o.TYPE.AD_TAG_URI||this._source.nodeName===o.TYPE.AD_TAG_URI_JEST?ua.trim(this._source.textContent):this._source.firstElementChild.outerHTML}},{key:"templateType",get:function(){return this._source.getAttribute("templateType")}},{key:"type",get:function(){return this._source.nodeName===o.TYPE.AD_TAG_URI||this._source.nodeName===o.TYPE.AD_TAG_URI_JEST?o.TYPE.AD_TAG_URI:this._source.nodeName}}]),o}();xc.TYPE={},xc.TYPE.AD_TAG_URI="vmap:AdTagURI",xc.TYPE.VAST_AD="vmap:VASTAdData",xc.TYPE.VAST_DATA="vmap:VASTData",xc.TYPE.CUSTOM_AD="vmap:CustomAdData",xc.TYPE.AD_TAG_URI_JEST="AdTagURI";var gf=function(){function o(s){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};la(this,o),this._requested=!1,this.adBreakXML=s,this.publisherSpecs=p,this._breakPosition=this._getBreakPosition(),this._extensions=this._getExtensions(),this._separationClips=this._getSeparationClips(),this._trackingEvents=this._getTrackers(),this.error=this._getError()||{code:void 0,description:"",timestamp:null}}return ma(o,[{key:"adSource",get:function(){var s=this.adBreakXML.querySelector(":scope > AdSource");return s?new xc(s):null}},{key:"breakId",get:function(){return this.adBreakXML.getAttribute("breakId")||null}},{key:"breakPosition",get:function(){return this._breakPosition}},{key:"breakType",get:function(){return this.adBreakXML.getAttribute("breakType")||""}},{key:"extensions",get:function(){return this._extensions}},{key:"hasError",get:function(){return!isNaN(this.error.code)}},{key:"prefetchOffset",get:function(){return this.publisherSpecs[o.POSITION[this.breakPosition]]&&this.publisherSpecs[o.POSITION[this.breakPosition]].prefetchOffset?Math.abs(this.publisherSpecs[o.POSITION[this.breakPosition]].prefetchOffset):0}},{key:"repeatAfter",get:function(){var s=this.adBreakXML.getAttribute("repeatAfter");return s?ua.convertTimeStringToSeconds(s):-1}},{key:"requested",get:function(){return this._requested},set:function(s){this._requested=s}},{key:"separationClips",get:function(){return this._separationClips}},{key:"timeOffset",get:function(){return this.adBreakXML.getAttribute("timeOffset")}},{key:"trackingEvents",get:function(){return this._trackingEvents}},{key:"type",get:function(){return 0>this.breakType.split(",").shift().indexOf(Sa.NON_LINEAR)?Sa.LINEAR:Sa.NON_LINEAR}},{key:"_getBreakPosition",value:function(){return this.type===Sa.NON_LINEAR?4:this.timeOffset==="start"||this.timeOffset==="0%"||ua.convertTimeStringToSeconds(this.timeOffset)===0?1:this.timeOffset==="end"||this.timeOffset==="100%"?3:2}},{key:"_getExtensions",value:function(){var s=[];return[].slice.call(this.adBreakXML.querySelectorAll(":scope > Extensions > Extension")).forEach(function(p){s.push({type:p.getAttribute("type"),extensionXML:p})}),s}},{key:"_getTrackers",value:function(){var s={};return[].slice.call(this.adBreakXML.querySelectorAll(":scope > TrackingEvents > Tracking")).forEach(function(p){var i=p.getAttribute("event");p={url:ua.trim(p.textContent)},s[i]=s[i]||[],s[i].push(p)}),s}},{key:"_getSeparationClips",value:function(){return this.publisherSpecs[o.POSITION[this.breakPosition]]||{}}},{key:"_getError",value:function(){var s=this.adBreakXML.querySelector("_error");return s?{code:parseInt(s.getAttribute("code"),10),description:s.getAttribute("description"),timestamp:null}:null}}]),o}();gf.POSITION=["unsupported","preroll","midroll","postroll","overlay"];var tp=function(){function o(s,p){la(this,o),this.adSlotList=[],this.midrollHasSameTimeOffset=!1,this.createAdSlotList(s,p)}return ma(o,[{key:"createAdSlotList",value:function(s,p){var i=this;this.adSlotList=[].slice.call((s.documentElement||s).querySelectorAll(":scope > *")).map(function(z){return new gf(z,p)});var u={},v=[];if(this.adSlotList.forEach(function(z,G){z.breakPosition===2&&z.timeOffset!==null&&(u[z.timeOffset]=(u[z.timeOffset]||0)+1,1<u[z.timeOffset]&&(z.multiMidroll=!0,v.length===0&&(i.adSlotList[G-1].multiMidroll=!0,i.adSlotList[G-1].adBreakXML.setAttribute("type",i.adSlotList[G-1].adSource.type),i.adSlotList[G-1].adBreakXML.setAttributeNS(null,"allowMultipleAds",i.adSlotList[G].adSource.allowMultipleAds),v.push(i.adSlotList[G-1].adBreakXML.cloneNode(!0)),i.midrollHasSameTimeOffset=!0),i.adSlotList[G].multiMidroll=!0,z.adBreakXML.setAttribute("type",i.adSlotList[G].adSource.type),z.adBreakXML.setAttributeNS(null,"allowMultipleAds",i.adSlotList[G].adSource.allowMultipleAds),v.push(z.adBreakXML.cloneNode(!0))))}),this.midrollHasSameTimeOffset){for(var m=[],S=0;S<v.length;S++)if(v[S].getAttribute("type").includes("AdTagURI")){var P=document.createElementNS(null,"Ad");P.setAttribute("sequence",(S+1).toString());var x=document.createElementNS(null,"Wrapper");x.setAttributeNS(null,"fallbackOnNoAd",v[S].getAttribute("allowMultipleAds"));var w=document.createElementNS(null,"VASTAdTagURI");w.textContent=v[S].querySelector("AdTagURI").textContent.trim(),x.appendChild(w),P.appendChild(x),m.push(P)}else v[S].querySelector("Ad").setAttribute("sequence",(S+1).toString()),m.push(v[S].querySelector("Ad"));for(var W=null,Te=0;Te<this.adSlotList.length;Te++)if(this.adSlotList[Te].multiMidroll&&(this.adSlotList[Te].adBreakXML.hasAttribute("type")&&this.adSlotList[Te].adBreakXML.getAttribute("type").includes("AdTagURI")&&(W=document.createElementNS(null,"VASTAdData")),this.adSlotList[Te].adBreakXML.querySelector("Ad")||W)){W?function(){i.adSlotList[Te].adBreakXML.querySelector("AdTagURI").remove();var z=i.adSlotList[Te].adBreakXML.querySelector("AdSource"),G=document.createElementNS(null,"VAST");m.forEach(function(J){G.appendChild(J)}),W.appendChild(G),z.appendChild(W)}():function(){i.adSlotList[Te].adBreakXML.querySelector("Ad").remove();var z=i.adSlotList[Te].adBreakXML.querySelector("VAST");m.forEach(function(G){z.appendChild(G)})}(),this.adSlotList[Te].multiMidroll=!1,this.adSlotList[Te]=new gf(this.adSlotList[Te].adBreakXML,this.adSlotList[Te].vmapSpecs);break}this.adSlotList=this.adSlotList.filter(function(z){if(!z.multiMidroll)return z})}}},{key:"getAdPlaylist",value:function(){return this.adSlotList}},{key:"hasPlayableAdBreaks",get:function(){return!!this.adSlotList.filter(function(s){return!s.hasError&&s.adSource}).shift()}}]),o}(),Yk=!0,up=Fb("find");"find"in[]&&Array(1).find(function(){Yk=!1}),Y({target:"Array",proto:!0,forced:Yk||!up},{find:function(o){return Mf(this,o,1<arguments.length?arguments[1]:void 0)}}),Hd("find");var Zg=T.parseFloat,Zk=1/Zg(`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF-0`)!==-1/0?function(o){o=xe(String(o));var s=Zg(o);return s===0&&o.charAt(0)=="-"?-0:s}:Zg;Y({global:!0,forced:parseFloat!=Zk},{parseFloat:Zk});var A={ON_AD_CLICKED:"AdClickThru",ON_AD_ERROR:"AdError",ON_AD_FINISHED:"AdFinished",ON_AD_STOPPED:"AdStopped",ON_AD_LINEARITY_CHANGE:"AdLinearChange",ON_AD_MANIFEST_LOADED:"AdTagParsed",ON_AD_MANIFEST_LOAD_ERROR:"AdTagLoadFailed",ON_AD_PLAYBACK_FINISHED:"AdVideoComplete",ON_AD_LOADED:"AdLoaded",ON_AD_SKIPPED:"AdSkipped",ON_AD_START:"AdStart",ON_AD_STARTED:"AdStarted",ON_AD_FIRST_QUARTILE:"AdVideoFirstQuartile",ON_AD_IMPRESSION:"AdImpression",ON_AD_CREATIVE_VIEW:"AdCreativeView",ON_AD_MID_POINT:"AdVideoMidpoint",ON_AD_PAUSED:"AdPaused",ON_AD_PLAYBACK_START:"AdVideoStart",ON_AD_PLAYING:"AdPlaying",ON_AD_THIRD_QUARTILE:"AdVideoThirdQuartile",ON_AD_SIZE_CHANGED:"AdSizeChanged",ON_AD_PROGRESS:"AdProgress",ON_AD_REWIND:"AdRewind",ON_AD_VOLUME_CHANGED:"AdVolumeChanged",ON_AD_UNMUTED:"AdUnmuted",ON_AD_MUTED:"AdMuted",ON_ENTER_FULLSCREEN:"EnterFullscreen",ON_EXIT_FULLSCREEN:"LeaveFullscreen",ON_PLAYER_EXPAND:"PlayerExpand",ON_PLAYER_COLLAPSE:"PlayerCollapse",ON_CLOSED_CAPTIONS_DETECTED:"ClosedCaptionsDetected",ON_COMPANIONS_DETECTED:"CompanionsDetected",ON_EXTENSIONS_DETECTED:"ExtensionsDetected",ON_NONLINEAR_DETECTED:"NonLinearDetected",ON_VERIFICATION_DETECTED:"AdVerificationDetected",ON_ICONS_DETECTED:"IconsDetected",ON_ICON_CLICKED:"IconClickThru",ON_AD_SKIPPABLE_STATE_CHANGE:"AdSkippableStateChange",ON_COMPANION_CREATIVE_VIEW:"CompanionCreativeView",ON_COMPANION_CLICKED:"CompanionClickThru",ON_AD_NONLINEAR_FINISHED:"AdOverlayViewFinished",ON_AD_NONLINEAR_STOPPED:"AdOverlayViewStopped",ON_AD_SLOT_START:"AdSlotStart",ON_AD_SLOT_STARTED:"AdSlotStarted",ON_AD_SLOT_FINISHED:"AdSlotFinished",ON_AD_SLOT_STOPPED:"AdSlotStopped",ON_AD_SLOT_COMPLETE:"AdSlotComplete",ON_AD_SLOT_DURATION_CHANGE:"AdSlotDurationChange",ON_AD_VIEWABLE:"AdViewable",ON_AD_NOT_VIEWABLE:"AdNotViewable",ON_AD_VIEWABLE_STATE_CHANGE:"AdViewStateChange",ON_AD_VIEWABLE_UNDETERMINED:"AdViewUndetermined",ON_AD_WARNING:"AdWarning",ON_AD_REINSERTION_ACTIVATION:"AdReinsertionActivation",ON_GENERAL_ERROR:"GeneralError",ON_HOMAD_PENALTY:"HomadPenalty",ON_PLAYBACK_FINISHED:"PlaybackFinished",ON_SIMID_ERROR:"SIMIDError"},ud=Object.assign,$k=Object.defineProperty,ge=!ud||ia(function(){if(ta&&ud({b:1},ud($k({},"a",{enumerable:!0,get:function(){$k(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var o={},s={},p=Symbol();return o[p]=7,"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),ud({},o)[p]!=7||fc(ud({},s)).join("")!="abcdefghijklmnopqrst"})?function(o,s){for(var p=ab(o),i=arguments.length,u=1,v=Yd.f,m=Vd;i>u;)for(var S=Ed(arguments[u++]),P=v?fc(S).concat(v(S)):fc(S),x=P.length,w=0,W;x>w;)W=P[w++],(!ta||m.call(S,W))&&(p[W]=S[W]);return p}:ud;Y({target:"Object",stat:!0,forced:Object.assign!==ge},{assign:ge});var al=Ca("isConcatSpreadable"),vp=51<=Ce||!ia(function(){var o=[];return o[al]=!1,o.concat()[0]!==o}),wp=Id("concat");Y({target:"Array",proto:!0,forced:!vp||!wp},{concat:function(o){var s=ab(this),p=Xf(s,0),i=0,u,v=-1;for(u=arguments.length;v<u;v++){var m=v===-1?s:arguments[v],S=m;if(qa(S)){var P=S[al];S=P!==void 0?!!P:tc(S)}else S=!1;if(S){if(P=Ra(m.length),9007199254740991<i+P)throw TypeError("Maximum allowed index exceeded");for(S=0;S<P;S++,i++)S in m&&bd(p,i,m[S])}else{if(9007199254740991<=i)throw TypeError("Maximum allowed index exceeded");bd(p,i++,m)}}return p.length=i,p}}),Y({target:"Array",stat:!0},{isArray:tc});var bl=function(){function o(){la(this,o)}return ma(o,[{key:"necessaryPropertiesForObjectExist",value:function(s){return s.properties&&s.type&&s.required}},{key:"necessaryPropertiesForSubsequentExist",value:function(s){return s.type&&s.default||this.isComplexAndThereforeWithoutDefault(s)||this.mayHaveNullDefaultProperties(s)||this.isZero(s)||this.isEmptyString(s)}},{key:"isComplexAndThereforeWithoutDefault",value:function(s){return s.type&&(s.type==="object"||-1<s.type.indexOf("array"))}},{key:"isEmptyString",value:function(s){return s.type==="string"&&s.default===""}},{key:"isZero",value:function(s){return s.type==="number"&&!isNaN(s.default)}},{key:"mayHaveNullDefaultProperties",value:function(s){return s.type==="boolean"||s.type==="function"}},{key:"validateItemAndArray",value:function(s,p){if(this.necessaryPropertiesForSubsequentExist(p)){if(p.type==="object")return this.validateObject(s,p);if(-1<p.type.indexOf("array"))for(var i=p.type.split("/"),u=0;u<i.length&&!(-1<i[u].indexOf("array")&&this.validateArrayType(s,p)||ra(s)===i[u]);u++);else if(p.type==="number")return!isNaN(s)}else return!1;return!0}},{key:"validateArrayType",value:function(s,p){for(var i=Array.isArray(s),u=p.type.split("<")[1].split(">")[0],v=0;v<s.length;v++){if(!i||ra(s[v])!==u)return!1;if(u==="object")return this.constructor.validate(s[v],p.objectarraytype)}return!0}},{key:"validateObject",value:function(s,p){return ra(s)==="object"?this.constructor.validate(s,p):!1}}],[{key:"validate",value:function(s,p){var i=!!s,u=new o().necessaryPropertiesForObjectExist(p);if(i&&u)for(var v in p.properties){if(u=s[v]||s[v]===""||p.properties[v].type==="function"||p.properties[v].type==="boolean",i&&u===!1&&p.required.indexOf(v)===0)return!1;u&&(i=new o().validateItemAndArray(s[v],p.properties[v]))}return i}},{key:"create",value:function(s){var p={};if(new o().necessaryPropertiesForObjectExist(s))for(var i in s.properties)s.properties[i].type==="object"?p[i]=Object.assign({},this.create(s.properties[i])):-1<s.properties[i].type.indexOf("array")?p[i]=s.properties[i].default.slice(0):new o().necessaryPropertiesForSubsequentExist(s.properties[i])&&(p[i]=s.properties[i].default);else return null;return p}}]),o}(),xp={title:"ad",required:["id","error","hasError","config"],type:"object",properties:{config:{type:"object",properties:{timeoutVPAIDScriptLoad:{type:"number",default:1e3},timeoutVPAIDAdLoaded:{type:"number",default:3e3},shareVideoElementWithVPAID:{type:"boolean",default:!1},bitrate:{type:"number",default:500},viewMode:{type:"string",default:"dynamic"}}},creatives:{type:"array<object>",default:[]},extensions:{type:"array",default:[]},id:{type:"string",default:""},variant:{type:"string",default:"commercial"},impressionURLTemplates:{type:"array<string>/string",default:[]},sequence:{type:"string",default:""},info:{required:["offset"],type:"object",properties:{currentCommercial:{type:"number",default:-1},totalCommercials:{type:"number",default:-1},offset:{type:"number",default:-1},variant:{type:"string",default:"commercial"},universalAdId:{type:"object",required:["idRegistry","idValue"],properties:{idRegistry:{type:"string",default:"unknown"},idValue:{type:"string",default:"unknown"}}}}},error:{required:["code"],type:"object",properties:{code:{type:"number",default:0},timestamp:{type:"number",default:0},description:{type:"string",default:""}}},universalAdId:{type:"object",required:["idRegistry","idValue"],properties:{idRegistry:{type:"string",default:"unknown"},idValue:{type:"string",default:"unknown"}}}}},yp={title:"adSlot",required:[],type:"object",properties:{type:{type:"string",default:Sa.LINEAR},tag:{type:"array<string>/string",default:[]},limit:{type:"number",default:null},repeat:{type:"number",default:null},adBreakPosition:{type:"number",default:0}}},xi="".repeat||function(o){var s=String(Bb(this)),p="";if(o=Pb(o),0>o||o==1/0)throw RangeError("Wrong number of repetitions");for(;0<o;(o>>>=1)&&(s+=s))o&1&&(p+=s);return p},Pm=Math.ceil,Uc={start:wi(!1),end:wi(!0)}.start,zp=Math.abs,cl=Date.prototype,Ap=cl.getTime,$g=cl.toISOString,dl=ia(function(){return $g.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!ia(function(){$g.call(new Date(NaN))})?function(){if(!isFinite(Ap.call(this)))throw RangeError("Invalid time value");var o=this.getUTCFullYear(),s=this.getUTCMilliseconds(),p=0>o?"-":9999<o?"+":"";return p+Uc(zp(o),p?6:4,0)+"-"+Uc(this.getUTCMonth()+1,2,0)+"-"+Uc(this.getUTCDate(),2,0)+"T"+Uc(this.getUTCHours(),2,0)+":"+Uc(this.getUTCMinutes(),2,0)+":"+Uc(this.getUTCSeconds(),2,0)+"."+Uc(s,3,0)+"Z"}:$g;Y({target:"Date",proto:!0,forced:Date.prototype.toISOString!==dl},{toISOString:dl});var Vc={ON_AD_CLICKED:"clickTracking",ON_AD_ERROR:"error",ON_AD_STOPPED:"AdStopped",ON_AD_LINEARITY_CHANGE:"AdLinearChange",ON_AD_MANIFEST_LOADED:"AdTagParsed",ON_AD_LOADED:"AdLoaded",ON_AD_SKIPPED:"skip",ON_AD_PLAYBACK_START:"start",ON_AD_FIRST_QUARTILE:"firstQuartile",ON_AD_MID_POINT:"midpoint",ON_AD_THIRD_QUARTILE:"thirdQuartile",ON_AD_PLAYBACK_FINISHED:"complete",ON_AD_PROGRESS:"progress",ON_AD_REWIND:"rewind",ON_AD_MUTED:"mute",ON_AD_UNMUTED:"unmute",ON_ENTER_FULLSCREEN:"fullscreen",ON_EXIT_FULLSCREEN:"exitFullscreen",ON_PLAYER_EXPAND:"playerExpand",ON_PLAYER_COLLAPSE:"playerCollapse",ON_AD_IMPRESSION:"impression",ON_AD_CREATIVE_VIEW:"creativeView",ON_AD_PAUSED:"pause",ON_AD_PLAYING:"resume",ON_AD_VIEWABLE:"viewable",ON_AD_NOT_VIEWABLE:"notViewable",ON_AD_VIEWABLE_UNDETERMINED:"viewUndetermined",ON_AD_NONLINEAR_STOPPED:"overlayViewDuration"},Bp=Math.max,Cp=Math.min,Dp=Math.floor,Ep=/\$([$&'`]|\d\d?|<[^>]*>)/g,Fp=/\$([$&'`]|\d\d?)/g;lg("replace",2,function(o,s,p,i){function u(P,x,w,W,Te,z){var G=w+P.length,J=W.length,_e=Fp;return Te!==void 0&&(Te=ab(Te),_e=Ep),s.call(z,_e,function(tt,Ue){switch(Ue.charAt(0)){case"$":return"$";case"&":return P;case"`":return x.slice(0,w);case"'":return x.slice(G);case"<":var Ze=Te[Ue.slice(1,-1)];break;default:if(Ze=+Ue,Ze===0)return tt;if(Ze>J)return Ze=Dp(Ze/10),Ze===0?tt:Ze<=J?W[Ze-1]===void 0?Ue.charAt(1):W[Ze-1]+Ue.charAt(1):tt;Ze=W[Ze-1]}return Ze===void 0?"":Ze})}var v=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=i.REPLACE_KEEPS_$0,S=v?"$":"$0";return[function(P,x){var w=Bb(this),W=P==null?void 0:P[o];return W!==void 0?W.call(P,w,x):s.call(String(w),P,x)},function(P,x){if(!v&&m||typeof x=="string"&&x.indexOf(S)===-1){var w=p(s,P,this,x);if(w.done)return w.value}var W=Ia(P);w=String(this);var Te=typeof x=="function";Te||(x=String(x));var z=W.global;if(z){var G=W.unicode;W.lastIndex=0}for(var J=[];;){var _e=Md(W,w);if(_e===null||(J.push(_e),!z))break;String(_e[0])===""&&(W.lastIndex=kg(w,Ra(W.lastIndex),G))}for(G="",z=W=0;z<J.length;z++){_e=J[z];for(var tt=String(_e[0]),Ue=Bp(Cp(Pb(_e.index),w.length),0),Ze=[],it=1;it<_e.length;it++){var Qe=Ze,We=_e[it];Qe.push.call(Qe,We===void 0?We:String(We))}_e=_e.groups,Te?(Ze=[tt].concat(Ze,Ue,w),_e!==void 0&&Ze.push(_e),_e=String(x.apply(void 0,Ze))):_e=u(tt,w,Ue,Ze,_e,x),Ue>=W&&(G+=w.slice(W,Ue)+_e,W=Ue+tt.length)}return G+w.slice(W)}]});var Gp=function(o){function s(i){la(this,s);var u=p.call(this);return u._$adXML=i,u._linear=u._getLinear(),u._nonLinear=u._getNonLinear(),u}ya(s,o);var p=xa(s);return ma(s,[{key:"asArray",get:function(){var i=this.linear;return[].concat(i.mediaFiles.vpaid,i.mediaFiles.streaming,i.mediaFiles.interactive,this.nonLinear,this.companion)}},{key:"linearAsArray",get:function(){var i=this.linear;return[{mediaFiles:[].concat(i.mediaFiles.vpaid,i.mediaFiles.streaming,i.mediaFiles.interactive),captions:i.captions,icons:i.icons,creativeTrackers:i.creativeTrackers}]}},{key:"linear",get:function(){return this._linear}},{key:"_getLinear",value:function(){var i=this._$adXML.querySelector("InLine > Creatives > Creative > Linear"),u=i?i.querySelector("MediaFiles"):null;return{mediaFiles:{interactive:this._getInteractiveCreatives(i),streaming:this._getStreamingCreatives(u),vpaid:this._getVPAIDCreatives(i)},captions:this._getClosedCaptionCreatives(i),icons:this._getIndustryIcons(i),creativeTrackers:this._getTrackers("Linear Tracking")}}},{key:"_getVPAIDCreatives",value:function(i){if(!i)return[];var u=[],v=i.querySelectorAll('MediaFile[apiFramework="VPAID"]');i=i.querySelector("AdParameters");for(var m=0;m<v.length;m++)u.push({linearity:Sa.LINEAR,apiFramework:"VPAID",adParameters:i?i.textContent.trim():null,bitrate:parseInt(v[m].getAttribute("bitrate"),10),width:parseInt(v[m].getAttribute("width"),10),height:parseInt(v[m].getAttribute("height"),10),mimeType:v[m].getAttribute("type"),fileURL:v[m].textContent.trim()});return u}},{key:"_getStreamingCreatives",value:function(i){if(!i)return[];var u=[];i=i.querySelectorAll('MediaFile:not([apiFramework="VPAID"])');for(var v=0;v<i.length;v++)u.push({apiFramework:i[v].getAttribute("apiFramework"),bitrate:parseInt(i[v].getAttribute("bitrate"),10),fileURL:i[v].textContent.trim(),height:parseInt(i[v].getAttribute("height"),10),linearity:Sa.LINEAR,mimeType:i[v].getAttribute("type"),width:parseInt(i[v].getAttribute("width"),10)});return u}},{key:"_getInteractiveCreatives",value:function(i){if(!i)return[];var u=[],v=i.querySelectorAll("InteractiveCreativeFile");i=i.querySelector("AdParameters");for(var m=0;m<v.length;m++)u.push({adParameters:i?i.textContent.trim():null,apiFramework:v[m].getAttribute("apiFramework"),delivery:v[m].getAttribute("delivery"),fileURL:v[m].textContent.trim(),linearity:Sa.LINEAR,mimeType:v[m].getAttribute("type"),variableDuration:v[m].getAttribute("variableDuration")?!!v[m].getAttribute("variableDuration").match("true"):!1});return u}},{key:"_getClosedCaptionCreatives",value:function(i){if(!i)return[];var u=[];if(i=i.querySelector("ClosedCaptionFiles")){i=i.querySelectorAll("ClosedCaptionFile");for(var v=0;v<i.length;v++)u.push({linearity:Sa.LINEAR,type:i[v].getAttribute("type"),language:i[v].getAttribute("language"),fileURL:i[v].textContent})}return u}},{key:"_getIndustryIcons",value:function(i){function u(P){var x=S[P].getAttribute("program"),w=v._parseResources(S[P]),W=[];[].slice.call(S[P].querySelectorAll("IconClickTracking")).forEach(function(G){W.push({url:G.textContent.trim(),id:G.getAttribute("id")})});var Te=S[P].querySelector("IconClickThrough"),z=[];for([].slice.call(S[P].querySelectorAll("IconViewTracking")).forEach(function(G){z.push({url:G.textContent.trim()})}),m[x]={program:x,width:S[P].getAttribute("width"),height:S[P].getAttribute("height"),xPosition:S[P].getAttribute("xPosition"),yPosition:S[P].getAttribute("yPosition"),duration:S[P].getAttribute("duration")||-1,offset:S[P].getAttribute("offset")||-1,apiFramework:S[P].getAttribute("apiFramework"),pxratio:S[P].getAttribute("pxratio"),hasCreative:0<w.length,iconClickThroughURLTemplate:Te?Te.textContent.trim():null,iconClickTrackingURLTemplates:W,iconViewTrackingURLTemplate:z,altText:S[P].getAttribute("altText"),hoverText:S[P].getAttribute("hoverText"),resources:w,clickThroughURL:Te?Te.textContent.trim():null,clickTracker:W,creativeViewTracker:z},P=0;P<w.length;P++)Te=w[P].type.charAt(0).toLowerCase()+w[P].type.slice(1),m[x][Te]=w[P].resource,m[x].type=w[P].creativeType}var v=this;if(!i)return[];var m={},S=this._$adXML.querySelectorAll("Creatives > Creative > Linear Icon");for(i=0;i<S.length;i++)u(i);return m}},{key:"nonLinear",get:function(){return this._nonLinear}},{key:"_getNonLinear",value:function(){var i=this._$adXML.querySelectorAll("InLine > Creatives > Creative > NonLinearAds");return this._getNonLinearCreatives(i[0])}},{key:"_getNonLinearCreatives",value:function(i){function u(x){var w=[];[].slice.call(v._$adXML.querySelectorAll("NonLinearClickTracking")).forEach(function(z){w.push({url:z.textContent.trim()})});var W=m[x].querySelector("NonLinearClickThrough"),Te=m[x].querySelector("AdParameters");S.variations.push({id:m[x].getAttribute("id"),width:parseInt(m[x].getAttribute("width"),10),height:parseInt(m[x].getAttribute("height"),10),expandedWidth:parseInt(m[x].getAttribute("expandedWidth"),10),expandedHeight:parseInt(m[x].getAttribute("expandedHeight"),10),scalable:m[x].getAttribute("scalable")!=="false",maintainAspectRatio:m[x].getAttribute("maintainAspectRatio")!=="false",minSuggestedDuration:m[x].getAttribute("minSuggestedDuration")||-1,apiFramework:m[x].getAttribute("apiFramework"),adParameters:Te?Te.textContent.trim():null,resources:v._parseResources(m[x]),clickThroughURL:W?W.textContent.trim():null,clickTracker:w,creativeTrackers:P})}var v=this;if(!i||i.children.length===0)return[];this.debug.info("[VASTAdCreatives] Get NonLinear Creatives from.",i);var m=i.querySelectorAll("NonLinear"),S={type:Sa.NON_LINEAR,universalAdId:{},variations:[]},P=this._getTrackers("NonLinearAds Tracking");for(i=0;i<m.length;i++)u(i);return i=[],i.push(S),i}},{key:"_parseResources",value:function(i){var u=[];i=i.querySelectorAll("HTMLResource, IFrameResource, StaticResource");for(var v=0;v<i.length;v++)u.push({type:i[v].nodeName,creativeType:i[v].getAttribute("creativeType"),resource:i[v].textContent.trim()});return u}},{key:"companion",get:function(){function i(P){var x={hasCompanionResources:!1,required:m[P].getAttribute("required"),type:"companion",variations:[]},w=m[P].querySelectorAll("Companion");Object.keys(w).forEach(function(W){if(w[W].hasChildNodes()){var Te=w[W].querySelector("AdParameters"),z=w[W].querySelector("AltText"),G=[];[].slice.call(w[W].querySelectorAll("CompanionClickTracking")).forEach(function(Ue){G.push({url:Ue.textContent.trim(),id:Ue.getAttribute("id")})});var J=w[W].querySelector("CompanionClickThrough"),_e=[];[].slice.call(w[W].querySelectorAll("Tracking[event=creativeView]")).forEach(function(Ue){_e.push({url:Ue.textContent.trim()})});var tt=u._parseResources(w[W]);x.variations.push({adSlotId:w[W].getAttribute("adSlotId")||"",apiFramework:w[W].getAttribute("apiFramework")||"",adParameters:Te?Te.textContent.trim():null,altText:z?z.textContent.trim():null,assetHeight:w[W].getAttribute("assetHeight")||"",assetWidth:w[W].getAttribute("assetWidth")||"",companionXML:w[W],clickThroughURL:J?J.textContent.trim():null,clickTracker:G,creativeViewTracker:_e,expandedHeight:w[W].getAttribute("expandedHeight")||"",expandedWidth:w[W].getAttribute("expandedWidth")||"",hasCreative:0<tt.length,height:w[W].getAttribute("height"),id:w[W].getAttribute("id")||kj(),pxratio:w[W].getAttribute("pxratio")||"1",resources:tt,renderingMode:w[W].getAttribute("renderingMode")||"default",width:w[W].getAttribute("width")}),x.hasCompanionResources=0<tt.length,v.push(x)}})}for(var u=this,v=[],m=this._$adXML.querySelectorAll("Creatives > Creative > CompanionAds"),S=0;S<m.length;S++)i(S);return v}},{key:"_getTrackers",value:function(i){for(var u={},v=[].slice.call(this._$adXML.querySelectorAll("ClickTracking, "+i)),m=0;m<v.length;m++){var S=v[m].nodeName.charAt(0).toLowerCase()+v[m].nodeName.slice(1);if(S=v[m].getAttribute("event")||S,i.indexOf("NonLinearAds")!==0||!S.match(/quartile|midpoint|complete/ig)){var P={url:ua.trim(v[m].textContent)};S===Vc.ON_AD_PROGRESS&&(P.offset=ua.convertTimeStringToSeconds(v[m].getAttribute("offset"))||v[m].getAttribute("offset"),P.offset=""+P.offset),u[S]=u[S]||[],u[S].push(P)}}return u}}]),s}(jb),cb={BUMPER:"bumper",OPENER:"opener",CLOSER:"closer",COMMERCIAL:"commercial",SPONSORED:"sponsored"},ah=function(o){function s(i,u){la(this,s);var v=p.call(this,i,u);return v._adSkippableStateChangeSent=!1,v._isLinear=1<=v.adXML.querySelectorAll("Creative Linear").length||!1,v._isSkippable=!1,v._sequence=v.adXML.getAttribute("sequence")||NaN,v._skipOffset=v.adXML.querySelector("InLine Linear")?v.adXML.querySelector("InLine Linear").getAttribute("skipoffset"):null,v._variant=v._getVariant(ua.getMostNestedElement(v.adXML,'Extension[type="sxp"] variant, Extension[name="SXP"] AdInfo')),v._duration=v._getDuration(ua.getMostNestedElement(v.adXML,"Linear Duration")),v._clickThroughURL=v._getClickThroughURL(),v.replaced=!1,v.error=v._getError()||{code:void 0,description:"",timestamp:null},v}ya(s,o);var p=xa(s);return ma(s,[{key:"adSkippableStateChangeSent",get:function(){return this._adSkippableStateChangeSent},set:function(i){this._adSkippableStateChangeSent=i}},{key:"hasError",get:function(){return!isNaN(this.error.code)}},{key:"clickThroughURL",get:function(){return this._clickThroughURL},set:function(i){this._clickThroughURL=i}},{key:"duration",get:function(){return this._duration},set:function(i){this._duration=i}},{key:"isLinear",get:function(){return this._isLinear},set:function(i){this._isLinear=i}},{key:"isSkippable",get:function(){return this._isSkippable},set:function(i){this._isSkippable=i}},{key:"sequence",get:function(){return parseFloat(this._sequence)},set:function(i){this._sequence=i}},{key:"skipOffset",get:function(){return typeof this._skipOffset=="number"?this._skipOffset:ua.convertTimeStringToSeconds(this._skipOffset)},set:function(i){this._skipOffset=i}},{key:"variant",get:function(){return this._variant},set:function(i){this._variant=i}},{key:"_getVariant",value:function(i){if(!i)return cb.COMMERCIAL;var u={NORMAL:cb.COMMERCIAL,BUMPER:cb.SPONSORED,COMMERCIAL:cb.COMMERCIAL,SPONSORED:cb.SPONSORED},v="";return i.nodeName==="AdInfo"&&(v=i.getAttribute("variant")),i.nodeName==="variant"&&(v=ua.trim(i.textContent)),u[v.toUpperCase()]||cb.COMMERCIAL}},{key:"_getDuration",value:function(i){return i?ua.convertTimeStringToSeconds(ua.trim(i.textContent)):s.FALLBACK_LINEAR_DURATION}},{key:"_getError",value:function(){var i=this.adXML.querySelector("_error")||this.adXML.parentNode.querySelector(":scope > _error");return i?{code:parseInt(i.getAttribute("code"),10),description:i.getAttribute("description"),timestamp:null}:this._flagCappedAds()}},{key:"_flagCappedAds",value:function(){return this.adXML.querySelector("InLine")&&this.adXML.nodeName!=="Error"?null:{code:303,description:"No Ads VAST response after one or more Wrappers.",timestamp:null}}},{key:"_getClickThroughURL",value:function(){var i=ua.getMostNestedElement(this.adXML,"VideoClicks ClickThrough");return i?ua.trim(i.textContent):null}}]),s}(function(o){function s(i,u){la(this,s);var v=p.call(this);return v.adXML=i,v.rawXML=u&&u.documentElement,v._adTrackers=v.getRootTracker(),v._error={code:void 0,timestamp:null,description:""},v._extensions=v._getExtensions(),v}ya(s,o);var p=xa(s);return ma(s,[{key:"adType",get:function(){return(ua.getMostNestedElement(this.adXML,"Ad")||this.adXML).getAttribute("adType")||"video"}},{key:"advertiser",get:function(){var i=this.adXML.querySelector("InLine Advertiser");return i?ua.trim(i.textContent):null}},{key:"adVerifications",get:function(){for(var i=this.adXML.querySelectorAll("AdVerifications > Verification"),u=[],v=0;v<i.length;v++){var m=i[v],S=m.getAttribute("vendor")||"",P=m.querySelector("JavaScriptResource"),x=this._getNodeContentsAsText(m.querySelector("VerificationParameters"));m=this._getTrackerNodesAsURLArray(m.querySelector("TrackingEvents")),S&&0<S.length&&P&&(S={javascriptResource:{url:ua.trim(this._getNodeContentsAsText(P)),apiFramework:P.getAttribute("apiFramework")||"",browserOptional:P.getAttribute("browserOptional")==="true"||!1},tracking:m,vendor:S,verificationParameters:x},u.push(S))}return 0<u.length?ua.getUnique(u,"vendor"):[]}},{key:"allowMultipleAds",get:function(){var i=ua.getMostNestedElement(this.adXML,"Wrapper");return i&&i.hasAttribute("allowMultipleAds")?i.getAttribute("allowMultipleAds")==="true":!1}},{key:"creatives",get:function(){return this.creativeClass.asArray}},{key:"creativeClass",get:function(){return this._creatives?this._creatives:this._creatives=new Gp(this.adXML)}},{key:"description",get:function(){var i=this.adXML.querySelector("InLine Description");return i?ua.trim(i.textContent):null}},{key:"extensions",get:function(){return this._extensions}},{key:"fallbackOnNoAd",get:function(){var i=ua.getMostNestedElement(this.adXML,"Wrapper");return i&&i.hasAttribute("fallbackOnNoAd")?i.getAttribute("fallbackOnNoAd")!=="false":!0}},{key:"fallbackType",get:function(){var i=ua.getMostNestedElement(this.adXML,"Wrapper");return i&&i.hasAttribute("fallbackType")?i.getAttribute("fallbackType"):"replace"}},{key:"id",get:function(){var i=ua.getMostNestedElement(this.adXML,"Ad");return i&&i.hasAttribute("id")?i.id:this.adXML.getAttribute("id")||null}},{key:"adServingId",get:function(){var i=this.adXML.querySelector("InLine AdServingId");return i?ua.trim(i.textContent):null}},{key:"pricing",get:function(){var i=this.adXML.querySelector("InLine Pricing")||ua.getMostNestedElement(this.adXML,"Wrapper Pricing");return i&&i!==this.adXML?{value:ua.trim(i.textContent),model:i.getAttribute("model"),currency:i.getAttribute("currency")}:null}},{key:"survey",get:function(){var i=this.adXML.querySelector("InLine Survey");return i?ua.trim(i.textContent):null}},{key:"system",get:function(){var i=this.adXML.querySelector("InLine AdSystem");return i?ua.trim(i.textContent):null}},{key:"title",get:function(){var i=this.adXML.querySelector("InLine AdTitle");return i?ua.trim(i.textContent):null}},{key:"adTrackers",get:function(){return this._adTrackers}},{key:"wrappers",get:function(){var i=[];this.rawXML&&this.rawXML.hasAttribute("_initialURL")&&i.push({url:ua.trim(this.rawXML.getAttribute("_initialURL")),loadStart:new Date(parseInt(this.rawXML.getAttribute("_loadStart"),10)).toISOString(),loadEnd:new Date(parseInt(this.rawXML.getAttribute("_loadEnd"),10)).toISOString(),loadTime:this.rawXML.getAttribute("_loadEnd")-this.rawXML.getAttribute("_loadStart")});for(var u=this.adXML.querySelectorAll("VASTAdTagURI"),v=0;v<u.length;v++)i.push({url:ua.trim(u[v].textContent),loadStart:new Date(parseInt(u[v].getAttribute("_loadStart"),10)).toISOString(),loadEnd:new Date(parseInt(u[v].getAttribute("_loadEnd"),10)).toISOString(),loadTime:u[v].getAttribute("_loadEnd")-u[v].getAttribute("_loadStart")});return i}},{key:"universalAdId",get:function(){var i=this.adXML.querySelectorAll("Creative UniversalAdId");return(i=i[i.length-1])?{idRegistry:ua.trim(i.getAttribute("idRegistry")),idValue:ua.trim(i.textContent)||ua.trim(i.getAttribute("idValue")||"unknown")}:{idRegistry:"unknown",idValue:"unknown"}}},{key:"universalAdIds",get:function(){for(var i=[],u=this.adXML.querySelectorAll("Creative UniversalAdId"),v=0;v<u.length;v++)i.push({idRegistry:ua.trim(u[v].getAttribute("idRegistry")),idValue:ua.trim(u[v].textContent)||ua.trim(u[v].getAttribute("idValue")||"unknown")});return i}},{key:"_getExtensions",value:function(){var i=[];if(this.adXML)for(var u=this.adXML.querySelectorAll("Extensions > Extension"),v=0;v<u.length;v++)i.push({type:u[v].getAttribute("type"),extensionXML:u[v]});return i}},{key:"_getNodeContentsAsText",value:function(i){return i?(i.textContent||i.text||"").trim():""}},{key:"getRootTracker",value:function(){var i=this,u={};if(this.adXML){var v=[].slice.call(this.adXML.querySelectorAll("Error, Impression, NotViewable, Viewable, ViewUndetermined"));this.adXML.nodeName==="Error"&&v.push(this.adXML),v.forEach(function(m){var S=m.nodeName.charAt(0).toLowerCase()+m.nodeName.slice(1);(m=i._getNodeContentsAsText(m))&&0<m.length&&(u[S]=u[S]||[],u[S].push({url:m}))})}return u}},{key:"_getTrackerNodesAsURLArray",value:function(i){var u=this,v={};return i&&[].slice.call(i.querySelectorAll("Tracking")).forEach(function(m){var S=u._getNodeContentsAsText(m);m=m.getAttribute("event"),S&&0<S.length&&(v[m]||(v[m]=[]),v[m].push({url:S}))}),v}}]),s}(jb));ah.FALLBACK_LINEAR_DURATION=20;var Hp={title:"creative",required:["mediaFiles","supportedMediaFiles","type"],type:"object",properties:{adParameters:{type:"object",default:null},duration:{type:"number",default:ah.FALLBACK_LINEAR_DURATION},icons:{type:"array<string>/string",default:[]},mediaFiles:{type:"array<string>/string",default:[]},supportedMediaFiles:{type:"array<string>/string",default:[]},skipDelay:{type:"number",default:NaN},creativeTrackers:{type:"object",default:{}},type:{type:"string",default:"linear"},universalAdId:{type:"object",required:["idRegistry","idValue"],properties:{idRegistry:{type:"string",default:"unknown"},idValue:{type:"string",default:"unknown"}}},videoClickThroughURLTemplate:{type:"string",default:""},videoClickTrackingURLTemplates:{type:"array<string>/string",default:[]},videoCustomClickURLTemplates:{type:"array<string>/string",default:[]}}},Ip={title:"environmentVars",type:"object",required:[],properties:{adContainer:{type:"HTMLElement",default:null},desiredBitrate:{type:"number",default:null},desiredMimeTypes:{type:"array<string>/string",default:[]},desiredVPAIDVendors:{type:"array<string>/string",default:[]},deviceType:{type:"string",default:""},deviceScreenSize:{type:"number,number",default:null},vastMacros:{type:"object",properties:{ADCATEGORIES:{type:"array<string>/string",default:[]},BLOCKEDADCATEGORIES:{type:"array<string>/string",default:[]},BREAKPOSITION:{type:"string",default:""},CONTENTPLAYHEAD:{type:"string",default:""},MEDIAPLAYHEAD:{type:"string",default:""},PLACEMENTTYPE:{type:"string",default:""},CLIENTUA:{type:"string",default:""},DEVICEIP:{type:"string",default:""},DEVICEUA:{type:"string",default:""},IFA:{type:"string",default:""},IFATYPE:{type:"string",default:""},LATLONG:{type:"string",default:""},APPBUNDLE:{type:"string",default:""},DOMAIN:{type:"string",default:""},PAGEURL:{type:"string",default:""},EXTENSIONS:{type:"array<string>/string",default:[]},MEDIAMIME:{type:"array<string>/string",default:[]},OMIDPARTNER:{type:"string",default:"Smartcliptv/6.4.10"},PLAYERCAPABILITIES:{type:"array<string>/string",default:[]},VERIFICATIONVENDORS:{type:"array<string>/string",default:[]},CONTENTID:{type:"string",default:""},CONTENTURI:{type:"string",default:""},INVENTORYSTATE:{type:"array<string>/string",default:[]},GDPRCONSENT:{type:"string",default:""},LIMITADTRACKING:{type:"string",default:""},REGULATIONS:{type:"array<string>/string",default:[]}}},networkReachability:{type:"string",default:""},omidServiceWindow:{type:"object",default:null},prefetchBuffetAds:{type:"boolean",default:!1},timeouts:{type:"object",properties:{adRequest:{type:"number",default:1},adRequestChain:{type:"number",default:2},adSlotRequest:{type:"number",default:4},contentRequest:{type:"number",default:3},nonlinearMaxDuration:{type:"number",default:10},videoRequest:{type:"number",default:3},vpaidReadiness:{type:"number",default:3},vpaidRequest:{type:"number",default:1}}}}},bh={XHR:"xhr",JSONP:"jsonp"},Jp={title:"publisherConfigDefaultScheme",required:[],type:"object",properties:{debug:{type:"boolean",default:!1},blockInsecureURL:{type:"boolean",default:!0},adRequestMethod:{type:"string",default:bh.XHR},adReinsertion:{required:[],type:"object",properties:{homad:{required:[],type:"object",properties:{enabled:{type:"boolean",default:!1},setup:{required:[],type:"object",properties:{globalConfig:{type:"string",default:""},clientConfig:{type:"string",default:""},enableSessionCoverage:{type:"boolean",default:!1},forceActivation:{type:"boolean",default:!1},activationCallback:{type:"function",default:function(){return Promise.resolve()}}}}}}}},adVerification:{required:[],type:"object",properties:{disabled:{type:"boolean",default:!1},sessionCleanupDelay:{type:"number",default:3},timeoutScriptLoad:{type:"number",default:1},vendorWhitelist:{type:"array<string>/string",default:[]},playerHandles:{type:"boolean",default:!1},accessMode:{type:"string",default:"full"},serviceWindow:{type:"object",default:null}}},timeouts:{required:[],type:"object",properties:{adRequest:{type:"number",default:1},adRequestChain:{type:"number",default:2},adSlotRequest:{type:"number",default:4},contentRequest:{type:"number",default:3},nonlinearMaxDuration:{type:"number",default:10},videoRequest:{type:"number",default:3},vpaidReadiness:{type:"number",default:3},vpaidRequest:{type:"number",default:1}}},desiredBitrate:{type:"number",default:1e3},adSourceSelector:{type:"promise",default:null},skipOffset:{type:"number",default:-1},volume:{type:"number",default:.75},viewability:{required:[],type:"object",properties:{area:{type:"number",default:50},time:{type:"number",default:2}}},timeoutVPAIDScriptLoad:{type:"number",default:1e3},timeoutVPAIDAdLoaded:{type:"number",default:3e3},trackSkippedQuartiles:{type:"boolean",default:!1},parentProspectorValue:{type:"function",default:null},playerHandlesNonLinear:{type:"boolean",default:!1},shareVideoElementWithVPAID:{type:"boolean",default:!0},trackImpressionOnStart:{type:"boolean",default:!1}}},Kp={title:"mediaFile",required:[],type:"object",properties:{apiFramework:{type:"string",default:""},bitrate:{type:"number",default:500},codec:{type:"string",default:""},deliveryType:{type:"string",default:"progressive"},fileURL:{type:"string",default:""},height:{type:"number",default:360},id:{type:"string",default:""},maintainAspectRatio:{type:"boolean",default:!0},maxBitrate:{type:"number",default:5e3},mimeType:{type:"string",default:"video/mp4"},minBitrate:{type:"number",default:0},scalable:{type:"boolean",default:!0},width:{type:"number",default:640}}},Lp={required:["progressive"],type:"object",properties:{progressive:{type:"array<string>/string",default:""},dash:{type:"string",default:""},hls:{type:"string",default:""},forcePlay:{type:"boolean",default:!1}}},Ba=function(){function o(){la(this,o)}return ma(o,null,[{key:"validate",value:function(s,p){return bl.validate(s,p)}},{key:"create",value:function(s){return bl.create(s)}},{key:"AD",get:function(){return xp}},{key:"AD_BREAK",get:function(){return yp}},{key:"CREATIVE",get:function(){return Hp}},{key:"ENVIRONMENT_VARS",get:function(){return Ip}},{key:"GLOBAL_CONFIG",get:function(){return Jp}},{key:"MEDIA_FILE",get:function(){return Kp}},{key:"SEPARATION_CLIP",get:function(){return Lp}}]),o}();Vc.VMAP={ON_AD_BREAK_START:"breakStart",ON_AD_BREAK_END:"breakEnd",ON_AD_BREAK_ERROR:"error"};var Mp=Id("splice"),Np=Fb("splice",{ACCESSORS:!0,0:0,1:2}),Op=Math.max,Pp=Math.min;Y({target:"Array",proto:!0,forced:!Mp||!Np},{splice:function(o,s){var p=ab(this),i=Ra(p.length),u=vb(o,i),v=arguments.length,m,S;if(v===0?v=m=0:v===1?(v=0,m=i-u):(v-=2,m=Pp(Op(Pb(s),0),i-u)),9007199254740991<i+v-m)throw TypeError("Maximum allowed length exceeded");var P=Xf(p,m);for(S=0;S<m;S++){var x=u+S;x in p&&bd(P,S,p[x])}if(P.length=m,v<m){for(S=u;S<i-m;S++){x=S+m;var w=S+v;x in p?p[w]=p[x]:delete p[w]}for(S=i;S>i-m+v;S--)delete p[S-1]}else if(v>m)for(S=i-m;S>u;S--)x=S+m-1,w=S+v-1,x in p?p[w]=p[x]:delete p[w];for(S=0;S<v;S++)p[S+u]=arguments[S+2];return p.length=i-m+v,P}});var eb=function(o){function s(){la(this,s);var i=p.call(this);return i._listeners={},i}ya(s,o);var p=xa(s);return ma(s,[{key:"addEventListener",value:function(i,u){var v=this,m=this._listeners[i]||(this._listeners[i]=[]);return m.includes(u)||m.push(u),function(){v.removeEventListener(i,u)}}},{key:"dispatchEvent",value:function(i){var u=this._listeners[i];if(u){i={type:i,timestamp:Date.now(),issuer:"smartclip"};for(var v=0;v<u.length;v++)u[v].call(this,i)}}},{key:"hasEventListener",value:function(i,u){var v=this._listeners[i];return v&&v.indexOf(u)!==-1}},{key:"removeEventListener",value:function(i,u){var v=this._listeners[i];v&&v.splice(v.indexOf(u),1)}}]),s}(jb),vd=0,ch=null,dh=null,eh=null,el=Ba.create(Ba.GLOBAL_CONFIG).adReinsertion,sa=function(o){function s(i,u){la(this,s);var v=p.call(this);return i&&i.homad&&(el=i),v.reasonData=null,v._enrichment=u,v._enrichment.set("BLOCKED",vd),v}ya(s,o);var p=xa(s);return ma(s,[{key:"isActive",get:function(){return vd}},{key:"vendorAPI",get:function(){return ch}},{key:"setVendorAPI",value:function(i){!ch&&i&&(ch=i)}},{key:"reinsertionReason",get:function(){return this.reasonData}},{key:"setReinsertionReason",value:function(i){this.reasonData=i}},{key:"setCorroborationCallback",value:function(){dh=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null}},{key:"setActivationCallback",value:function(){eh=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null}},{key:"enable",value:function(i,u){var v=this;if(this.debug.warn("[AdReinsertionModel] Trying to activate AdReinsertion."),el.homad.enabled)if(this.vendorAPI)if(this.vendorAPI.isEnabled&&this.vendorAPI.isActive)if(dh){var m=this.reasonData.reason;dh(m,this.reasonData).then(function(){vd!==s.STATUS.IS_BLOCKED?eh?eh(m).then(function(){v.debug.info(">> AdReinsertion success: Activation has been approved by the publisher."),v._enrichment.set("BLOCKED",s.STATUS.IS_BLOCKED),vd=s.STATUS.IS_BLOCKED,i()}).catch(function(P){v.debug.info(">> AdReinsertion error: Activation has been declined by the publisher."),v.disable(),u("AdReinsertion request declined by publisher.",P)}):(v.debug.warn(">> AdReinsertion warning: Activation callback not set. Activation will be approved by default."),v._enrichment.set("BLOCKED",s.STATUS.IS_BLOCKED),vd=s.STATUS.IS_BLOCKED,i()):(v.debug.info(">> AdReinsertion has been enabled already. success."),i())},function(P){v.disable(),u("AdReinsertion request declined by HOMAD.",P)})}else u("HOMAD corroboration callback not set.");else{var S=Error("[AdReinsertionModel] Fallback not activated.");S.code=64,S.description="AdReinsertion usage declined by the vendor.",u(S)}else this.debug.warn("[AdReinsertionModel] HOMAD enabled but not loaded."),requestAnimationFrame(function(){v.enable(i,u)});else u(Error("[AdReinsertionModel] HOMAD not enabled by the publisher."))}},{key:"disable",value:function(){vd=0,this._enrichment.set("BLOCKED",s.STATUS.IS_OPEN)}}]),s}(eb);sa.TIMEOUT={},sa.TIMEOUT.ACTIVATION_CALLBACK_RESPONSE=250,sa.STATUS={},sa.STATUS.IS_OPEN=0,sa.STATUS.IS_BLOCKED=1,sa.REASON={},sa.REASON.XHR_TIMEOUT=1e3,sa.REASON.XHR_UNEXPECTED_STATUS=1001,sa.REASON.XHR_ERROR=1002,sa.REASON.XML_PARSING_ERROR=1003,sa.REASON.WRAPPER_CHAIN_TIMEOUT=1004,sa.REASON.AD_SLOT_TIMEOUT=1005,sa.REASON.MEDIAFILE_TIMEOUT=1010,sa.REASON.MEDIAFILE_LOAD_ERROR=1013,sa.REASON.FORCE_ACTIVATION=1020,sa.EventDispatcher=new eb;var fl=!ia(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype}),gl=Ke("IE_PROTO"),Qp=Object.prototype,Sb=fl?Object.getPrototypeOf:function(o){return o=ab(o),ha(o,gl)?o[gl]:typeof o.constructor=="function"&&o instanceof o.constructor?o.constructor.prototype:o instanceof Object?Qp:null},hl=Ca("iterator"),il=!1,wd;if([].keys){var jl=[].keys();if("next"in jl){var kl=Sb(Sb(jl));kl!==Object.prototype&&(wd=kl)}else il=!0}wd==null&&(wd={}),ha(wd,hl)||Ua(wd,hl,Om);var Be=wd,Ae=il,bb=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,s={};try{var p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;p.call(s,[]),o=s instanceof Array}catch(i){}return function(i,u){return Ia(i),vi(u),o?p.call(i,u):i.__proto__=u,i}}():void 0),Gd=Ca("iterator"),Rp=Ma.set,Sp=Ma.getterFor("Array Iterator"),yc=Of(Array,"Array",function(o,s){Rp(this,{type:"Array Iterator",target:lb(o),index:0,kind:s})},function(){var o=Sp(this),s=o.target,p=o.kind,i=o.index++;return!s||i>=s.length?(o.target=void 0,{value:void 0,done:!0}):p=="keys"?{value:i,done:!1}:p=="values"?{value:s[i],done:!1}:{value:[i,s[i]],done:!1}},"values");gd.Arguments=gd.Array,Hd("keys"),Hd("values"),Hd("entries");var fh=!ia(function(){return Object.isExtensible(Object.preventExtensions({}))}),fd=uc(function(o){function s(S){p(S,i,{value:{objectID:"O"+ ++u,weakData:{}}})}var p=Va.f,i=ld("meta"),u=0,v=Object.isExtensible||function(){return!0},m=o.exports={REQUIRED:!1,fastKey:function(S,P){if(!qa(S))return typeof S=="symbol"?S:(typeof S=="string"?"S":"P")+S;if(!ha(S,i)){if(!v(S))return"F";if(!P)return"E";s(S)}return S[i].objectID},getWeakData:function(S,P){if(!ha(S,i)){if(!v(S))return!0;if(!P)return!1;s(S)}return S[i].weakData},onFreeze:function(S){return fh&&m.REQUIRED&&v(S)&&!ha(S,i)&&s(S),S}};hd[i]=!0}),Tp=Va.f,ll=fd.fastKey,ml=Ma.set,gh=Ma.getterFor,nl={getConstructor:function(o,s,p,i){function u(P,x){var w=S(P),W=ll(x);if(W!=="F")return w.index[W];for(w=w.first;w;w=w.next)if(w.key==x)return w}function v(P,x,w){var W=S(P),Te=u(P,x),z;return Te?Te.value=w:(W.last=Te={index:z=ll(x,!0),key:x,value:w,previous:x=W.last,next:void 0,removed:!1},W.first||(W.first=Te),x&&(x.next=Te),ta?W.size++:P.size++,z!=="F"&&(W.index[z]=Te)),P}var m=o(function(P,x){zb(P,m,s),ml(P,{type:s,index:wb(null),first:void 0,last:void 0,size:0}),ta||(P.size=0),x!=null&&Fd(x,P[i],P,p)}),S=gh(s);return gc(m.prototype,{clear:function(){for(var P=S(this),x=P.index,w=P.first;w;)w.removed=!0,w.previous&&(w.previous=w.previous.next=void 0),delete x[w.index],w=w.next;P.first=P.last=void 0,ta?P.size=0:this.size=0},delete:function(P){var x=S(this);if(P=u(this,P)){var w=P.next,W=P.previous;delete x.index[P.index],P.removed=!0,W&&(W.next=w),w&&(w.previous=W),x.first==P&&(x.first=w),x.last==P&&(x.last=W),ta?x.size--:this.size--}return!!P},forEach:function(P){for(var x=S(this),w=Fc(P,1<arguments.length?arguments[1]:void 0,3),W;W=W?W.next:x.first;)for(w(W.value,W.key,this);W&&W.removed;)W=W.previous},has:function(P){return!!u(this,P)}}),gc(m.prototype,p?{get:function(P){return(P=u(this,P))&&P.value},set:function(P,x){return v(this,P===0?0:P,x)}}:{add:function(P){return v(this,P=P===0?0:P,P)}}),ta&&Tp(m.prototype,"size",{get:function(){return S(this).size}}),m},setStrong:function(o,s,p){var i=s+" Iterator",u=gh(s),v=gh(i);Of(o,s,function(m,S){ml(this,{type:i,target:m,state:u(m),kind:S,last:void 0})},function(){for(var m=v(this),S=m.kind,P=m.last;P&&P.removed;)P=P.previous;return m.target&&(m.last=P=P?P.next:m.state.first)?S=="keys"?{value:P.key,done:!1}:S=="values"?{value:P.value,done:!1}:{value:[P.key,P.value],done:!1}:(m.target=void 0,{value:void 0,done:!0})},p?"entries":"values",!p,!0),Ie(s)}};Nf("Map",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},nl);var Up=Ma.set,Vp=Ma.getterFor("String Iterator");Of(String,"String",function(o){Up(this,{type:"String Iterator",string:String(o),index:0})},function(){var o=Vp(this),s=o.string,p=o.index;return p>=s.length?{value:void 0,done:!0}:(s=Wi(s,p),o.index+=s.length,{value:s,done:!1})});var hh=Ca("iterator"),ol=Ca("toStringTag"),ih=yc.values,hf;for(hf in Yg){var pl=T[hf],lc=pl&&pl.prototype;if(lc){if(lc[hh]!==ih)try{Ua(lc,hh,ih)}catch(o){lc[hh]=ih}if(lc[ol]||Ua(lc,ol,hf),Yg[hf]){for(var xd in yc)if(lc[xd]!==yc[xd])try{Ua(lc,xd,yc[xd])}catch(o){lc[xd]=yc[xd]}}}}var Wp=[].join,Xp=Ed!=Object,Yp=Hc("join",",");Y({target:"Array",proto:!0,forced:Xp||!Yp},{join:function(o){return Wp.call(lb(this),o===void 0?",":o)}});var Zp=Va.f,$p=Qc.f,aq=Ma.set,bq=Ca("match"),$b=T.RegExp,jh=$b.prototype,he=/a/g,kh=/a/g,lh=new $b(he)!==he;if(ta&&Rb("RegExp",!lh||af||ia(function(){return kh[bq]=!1,$b(he)!=he||$b(kh)==kh||$b(he,"i")!="/a/i"}))){for(var mc=function(o,s){var p=this instanceof mc,i=Pf(o),u=s===void 0,v;return!p&&i&&o.constructor===mc&&u?o:(lh?i&&!u&&(o=o.source):o instanceof mc&&(u&&(s=mg.call(o)),o=o.source),af&&(v=!!s&&-1<s.indexOf("y"))&&(s=s.replace(/y/g,"")),p=ze(lh?new $b(o,s):$b(o,s),p?this:jh,mc),af&&v&&aq(p,{sticky:v}),p)},cq=function(o){o in mc||Zp(mc,o,{configurable:!0,get:function(){return $b[o]},set:function(s){$b[o]=s}})},ql=$p($b),rl=0;ql.length>rl;)cq(ql[rl++]);jh.constructor=mc,mc.prototype=jh,Ta(T,"RegExp",mc)}Ie("RegExp");var dq=T.isFinite;Y({target:"Number",stat:!0},{isFinite:Number.isFinite||function(o){return typeof o=="number"&&dq(o)}});var eq=Qc.f,fq=Vb,gq=Va.f,zc=T.Number,jf=zc.prototype,hq=xb(wb(jf))=="Number";if(Rb("Number",!zc(" 0o1")||!zc("0b1")||zc("+0x1"))){for(var Wc=function(o){var s=1>arguments.length?0:o,p=this;return p instanceof Wc&&(hq?ia(function(){jf.valueOf.call(p)}):xb(p)!="Number")?ze(new zc(ti(s)),p,Wc):ti(s)},sl=ta?eq(zc):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger".split(" "),mh=0,kf;sl.length>mh;mh++)ha(zc,kf=sl[mh])&&!ha(Wc,kf)&&gq(Wc,kf,fq(zc,kf));Wc.prototype=jf,jf.constructor=Wc,Ta(T,"Number",Wc)}var Ac=function(){function o(){la(this,o)}return ma(o,null,[{key:"operatingSystem",value:function(){return navigator.platform}},{key:"userAgent",value:function(){return navigator.userAgent}},{key:"screenResolution",value:function(){return{width:o.screenWidth(),height:o.screenHeight()}}},{key:"screenWidth",value:function(){return window.screen.width}},{key:"screenHeight",value:function(){return window.screen.height}},{key:"domain",value:function(){return window.location.href.split("/")[2]}},{key:"isIF",value:function(){return window!==top}},{key:"isFIF",value:function(){return o.isIF()&&window.frameElement!==null}},{key:"isFriendlyIFrameOrNoFrame",value:function(){return!o.isIF()||o.isFIF()}}]),o}(),Mc=function(){function o(){la(this,o),this._macroMap=new Map,this._setDefaultMacros()}return ma(o,[{key:"_setDefaultMacros",value:function(){var s=this;this.set("ADCATEGORIES",-1,"adcategories"),this.set("ADCOUNT",-1,"adcount"),this.set("ADPLAYHEAD",-1,"adplayhead"),this.set("ADSERVINGID",-1,"adservingid"),this.set("ADTYPE",-1,"adtype"),this.set("ALLOWINSWIPE",-1,["allowinswipe"],Ac.isFriendlyIFrameOrNoFrame),this.set("APIFRAMEWORKS",[2,7,8,9],"apiframeworks"),this.set("APPBUNDLE",-1,"appbundle"),this.set("ASSETURI",-1,"asseturi"),this.set("BLOCKED",0,"blocked"),this.set("BLOCKEDADCATEGORIES",-1,"blockedadcategories"),this.set("BREAKPOSITION",-1,"breakposition"),this.set("CACHEBUSTER",-1,["cachebusting","cachebuster","rand(om|num)"],lj),this.set("CLICKPOS",-1,"clickpos"),this.set("CLICKTYPE",-1,"clicktype"),this.set("CLIENTUA",-1,"clientua"),this.set("CONTENTID",-1,"contentid"),this.set("CONTENTURI",-1,"contenturi"),this.set("CONTENTPLAYHEAD",-1,"contentplayhead",Ne),this.set("DEVICEIP",-1,"deviceip"),this.set("DEVICEUA",Ac.userAgent(),"deviceua"),this.set("DOMAIN",Ac.domain(),"domain"),this.set("ERRORCODE",0,"errorcode"),this.set("EXTENSIONS",-1,"extensions"),this.set("FIF",-1,"fif",Ac.isFIF),this.set("GDPRCONSENT",-1,"gdprconsent"),this.set("IFA",-1,"ifa"),this.set("IDFAID",-1,"idfaid",function(){return s._macroMap.get("IFA")}),this.set("IFATYPE",-1,"ifatype"),this.set("INVENTORYSTATE",-1,"inventoryState"),this.set("LATLONG",-1,"latlong"),this.set("LIMITADTRACKING",-1,"limitadtracking"),this.set("MEDIAMIME",-1,"mediamime"),this.set("MEDIAPLAYHEAD",0,"mediaplayhead",Ne),this.set("OS",Ac.operatingSystem(),"os"),this.set("OMIDPARTNER","Smartcliptv/6.4.10","omidpartner"),this.set("PAGETITLE",document.title,"pagetitle"),this.set("PAGEURL",document.URL,"pageurl"),this.set("PLACEMENTTYPE",-1,"placementtype"),this.set("PLAYERCAPABILITIES",-1,"playercapabilities"),this.set("PLAYERSIZE",{},["playersize"],this._combineValuesWithComma),this.set("PLAYERWIDTH",-1,["player_width","playerwidth"],function(){return s._macroMap.get("PLAYERSIZE").value.width}),this.set("PLAYERHEIGHT",-1,["player_height","playerheight"],function(){return s._macroMap.get("PLAYERSIZE").value.height}),this.set("PLAYERSTATE",-1,"playerstate"),this.set("PODSEQUENCE",-1,"podsequence"),this.set("REASON",-1,"reason"),this.set("REGULATIONS",-1,"regulations"),this.set("SCREENRES",Ac.screenResolution(),["screen_res","screenres"],this._combineValuesWithComma),this.set("SCREENHEIGHT",Ac.screenHeight(),"screenheight"),this.set("SCREENWIDTH",Ac.screenWidth(),"screenwidth"),this.set("SERVERSIDE",0,"serverside"),this.set("SERVERUA",-1,"serverua"),this.set("TIMESTAMP",-1,"timestamp",Gn),this.set("TRANSACTIONID",kj(),"transactionid"),this.set("UNIVERSALADID",-1,"universaladid",function(p){return Array.isArray(p)?p.map(function(i){return i.idRegistry+" "+i.idValue}):p}),this.set("VASTVERSIONS",[2,3,5,6,7,8,11,12,13,14],"vastversions"),this.set("VERIFICATIONVENDORS",-1,"verificationvendors")}},{key:"_combineValuesWithComma",value:function(s){return s&&s.width&&s.height?"".concat(parseInt(s.width,10),",").concat(parseInt(s.height,10)):s}},{key:"getMacroList",value:function(){var s=this,p={};return this._macroMap.forEach(function(i,u){p[u]=s.get(u,!0)}),p}},{key:"getIABMacroList",value:function(){var s=this,p={};return this._macroMap.forEach(function(i,u){p["[".concat(u,"]")]=s.get(u,!0)}),p}},{key:"set",value:function(s,p,i,u){var v=this._macroMap.get(s)||{};return i=i||v.macroList,v.value=p,i?Array.isArray(i)?v.macroList=i:v.macroList=[i]:v.macroList=[s.toLowerCase()],u&&(v.transform=u),this._macroMap.set(s,v),this}},{key:"get",value:function(s){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1,i=this._macroMap.get(s);if(!i)return null;var u=i.value;if(i.transform&&(u=i.transform(i.value)),p)if(Array.isArray(u)){var v=[];u.forEach(function(m){v.push(Me(m+""))}),u=v.join(",")}else u=Me(u+"");return u}},{key:"setFromObject",value:function(s){var p=this;s&&Object.keys(s).forEach(function(i){var u=s[i];switch(ra(u)){case"string":case"object":u=u.length===0?"-1":u}p.set(i.toUpperCase(),u)})}},{key:"apply",value:function(s){var p=this;if(!s)return s;var i=s+"";return this._macroMap.forEach(function(u,v){var m=p.get(v,!0);u.macroList.map(function(S){i=p._replaceMacroWithValue(i,S,m)})}),i}},{key:"_replaceMacroWithValue",value:function(s,p,i){if(s=s.replace(this._getRegExp(p),i),p="["+p,s.indexOf(p)===-1)i=s;else{p=new RegExp("\\[".concat(p,"+(\\|\\d+){0,1}\\]"),"ig");var u=/\d+/.test(s)?parseInt(s.match(/\|(\d+)]/)[1],10):0;i=s.replace(p,u===0?Me(i):Me(i).substr(0,u))}return i}},{key:"_getRegExp",value:function(s){return new RegExp("[\\[]("+s+")[\\]]","gi")}}]),o}(),iq=Va.f,nh=Function.prototype,jq=nh.toString,kq=/^\s*function ([^ (]*)/;!ta||"name"in nh||iq(nh,"name",{configurable:!0,get:function(){try{return jq.call(this).match(kq)[1]}catch(o){return""}}});var Lm=[].slice,lq=/MSIE .\./.test(Zd);Y({global:!0,bind:!0,forced:lq},{setTimeout:si(T.setTimeout),setInterval:si(T.setInterval)});var tl=function(){function o(){la(this,o)}return ma(o,null,[{key:"getAsImage",value:function(s,p,i){var u=!1,v=setTimeout(function(){u=!0;var m=Error("ImageURLHandler: Tracking request timeout.");m.code=51,m.description="The tracker couldn't be loaded in time.",m.type="AdWarning",i(m)},1e3*p.timeouts.adRequest);p=new Image,p.src="",p.onload=function(){clearTimeout(v),u||i(null)},p.onerror=function(){clearTimeout(v),u||i(null)},p.src=s}}]),o}(),Jb=function(o){function s(){return la(this,s),p.apply(this,arguments)}ya(s,o);var p=xa(s);return ma(s,[{key:"xhrRequest",value:function(){var i=new XMLHttpRequest;return"withCredentials"in i?i:null}},{key:"getAsXHR",value:function(i,u,v){var m=this,S=setTimeout(function(){P.onreadystatechange=P.onerror=function(){m.debug.info("[XHRURLHandler] Ignoring XHR state changes after timeout error",i)};var w=Error("XHRURLHandler: Request timeout");w.code=301,w.description=(u.timeouts?u.timeouts.errorDescription:null)||"Timeout of VAST URI provided in Wrapper element,or of VAST URI provided in a subsequent Wrapper element",u.adReinsertion.setReinsertionReason({reason:u.isWrapper?sa.REASON.WRAPPER_CHAIN_TIMEOUT:sa.REASON.XHR_TIMEOUT,xhr:P,xhrError:w}),v(w,null)},1e3*u.timeouts.adRequest);try{var P=this.xhrRequest();P.withCredentials=u.withCredentials!==!1,P.overrideMimeType&&P.overrideMimeType("text/xml"),P.onreadystatechange=function(){if(P.readyState===1)P.send();else if(P.readyState===4)if(clearTimeout(S),P.status===200){var w=P.responseXML;!w&&P.responseText&&(w=Oe(P.responseText)),w?v(null,w):(m.debug.info("[XHRURLHandler] XHR Response Error: Response contains neither 'responseXML' nor 'responseText'"),w=Error("XHRURLHandler: Response contains neither 'responseXML' nor 'responseText'"),w.code=u.isWrapper?303:100,w.description="XHR Response Error: Response contains neither 'responseXML' nor 'responseText'",u.adReinsertion.setReinsertionReason({reason:sa.REASON.XHR_ERROR,xhr:P,xhrError:w}),v(w,null))}else P.onreadystatechange=P.onerror=function(){m.debug.info("[XHRURLHandler] Ignoring XHR state changes after status error",P.readyState,P.status,i)},w=Error("XHRURLHandler: "+P.statusText),w.code=u.isWrapper?301:100,w.description="XHR Status Error (".concat(P.status,"): ").concat(P.statusText),u.adReinsertion.setReinsertionReason({reason:sa.REASON.XHR_UNEXPECTED_STATUS,xhr:P,xhrError:w}),v(w,null)},P.open("GET",i),P.onerror=function(){clearTimeout(S),m.debug.info("[XHRURLHandler] XHR Error.",P.readyState,P.status,i);var w=Error("XHRURLHandler: "+P.statusText);w.code=301,w.description="XHR Error (".concat(P.status,"): ").concat(P.statusText),u.adReinsertion.setReinsertionReason({reason:sa.REASON.XHR_UNEXPECTED_STATUS,xhr:P,xhrError:w}),v(w,null)}}catch(w){clearTimeout(S);var x=Error("XHRURLHandler: Request error.");x.code=301,x.description="XHR Request Error: ".concat(w),u.adReinsertion.setReinsertionReason({reason:sa.REASON.XHR_ERROR,xhr:null,xhrError:x}),v(x,null)}}},{key:"get",value:function(i){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},v=2<arguments.length?arguments[2]:void 0;u.timeouts||(u.timeouts=Ba.create(Ba.GLOBAL_CONFIG).timeouts),this.debug.info("[XHRURLHandler] XHR get with timeout ".concat(u.timeouts.adRequest," sec: ").concat(i)),u.issuer&&u.issuer===s.ISSUER.TRACKING?tl.getAsImage(i,u,v):this.getAsXHR(i,u,v)}}],[{key:"supported",value:function(){return!!new s().xhrRequest()}}]),s}(jb);Jb.ISSUER={},Jb.ISSUER.TRACKING="TrackingURLHandler",Jb.ISSUER.TAG="URLHandler",Jb.DEFAULT_TIMEOUT=4;var ul=function(){function o(){la(this,o)}return ma(o,[{key:"xdrRequest",value:function(){return window.XDomainRequest?new window.XDomainRequest:null}},{key:"get",value:function(s,p,i){if(typeof window.ActiveXObject!="function")i();else{var u=new window.ActiveXObject("b");u.async=!1;var v=this.xdrRequest();v.open("GET",s),v.timeout=p.timeout||0,v.withCredentials=p.withCredentials!==!1,v.onprogress=function(){},v.onload=function(){u.loadXML(v.responseText),i(null,u)},v.send()}}}],[{key:"supported",value:function(){return!!new o().xdrRequest()}}]),o}(),mq=Math.min,oh=[].lastIndexOf,vl=!!oh&&0>1/[1].lastIndexOf(1,-0),nq=Hc("lastIndexOf"),oq=Fb("indexOf",{ACCESSORS:!0,1:0}),ph=!vl&&nq&&oq?oh:function(o){if(vl)return oh.apply(this,arguments)||0;var s=lb(this),p=Ra(s.length),i=p-1;for(1<arguments.length&&(i=mq(i,Pb(arguments[1]))),0>i&&(i=p+i);0<=i;i--)if(i in s&&s[i]===o)return i||0;return-1};Y({target:"Array",proto:!0,forced:ph!==[].lastIndexOf},{lastIndexOf:ph});var qh=function(o){function s(){la(this,s);var i=p.call(this);return i.issuer=Jb.ISSUER.TAG,i}ya(s,o);var p=xa(s);return ma(s,[{key:"get",value:function(i,u,v){var m=v,S=u;if(v||(typeof u=="function"&&(m=u),S=Ba.create(Ba.GLOBAL_CONFIG)),!m)return null;if(S.issuer=this.issuer,S.enrichment&&(i=S.enrichment.apply(i)),i&&i.indexOf("//")===0&&(i=Rd(i)),u=S.urlhandler,S.response)m(null,Oe(S.response));else return u&&u.supported()?new u().get(i,S,m):Jb.supported()?new Jb().get(i,S,m):ul.supported()?new ul().get(i,S,m):m();return null}}]),s}(jb),rh=function(o){function s(){la(this,s);var i=p.call(this);return i.issuer=Jb.ISSUER.TRACKING,i}ya(s,o);var p=xa(s);return ma(s,[{key:"track",value:function(i,u){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;i&&0<i.length&&Array.isArray(i)?this._getMultiple(i,u,v):this.debug.info("[TrackingURLHandler] Call to track() without trackers:",i)}},{key:"_getMultiple",value:function(i,u){var v=this,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;i.forEach(function(S){S.requested=!0,S.url&&v.get(S.url,u,(m||v._onResponse).bind(v,S))})}},{key:"_onResponse",value:function(i,u){u&&this.debug.warn("[TrackingURLHandler] Call tracker failed ",u.name,u,i)}}]),s}(qh),lf=function(o){function s(i,u,v){la(this,s);var m=p.call(this);return m.player=u,m.globalConfig=v,m.adSlotAPI=i,m.eventHandlers=[],m.currentAdBreak=null,m.environmentVars=null,m}ya(s,o);var p=xa(s);return ma(s,[{key:"initAdSlot",value:function(i){var u=this,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};i.requested=!0,this.debug.info("[AdBreakController] Request core to init Ad Break",i.breakId,i.breakType,i.type),this.currentAdBreak=i,this.environmentVars=v;var m=i.adSource.type===xc.TYPE.AD_TAG_URI?"tag":"response",S=Ba.create(Ba.AD_BREAK);return S.type=i.type,S.adBreakPosition=i.breakPosition,S[m]=i.adSource.source,S=Object.assign(S,i.separationClips),this.currentAdBreak.enrichment=new Mc,this.currentAdBreak.enrichment.setFromObject(this.environmentVars.vastMacros),this.currentAdBreak.adReinsertion=new sa(this.globalConfig.adReinsertion,this.currentAdBreak.enrichment),this.on(),new Promise(function(P,x){u.adSlotAPI.initAdSlot(S,v).then(function(){u.debug.info("[AdBreakController] Initialized ad slot with adBreak",i.breakId),P(i)}).catch(function(w){u.debug.warn("[AdBreakController] Could not init ad slot",w),x(w)})})}},{key:"startAdSlot",value:function(){var i=this.currentAdBreak;this.debug.info("[AdBreakController] Start ad slot",i.breakId,i.timeOffset,i.prefetchOffset,this.player.getCurrentTime()),this.adSlotAPI.startAdSlot()}},{key:"on",value:function(){var i=this;this.off();var u=[this.adSlotAPI.addEventListener(A.ON_AD_SLOT_START,function(){i._trackEvent(Vc.VMAP.ON_AD_BREAK_START)}),this.adSlotAPI.addEventListener(A.ON_AD_SLOT_STOPPED,function(){i._trackEvent(Vc.VMAP.ON_AD_BREAK_END)}),this.adSlotAPI.addEventListener(A.ON_AD_SLOT_STOPPED,function(){i.off()}),this.adSlotAPI.addEventListener(A.ON_AD_MANIFEST_LOAD_ERROR,function(){i.currentAdBreak.enrichment.set("ERRORCODE",s.ERROR_CODE_MAP[i.adSlotAPI.error.code]||i.adSlotAPI.error.code),i._trackEvent(Vc.VMAP.ON_AD_BREAK_ERROR)}),this.adSlotAPI.addEventListener(A.ON_AD_ERROR,function(){i.currentAdBreak.enrichment.set("ERRORCODE",i.adSlotAPI.ad.error.code||i.adSlotAPI.error.code),i._trackEvent(Vc.VMAP.ON_AD_BREAK_ERROR)})];this.eventHandlers=this.eventHandlers.concat(u),this.debug.info("[AdBreakController] Subscribed to ad slot events. Current list",this.eventHandlers)}},{key:"off",value:function(){this.debug.info("[AdBreakController] Unsubscribe event listeners. Current list",this.eventHandlers),this.eventHandlers.forEach(function(i){i()}),this.eventHandlers=[]}},{key:"_trackEvent",value:function(i){this._callTrackers(this.currentAdBreak.trackingEvents[i])}},{key:"_callTrackers",value:function(i){var u=this;if(!i||1>i.length)this.debug.info("[AdBreakController] Requested trackers without URIs",i);else{this.currentAdBreak.enrichment.set("PLAYERSIZE",this.player.getPlayerSize().boundingRect);var v={adReinsertion:this.currentAdBreak.adReinsertion,enrichment:this.currentAdBreak.enrichment,timeouts:this.environmentVars.timeouts,urlhandler:this.environmentVars.urlhandler};new rh().track(i,v,function(m,S){S&&u.debug.warn("[AdBreakController] Call tracker failed ",S,m)})}}}]),s}(eb);lf.ERROR_CODE_MAP={},lf.ERROR_CODE_MAP[21]=1008,lf.ERROR_CODE_MAP[22]=1007;var mf=function(o){function s(i,u){la(this,s);var v=p.call(this);return v.adBreakController=null,v.adPlaylist=i.getAdPlaylist(),v.adSlotAPI=null,v.contentDuration=1/0,v.contentFinished=!1,v.playlistComplete=!1,v.eventHandlers=[],v.globalConfig=u,v.player=null,v.playableAdBreaks=[],v}ya(s,o);var p=xa(s);return ma(s,[{key:"setAdsAPI",value:function(i){this.adSlotAPI=i}},{key:"setPlayer",value:function(i){this.player=i}},{key:"dispatchFinishedEvents",value:function(){this.dispatchEvent(Db.ON_AD_PLAYLIST_STOPPED),this.dispatchEvent(Db.ON_AD_PLAYLIST_COMPLETE)}},{key:"waitForAdSlotComplete",value:function(){var i=this;this.adSlotAPI.addEventListener(A.ON_AD_SLOT_COMPLETE,function(){i.dispatchFinishedEvents()})}},{key:"beforeContent",value:function(){var i=this;return this.contentFinished=!1,this.adSlotAPI?(this.debug.info("[AdPlaylistController] Look for AdBreaks to play before the content."),this.dispatchEvent(Db.ON_AD_PLAYLIST_STARTED),this.requestAdBreak(0).then(function(){i.deliverAdBreak(),i.startContent()}).catch(function(u){i.debug.info("[AdPlaylistController] Found no matching AdBreak.",u),i.startContent()})):Promise.reject("[AdPlaylistController] Unable to execute the before process. Publisher API not set.")}},{key:"startContent",value:function(){var i=this;this.adSlotAPI.addEventListener(A.ON_AD_SLOT_COMPLETE,function(){i.on()}),this.contentFinished=!1,this.contentDuration=this.player.getDuration(),this.debug.info("[AdPlaylistController] Look for AdBreaks to play during content playback."),this.on()}},{key:"afterContent",value:function(){return this.contentFinished=!0,this.debug.info("[AdPlaylistController] Look for AdBreaks to play after the content."),0<this.playableAdBreaks.length?(this.playlistComplete=!0,this.waitForAdSlotComplete(),this.deliverAdBreak(),Promise.resolve()):(this.adSlotAPI.slot!==null||this.playlistComplete||this.dispatchFinishedEvents(),Promise.resolve())}},{key:"stop",value:function(){this.off(),this.dispatchFinishedEvents()}},{key:"requestAdBreak",value:function(i){var u=this;if(this.player&&this.player.isSeeking===!0)return Promise.resolve();var v=this.find(i),m=v.shift();return v.forEach(function(S){S.requested=!0}),m&&this.playableAdBreaks.length&&(m.requested=!0),new Promise(function(S,P){m&&!m.requested?(u.adBreakController=new lf(u.adSlotAPI,u.player,u.globalConfig),u.adBreakController.initAdSlot(m,u.player.getEnvironmentVars(m.type)).then(function(x){u.debug.info("[AdPlaylistController] Initialized AdBreak",x.timeOffset),m.force?(m.force=!1,u.waitForAdSlotComplete(),u.adBreakController.startAdSlot(m)):u.playableAdBreaks.push(x),S()}).catch(function(x){u.debug.warn("[AdPlaylistController] Failed to initialize ",m.timeOffset,x),P(x)})):P("[AdPlaylistController] Could not find an AdBreak with timeOffset "+i)})}},{key:"deliverAdBreak",value:function(){if(this.playableAdBreaks.length!==0&&this.isExecutableAdBreak(this.playableAdBreaks[0],this.player.getCurrentTime(),s.PROCESS.DELIVERY)){var i=this.playableAdBreaks.shift();this.duplicateAdBreak(i),this.debug.info("[AdPlaylistController] Start AdBreak",i.timeOffset),this.adBreakController.startAdSlot(i)}}},{key:"find",value:function(i){var u=this;return isNaN(i)?[]:this.adPlaylist.filter(function(v){if(v.requested)return!1;var m=i;return 0<v.prefetchOffset&&(m+=v.prefetchOffset),u.isExecutableAdBreak(v,m)})}},{key:"isExecutableAdBreak",value:function(i,u){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:s.PROCESS.REQUEST;return-1<i.timeOffset.indexOf("%")?(v=this.contentDuration*parseFloat(i.timeOffset)/100,u>=v):i.timeOffset==="start"?0<=u:this.contentFinished&&i.timeOffset==="end"&&v===s.PROCESS.DELIVERY?!0:i.timeOffset!=="end"||i.requested||v!==s.PROCESS.REQUEST?(v=ua.convertTimeStringToSeconds(i.timeOffset))&&u>=v:(u>=this.contentDuration&&(i.prefetchOffset===0||!i.prefetchOffset)&&(i.force=!0),u>=this.contentDuration)}},{key:"duplicateAdBreak",value:function(i){if(!(0>=i.repeatAfter)){var u=this.player.getCurrentTime()+i.repeatAfter,v=i.adBreakXML.cloneNode(!0);v.setAttribute("timeOffset",Ne(u)),this.adPlaylist.push(new gf(v,i.publisherSpecs)),this.debug.info("[AdPlaylistController] Updated adPlaylist with cloned AdBreak",this.adPlaylist.slice(0))}}},{key:"on",value:function(){var i=this;this.off();var u=Date.now(),v=0,m=0;this.addPlayerEventListener("timeupdate",function(){if(!i.adSlotAPI.slot||!i.adSlotAPI.ad.isLinear){var S=i.player.getCurrentTime(),P=S-v,x=(Date.now()-u)/1e3;P>x+.075||2<P?(i.player.isSeeking=!0,m=0):5<=m&&(i.player.isSeeking=!1),m=Math.min(m+1,5),v=S,u=Date.now(),i.requestAdBreak(i.player.getCurrentTime()).catch(function(){}),i.deliverAdBreak()}}),this.addPlayerEventListener("ended",function(){i.adSlotAPI.slot&&i.adSlotAPI.ad.isLinear||i.afterContent()}),this.debug.info("[AdPlaylistController] Subscribed to player and core events.",this.eventHandlers)}},{key:"off",value:function(){this.debug.info("[AdPlaylistController] Unsubscribe event listeners. Current list",this.eventHandlers),this.eventHandlers.forEach(function(i){i()}),this.eventHandlers=[]}},{key:"addPlayerEventListener",value:function(i,u){function v(){return m.removePlayerEventListener(i,u)}var m=this;return this.player.addEventListener(i,u),this.eventHandlers.push(v),v}},{key:"removePlayerEventListener",value:function(i,u){this.player.removeEventListener(i,u)}}]),s}(eb);mf.PROCESS={},mf.PROCESS.REQUEST="AdPlaylistController::request",mf.PROCESS.DELIVERY="AdPlaylistController::delivery";var pq=function(o){function s(i,u){la(this,s);var v=p.call(this);return v._consentAPI=i,v._callback=u,v._version=1,v.debug.warn("[TCFAPI__CMP] constructor, api found at",v._consentAPI),v}ya(s,o);var p=xa(s);return ma(s,[{key:"getConsent",value:function(){var i=this;this._consentAPI("getConsentData",this._version,function(u){i._onConsentData(u)})}},{key:"_onConsentData",value:function(i){this._consentData=i.consentData,this._gdprApplies=i.gdprApplies,this.debug.info("[TCFAPI__CMP] _onConsentData, eventData:",i),this._callback()}},{key:"consentData",get:function(){return this._consentData}},{key:"gdprApplies",get:function(){return this._gdprApplies}}]),s}(eb),qq=function(o){function s(i,u){la(this,s);var v=p.call(this);return v._consentAPI=i,v._callback=u,v._version=2,v.debug.warn("[TCFAPI__TCF] constructor, api found at",v._consentAPI),v}ya(s,o);var p=xa(s);return ma(s,[{key:"getConsent",value:function(){var i=this;this._consentAPI("getTCData",this._version,function(u){i._onConsentData(u)})}},{key:"_onConsentData",value:function(i){this._consentData=i.tcString,this._gdprApplies=i.gdprApplies,this.debug.info("[TCFAPI__TCF] _onConsentData, eventData:",i),this._callback()}},{key:"consentData",get:function(){return this._consentData}},{key:"gdprApplies",get:function(){return this._gdprApplies}}]),s}(eb),wl=function(o){function s(i){la(this,s);var u=p.call(this);u._enrichment=i;try{u._tcfAPI=window.top.__tcfapi,u._cmpAPI=window.top.__cmp}catch(v){u.debug.warn("[TCFAPI] no window?",v)}return u._hasTCF()?u._api=new qq(u._tcfAPI,u._setMacro.bind(Pd(u))):u._hasCMP()&&(u._api=new pq(u._cmpAPI,u._setMacro.bind(Pd(u)))),u._api?u._api.getConsent():u.debug.warn("[TCFAPI] Site has no API support"),u}ya(s,o);var p=xa(s);return ma(s,[{key:"consentData",get:function(){return(this._api||{}).consentData}},{key:"gdprApplies",get:function(){return(this._api||{}).gdprApplies}},{key:"_hasTCF",value:function(){return typeof this._tcfAPI=="function"}},{key:"_hasCMP",value:function(){return typeof this._cmpAPI=="function"}},{key:"_setMacro",value:function(){this.debug.info("[TCFAPI] setMacro() consentData",this._api.consentData,"gdprApplies",this._api.gdprApplies),this._enrichment&&this._api.gdprApplies&&(this._enrichment.set("GDPRCONSENT",this._api.consentData),this._enrichment.set("REGULATIONS","GDPR"))}}]),s}(eb),rq=function(o){function s(i){la(this,s);var u=p.call(this);return u._callbackOnDoneLoading=null,u.setOptions(i),u}ya(s,o);var p=xa(s);return ma(s,[{key:"setOptions",value:function(i){this._blockInsecureURL=i.blockInsecureURL||!1,this._maxWrapperDepth=i.maxWrapperDepth||10,this._wrapperChainTimeout=1e3*i.timeouts.adRequestChain,this._adSlotTimeout=1e3*i.timeouts.adSlotRequest,i.urlRequestObserver.requestTime=Date.now(),this._urlHandlerOptions=i}},{key:"requestXML",value:function(i,u){this._callbackOnDoneLoading=u,this.returnVMAP(i)}},{key:"requestURL",value:function(i,u){var v=this;if(this.debug.info("[VMAPRequestService] Request URL",i),this._callbackOnDoneLoading=u,this._isInsecureURL(i)){var m=document.createDocumentFragment();return this._flagDocWithError(m,310,"Mixed Content: The request has been blocked and must be served over HTTPS."),this.returnVMAP(m)}return this._loadURL(i).then(function(S){v.returnVMAP(S)})}},{key:"returnVMAP",value:function(i){var u=i,v=document.createDocumentFragment();0<i.querySelectorAll("VMAP").length&&i.querySelectorAll("AdBreak").length===0&&(this._flagDocWithError(v,1009,"The response does not contain any valid ads."),u=v),i.querySelectorAll("VMAP").length===0&&i.querySelectorAll("_error").length===0&&(this._flagDocWithError(v,1004,"General ad response document error"),u=v),this._callbackOnDoneLoading(u)}},{key:"_loadURL",value:function(i){var u=this;return this._urlHandlerOptions.response=null,new Promise(function(v){new qh().get(i,u._urlHandlerOptions,function(m,S){if(!m&&S&&S.querySelector("parsererror")){var P=document.createDocumentFragment();u._flagDocWithError(P,1006,"Ad response document extraction or parsing error"),v(P)}m&&!S?(P=document.createDocumentFragment(),u.debug.warn("[VMAPRequestService] XHR Request Error",m),u._flagDocWithError(P,m.code,m.description),v(P)):v(S)})})}},{key:"_isInsecureURL",value:function(i){return this._blockInsecureURL&&!mj(i)}},{key:"_flagDocWithError",value:function(i,u,v){var m=document.createElement("_error");m.setAttribute("code",u),m.setAttribute("description",v),i.appendChild(m)}}]),s}(eb),xl=function(o){function s(){return la(this,s),p.apply(this,arguments)}ya(s,o);var p=xa(s);return ma(s,[{key:"xhrRequest",value:function(){var i=new XMLHttpRequest;return"withCredentials"in i?i:null}},{key:"getAsXHR",value:function(i,u,v){u.adReinsertion?(i=u.adReinsertion.vendorAPI.stuffAdTag(i),i=u.adReinsertion.vendorAPI.getUrlRequest(i),i.data.homad_macros=JSON.stringify(u.enrichment.getIABMacroList()),this.debug.info("[HomadURLHandler] Provide VAST Macro List",i.data.homad_macros),u.adReinsertion.vendorAPI.loadFile(i,function(m){if(u.enrichment.set("BLOCKED",1),u.issuer&&u.issuer===Jb.ISSUER.TRACKING)v(null,null);else{var S=m.responseXML;!S&&m.responseText&&(S=Oe(m.responseText)),S?v(null,S):(m=Error("HomadXHRURLHandler: Response contains neither 'responseXML' nor 'responseText'"),m.code=100,m.description="HOMAD Response Error: Response contains neither 'responseXML' nor 'responseText'",v(m,null))}},function(m){if(m.timedOut){var S=Error("HomadUtilsURLHandler: Request timeout.");S.code=301,S.description="HOMADUtils XHR Timeout Error ".concat(u.timeouts.errorDescription||"Timeout of VAST URI provided in Wrapper element,or of VAST URI provided in a subsequent Wrapper element")}else S=Error("HomadUtilsURLHandler: "+m.statusText),S.code=100,S.description="HOMADUtils XHR Status Error (".concat(m.status,"): ").concat(m.statusText);v(S,null)},!1,!1,!1,1e3*u.timeouts.adRequest)):(i=Error("HomadXHRURLHandler: AdReinsertion setup omitted. HomadXHRURLHandler not activated."),i.code=301,i.description="HOMAD Activation Error: AdReinsertion setup omitted (publisher-side).",v(i,null))}},{key:"get",value:function(i){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},v=2<arguments.length?arguments[2]:void 0;u.timeouts||(u.timeouts=Ba.create(Ba.GLOBAL_CONFIG).timeouts),this.debug.info("[HomadURLHandler] Get with timeout ".concat(u.timeouts.adRequest," sec: ").concat(i)),this.getAsXHR(i,u,v)}}],[{key:"supported",value:function(){return!!new s().xhrRequest()}}]),s}(jb),yl=null,sq=function(o){function s(i,u){la(this,s);var v=p.call(this);return v.debug.info("[AdPlaylistAPI] Create AdPlaylistAPI with",u.globalConfig),v.player=i,v.globalConfig=u.globalConfig,v.environmentVars={},v.vmapSetup=null,v.adPlaylist=null,v.adPlaylistController=null,v.adSlotAPI=u,v._rawVMAP=null,v._error=null,v._timeouts=v.globalConfig.timeouts,v}ya(s,o);var p=xa(s);return ma(s,[{key:"initAdPlaylist",value:function(i){var u=this,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.environmentVars.vastMacros=this.environmentVars.vastMacros||{},this.environmentVars.vastMacros=Lc(this.environmentVars.vastMacros,v),this.debug.info("[AdPlaylistAPI] initAdPlaylist with",i,this.environmentVars),this.vmapSetup=i,this._timeouts=Lc(this._timeouts,this.environmentVars.timeouts||{}),this._error=null,i.response&&0<i.response.length&&(this.vmapSetup.responseXML=new DOMParser().parseFromString(i.response,"text/xml"));var m=null;v=new Mc,v.setFromObject(this.environmentVars.vastMacros),v.set("MEDIAMIME",this.environmentVars.desiredMimeTypes||Object.values(md)),yl=new sa(this.globalConfig.adReinsertion,v),this.environmentVars.vastMacros.GDPRCONSENT||new wl(v);var S={adReinsertion:yl,blockInsecureURL:this.globalConfig.blockInsecureURL,enrichment:v,response:this.vmapSetup.responseXML,timeouts:this._timeouts,urlhandler:this.globalConfig.urlhandler,withCredentials:!0,urlRequestObserver:{originTimeouts:Lc({},this._timeouts),initialTime:Date.now(),requestTime:0,responseTime:0}};return new Promise(function(P,x){m=u.addEventListener(Db.ON_AD_PLAYLIST_LOAD_ERROR,function(){return x(u._error)}),u.addEventListener(Db.ON_AD_PLAYLIST_LOADED,function(){return m(),u.adPlaylistController=new mf(u.adPlaylist,u.globalConfig),u.adPlaylistController.setPlayer(u.player),u.adPlaylistController.setAdsAPI(u.adSlotAPI),P("ok")});var w=new rq(S);i.tag?w.requestURL(i.tag,u.onXMLLoadDone.bind(u,S)):w.requestXML(S.response,u.onXMLLoadDone.bind(u,S))})}},{key:"onXMLLoadDone",value:function(i,u){function v(){if(m.adPlaylist.hasPlayableAdBreaks)m.dispatchEvent(Db.ON_AD_PLAYLIST_LOADED);else{var P=u.querySelector("_error");P=P?{code:parseInt(P.getAttribute("code"),10),description:P.getAttribute("description")}:{},m._setError(P.code||1009,P.description||"The response does not contain any valid ads."),m.dispatchEvent(Db.ON_AD_PLAYLIST_LOAD_ERROR)}}var m=this;this._rawVMAP=u,this.adPlaylist=new tp(u,this.vmapSetup);var S=this.adPlaylist.getAdPlaylist();this.debug.info("[AdPlaylistAPI] On VMAP loaded and parsed.",u),this.debug.table(S),i.adReinsertion.reinsertionReason?(this.debug.info("[AdPlaylistAPI] Found reason to enable AdReinsertion",i.adReinsertion.reinsertionReason),i.adReinsertion.enable(function(){i.adReinsertion.setReinsertionReason(null),m.debug.info("[AdPlaylistAPI] Override default URLHandler with HOMADURLHandler."),m.globalConfig.urlhandler=xl,m.initAdPlaylist(m.vmapSetup,m.environmentVars.vastMacros).catch(function(){v()})},function(P){m.debug.info("[AdPlaylistAPI] AdReinsertion remains disabled.",P),m._setError(P.code,P.description),v()})):v()}},{key:"startAdPlaylist",value:function(){var i=this;return this.dispatchEvent(Db.ON_AD_PLAYLIST_START),Object.keys(Db).forEach(function(u){i.adPlaylistController.addEventListener(Db[u],function(v){i.dispatchEvent(v.type)})}),new Promise(function(u,v){i.adPlaylistController.beforeContent().then(function(){u()}).catch(function(m){v(m)})})}},{key:"stopAdPlaylist",value:function(){return this.adPlaylistController.stop(),Promise.resolve()}},{key:"dispose",value:function(){return this.stopAdPlaylist(),Promise.resolve()}},{key:"error",get:function(){return this._error}},{key:"rawVMAP",get:function(){return this._rawVMAP}},{key:"_setError",value:function(i,u){this._error={code:i,timestamp:Date.now(),message:u}}}]),s}(eb),tq=Yf,uq=ia(function(){return!Object.getOwnPropertyNames(1)});Y({target:"Object",stat:!0,forced:uq},{getOwnPropertyNames:tq});var vq=ia(function(){Sb(1)});Y({target:"Object",stat:!0,forced:vq,sham:!fl},{getPrototypeOf:function(o){return Sb(ab(o))}});var wq=function(){function o(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};la(this,o),this.player=s,this.currentContentSource={},this.PLAYER_EVENT_MAP={ended:"ended",error:"error",playerPause:"pause",playerPlay:"playing",playerResize:"resize",loadeddata:"loadeddata",timeupdate:"timeupdate",volumeChanged:"volumechange"}}return ma(o,[{key:"handshakeVersion",value:function(){return"3.2"}},{key:"load",value:function(){}},{key:"addEventListener",value:function(){}},{key:"removeEventListener",value:function(){}},{key:"lockContent",value:function(){}},{key:"releaseContent",value:function(){}},{key:"getCurrentContentSource",value:function(){}},{key:"getCurrentTime",value:function(){}},{key:"getDuration",value:function(){}},{key:"getEnvironmentVars",value:function(){}},{key:"getError",value:function(){}},{key:"getPlayerSize",value:function(){}},{key:"getViewportSize",value:function(){}},{key:"getVideoElement",value:function(){}},{key:"getPlayerElement",value:function(){}},{key:"setVolume",value:function(){}},{key:"getVolume",value:function(){}},{key:"isMuted",value:function(){}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"isPaused",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}},{key:"seek",value:function(){}}]),o}(),zl=ri(!1),xq=ri(!0),yq=Hc("reduce"),zq=Fb("reduce",{1:0});Y({target:"Array",proto:!0,forced:!yq||!zq},{reduce:function(o){return zl(this,o,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Aq=function(){function o(s){la(this,o),this._totalCommercialsDuration=[-1],this._totalCommercialsCurrentTime=-1,this._currentTimeOffset=0,s&&this.setManifest(s)}return ma(o,[{key:"setManifest",value:function(s){s&&(this._adSlotManifest=s,this.collectCommercialsDuration())}},{key:"collectCommercialsDuration",value:function(){this._totalCommercialsDuration=[0];for(var s=0;s<this._adSlotManifest.length;s++){var p=this._adSlotManifest[s];p.info=p.info||{},p.isLinear&&(p.info.duration=p.duration),p.isLinear&&p.variant===cb.COMMERCIAL&&this._totalCommercialsDuration.push(p.info.duration)}this._totalCommercialsDuration.reduce(function(i,u){return i+u})===0&&(this._totalCommercialsDuration=[-1]),console.log("[AdSlotDelivery] Initial AdSlotTime.totalCommercialsDuration",this._totalCommercialsDuration.reduce(function(i,u){return i+u}))}},{key:"totalCommercialsDuration",get:function(){return this._totalCommercialsDuration.reduce(function(s,p){return s+p})}},{key:"setTotalCommercialsDuration",value:function(s){this._totalCommercialsDuration[0]===-1?this._totalCommercialsDuration[0]=s:this._totalCommercialsDuration.push(s)}},{key:"totalCommercialsCurrentTime",get:function(){return this._totalCommercialsCurrentTime}},{key:"setCommercialsCurrentTime",value:function(s){this._totalCommercialsCurrentTime=s}},{key:"currentTimeOffset",get:function(){return this._currentTimeOffset}},{key:"setCurrentTimeOffset",value:function(s){this._currentTimeOffset=s}}]),o}(),Bq=fd.onFreeze,sh=Object.freeze,Cq=ia(function(){sh(1)});Y({target:"Object",stat:!0,forced:Cq,sham:!fh},{freeze:function(o){return sh&&qa(o)?sh(Bq(o)):o}});var Al=Vb,Dq=ia(function(){Al(1)});Y({target:"Object",stat:!0,forced:!ta||Dq,sham:!ta},{getOwnPropertyDescriptor:function(o,s){return Al(lb(o),s)}}),Gi("iterator"),Y({target:"Object",stat:!0,sham:!ta},{create:wb}),Y({target:"Object",stat:!0,forced:!ta,sham:!ta},{defineProperties:Rg});var th=Ub("Reflect","construct"),Bl=ia(function(){function o(){}return!(th(function(){},[],o)instanceof o)}),Cl=!ia(function(){th(function(){})}),Dl=Bl||Cl;Y({target:"Reflect",stat:!0,forced:Dl,sham:Dl},{construct:function(o,s){Ab(o),Ia(s);var p=3>arguments.length?o:Ab(arguments[2]);if(Cl&&!Bl)return th(o,s,p);if(o==p){switch(s.length){case 0:return new o;case 1:return new o(s[0]);case 2:return new o(s[0],s[1]);case 3:return new o(s[0],s[1],s[2]);case 4:return new o(s[0],s[1],s[2],s[3])}return p=[null],p.push.apply(p,s),new(ok.apply(o,p))}p=p.prototype,p=wb(qa(p)?p:Object.prototype);var i=Function.apply.call(o,p,s);return qa(i)?i:p}}),bb&&Y({target:"Reflect",stat:!0},{setPrototypeOf:function(o,s){Ia(o),vi(s);try{return bb(o,s),!0}catch(p){return!1}}}),Y({target:"Object",stat:!0},{setPrototypeOf:bb});var Eq=fd.onFreeze,uh=Object.seal,Fq=ia(function(){uh(1)});Y({target:"Object",stat:!0,forced:Fq,sham:!fh},{seal:function(o){return uh&&qa(o)?uh(Eq(o)):o}});var vh=Object.isExtensible,Gq=ia(function(){vh(1)});Y({target:"Object",stat:!0,forced:Gq},{isExtensible:function(o){return qa(o)?vh?vh(o):!0:!1}});var nf=fd.getWeakData,Hq=Ma.set,Iq=Ma.getterFor,Jq=0;qi.prototype={get:function(o){if(o=Lf(this,o))return o[1]},has:function(o){return!!Lf(this,o)},set:function(o,s){var p=Lf(this,o);p?p[1]=s:this.entries.push([o,s])},delete:function(o){var s=Ok(this.entries,function(p){return p[0]===o});return~s&&this.entries.splice(s,1),!!~s}};var El={getConstructor:function(o,s,p,i){function u(S,P,x){var w=m(S),W=nf(Ia(P),!0);return W===!0?we(w).set(P,x):W[w.id]=x,S}var v=o(function(S,P){zb(S,v,s),Hq(S,{type:s,id:Jq++,frozen:void 0}),P!=null&&Fd(P,S[i],S,p)}),m=Iq(s);return gc(v.prototype,{delete:function(S){var P=m(this);if(!qa(S))return!1;var x=nf(S);return x===!0?we(P).delete(S):x&&ha(x,P.id)&&delete x[P.id]},has:function(S){var P=m(this);if(!qa(S))return!1;var x=nf(S);return x===!0?we(P).has(S):x&&ha(x,P.id)}}),gc(v.prototype,p?{get:function(S){var P=m(this);if(qa(S)){var x=nf(S);return x===!0?we(P).get(S):x?x[P.id]:void 0}},set:function(S,P){return u(this,S,P)}}:{add:function(S){return u(this,S,!0)}}),v}};uc(function(o){function s(w){return function(){return w(this,arguments.length?arguments[0]:void 0)}}var p=Ma.enforce,i=!T.ActiveXObject&&"ActiveXObject"in T,u=Object.isExtensible;if(o=o.exports=Nf("WeakMap",s,El),hk&&i){var v=El.getConstructor(s,"WeakMap",!0);fd.REQUIRED=!0,i=o.prototype;var m=i.delete,S=i.has,P=i.get,x=i.set;gc(i,{delete:function(w){if(qa(w)&&!u(w)){var W=p(this);return W.frozen||(W.frozen=new v),m.call(this,w)||W.frozen.delete(w)}return m.call(this,w)},has:function(w){if(qa(w)&&!u(w)){var W=p(this);return W.frozen||(W.frozen=new v),S.call(this,w)||W.frozen.has(w)}return S.call(this,w)},get:function(w){if(qa(w)&&!u(w)){var W=p(this);return W.frozen||(W.frozen=new v),S.call(this,w)?P.call(this,w):W.frozen.get(w)}return P.call(this,w)},set:function(w,W){if(qa(w)&&!u(w)){var Te=p(this);Te.frozen||(Te.frozen=new v),S.call(this,w)?x.call(this,w,W):Te.frozen.set(w,W)}else x.call(this,w,W);return this}})}});var Kq=ia(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});Y({target:"Date",proto:!0,forced:Kq},{toJSON:function(){var o=ab(this),s=Qb(o);return typeof s!="number"||isFinite(s)?o.toISOString():null}}),Y({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Lq=Hc("some"),Mq=Fb("some");Y({target:"Array",proto:!0,forced:!Lq||!Mq},{some:function(o){return Nk(this,o,1<arguments.length?arguments[1]:void 0)}});var Fl=uc(function(o,s){(function(p,i,u){if(ra(u)==="object"&&typeof u.nodeName!="string")i(p,u);else{var v,m;(function(){var S=function P(x){for(var w in x)x.hasOwnProperty(w)&&(x[w]=P(x[w]));return Object.freeze(x)};u={},v=["1.4.12-iab4299"],v.push("default"),i(p,u);for(m in u)u.hasOwnProperty(m)&&(Object.getOwnPropertyDescriptor(p,m)==null&&Object.defineProperty(p,m,{value:{}}),v.forEach(function(P){if(Object.getOwnPropertyDescriptor(p[m],P)==null){var x=S(u[m]);Object.defineProperty(p[m],P,{get:function(){return x},enumerable:!0})}}))})()}})(qb,function(p,i){function u(N){J("MediaEvents.adSession",N),this.adSessionId_=N.getAdSessionId();try{N.registerMediaEvents(),this.adSession=N}catch(j){throw Error("AdSession already has a media events instance registered")}}function v(N){J("AdEvents.adSession",N),this.adSessionId_=N.getAdSessionId();try{N.registerAdEvents(),this.adSession=N}catch(j){throw Error("AdSession already has an ad events instance registered")}}function m(N,j,$,Ve){this.isSkippable=N,this.skipOffset=j,this.isAutoPlay=$,this.position=Ve}function S(N,j,$){J("AdSession.context",N),this.adSessionId_=it(),this.context_=N,this.impressionOccurred_=!1;var Ve=this.context_.serviceWindow||void 0;if(!j){j=ct();var Xe=void 0;Xe=Xe===void 0?vt.isOmidPresent:Xe;var yt=at(j)?j.top:Tt.omidGlobal;yt=[j,yt],Ve&&yt.unshift(Ve);e:{Ve=Xe,Xe=Se.makeIterator(yt);for(var At=Xe.next();!At.done;At=Xe.next()){t:{yt=j,At=At.value;var Ot=dt,st=Ve;if(!pt(At))try{var nt=Mt(At,Ot);if(nt){var lt=new Vt(nt);break t}}catch(mt){}lt=st(At)?new P(yt,At):null}if(At=lt){j=At;break e}}j=null}}this.communication_=j,this.sessionInterface_=$||new x,this.isSessionRunning_=this.hasMediaEvents_=this.hasAdEvents_=!1,this.impressionType_=this.creativeType_=null,this.creativeLoaded_=!1,this.callbackMap_={},this.communication_&&(this.communication_.onMessage=this.handleInternalMessage_.bind(this)),this.setClientInfo_(),this.injectVerificationScripts_(N.verificationScriptResources),this.sendSlotElement_(N.slotElement),this.sendVideoElement_(N.videoElement),this.sendContentUrl_(N.contentUrl),this.watchSessionEvents_()}function P(N,j){j=j===void 0?Tt.omidGlobal:j,Te.call(this,j);var $=this;this.communicationType_="POST_MESSAGE",N.addEventListener("message",function(Ve){if(ra(Ve.data)==="object"){var Xe=Ve.data;z.isValidSerializedMessage(Xe)&&(Xe=z.deserialize(Xe),Ve.source&&$.handleMessage(Xe,Ve.source))}})}function x(N){N=N===void 0?Tt.omidGlobal:N,this.interfaceRoot_=N.omidSessionInterface}function w(N,j,$,Ve){$=$===void 0?null:$,Ve=Ve===void 0?null:Ve,J("Context.partner",N),this.partner=N,this.verificationScriptResources=j,this.videoElement=this.slotElement=null,this.contentUrl=$,this.customReferenceData=Ve,this.underEvaluation=!1,this.serviceWindow=null}function W(N,j,$,Ve){Ve=Ve===void 0?"full":Ve,G("VerificationScriptResource.resourceUrl",N),this.resourceUrl=N,this.vendorKey=j,this.verificationParameters=$,this.accessMode=Ve}function Te(N){this.to=N,this.communicationType_="NONE"}function z(N,j,$,Ve){this.guid=N,this.method=j,this.version=$,this.args=Ve}function G(N,j){if(!j)throw Error("Value for "+N+" is undefined, null or blank.");if(typeof j!="string"&&!(j instanceof String))throw Error("Value for "+N+" is not a string.");if(j.trim()==="")throw Error("Value for "+N+" is empty string.")}function J(N,j){if(j==null)throw Error("Value for "+N+" is undefined or null")}function _e(N,j){if(j==null)throw Error(N+" must not be null or undefined.");if(typeof j!="number"||isNaN(j))throw Error("Value for "+N+" is not a number")}function tt(N,j,$,Ve){if(_e(N,j),j<$||j>Ve)throw Error("Value for "+N+" is outside the range ["+$+","+Ve+"]")}function Ue(N,j){return N&&(N[j]||(N[j]={}))}function Ze(N,j,$){($=$===void 0?typeof i=="undefined"?null:i:$)&&(N=N.split("."),N.slice(0,N.length-1).reduce(Ue,$)[N[N.length-1]]=j)}function it(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(N){var j=16*Math.random()|0;return N=N==="y"?(j&3|8).toString(16):j.toString(16)})}function Qe(){var N=Se.getRestArguments.apply(0,arguments);We(function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat(Se.arrayFromIterable(N))))},function(){return console.error.apply(console,Se.arrayFromIterable(N))})}function We(N,j){typeof jasmine!="undefined"&&jasmine?N():typeof console!="undefined"&&console&&console.error&&j()}function Ye(N,j){N=N.split("-")[0].split("."),j=j.split("-")[0].split(".");for(var $=0;3>$;$++){var Ve=parseInt(N[$],10),Xe=parseInt(j[$],10);if(Ve>Xe)break;if(Ve<Xe)return!1}return!0}function at(N){return N!=null&&typeof N.top!="undefined"&&N.top!=null}function pt(N){if(N===Tt.omidGlobal)return!1;try{if(typeof N.location.hostname=="undefined")return!0}catch(j){return!0}return!1}function ct(N){return typeof N=="undefined"&&typeof window!="undefined"&&window&&(N=window),at(N)?N:Tt.omidGlobal}function ht(N,j){try{return N.frames&&!!N.frames[j]}catch($){return!1}}function gt(N,j){N.document.write('<iframe style="display:none" id="'+(j+'" name="'+j+'" sandbox></iframe>'))}function Mt(N,j){return j.reduce(function($,Ve){return $&&$[Ve]},N)}function Ct(N){for(var j=Se.makeIterator(It.keys()),$=j.next();!$.done;$=j.next()){$=$.value;for(var Ve=Se.makeIterator(It.get($)),Xe=Ve.next();!Xe.done;Xe=Ve.next())if(Xe.value.test(N))return $}return bt.VerificationVendorId.OTHER}var Se=Se||{};Se.scope={},Se.createTemplateTagFirstArg=function(N){return N.raw=N},Se.createTemplateTagFirstArgWithRaw=function(N,j){return N.raw=j,N},Se.arrayIteratorImpl=function(N){var j=0;return function(){return j<N.length?{done:!1,value:N[j++]}:{done:!0}}},Se.arrayIterator=function(N){return{next:Se.arrayIteratorImpl(N)}},Se.makeIterator=function(N){var j=typeof Symbol!="undefined"&&Symbol.iterator&&N[Symbol.iterator];if(j)return j.call(N);if(typeof N.length=="number")return Se.arrayIterator(N);throw Error(String(N)+" is not an iterable or ArrayLike")},Se.arrayFromIterator=function(N){for(var j,$=[];!(j=N.next()).done;)$.push(j.value);return $},Se.arrayFromIterable=function(N){return N instanceof Array?N:Se.arrayFromIterator(Se.makeIterator(N))},Se.ASSUME_ES5=!1,Se.ASSUME_NO_NATIVE_MAP=!1,Se.ASSUME_NO_NATIVE_SET=!1,Se.SIMPLE_FROUND_POLYFILL=!1,Se.ISOLATE_POLYFILLS=!1,Se.FORCE_POLYFILL_PROMISE=!1,Se.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Se.objectCreate=Se.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(N){function j(){}return j.prototype=N,new j},Se.defineProperty=Se.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(N,j,$){return N==Array.prototype||N==Object.prototype||(N[j]=$.value),N},Se.getGlobal=function(N){N=[(typeof globalThis=="undefined"?"undefined":ra(globalThis))=="object"&&globalThis,N,(typeof window=="undefined"?"undefined":ra(window))=="object"&&window,(typeof self=="undefined"?"undefined":ra(self))=="object"&&self,ra(qb)=="object"&&qb];for(var j=0;j<N.length;++j){var $=N[j];if($&&$.Math==Math)return $}throw Error("Cannot find global object")},Se.global=Se.getGlobal(this),Se.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&ra(Symbol("x"))==="symbol",Se.TRUST_ES6_POLYFILLS=!Se.ISOLATE_POLYFILLS||Se.IS_SYMBOL_NATIVE,Se.polyfills={},Se.propertyToPolyfillSymbol={},Se.POLYFILL_PREFIX="$jscp$",Se.polyfill=function(N,j,$,Ve){j&&(Se.ISOLATE_POLYFILLS?Se.polyfillIsolated(N,j,$,Ve):Se.polyfillUnisolated(N,j,$,Ve))},Se.polyfillUnisolated=function(N,j,$,Ve){for($=Se.global,N=N.split("."),Ve=0;Ve<N.length-1;Ve++){var Xe=N[Ve];if(!(Xe in $))return;$=$[Xe]}N=N[N.length-1],Ve=$[N],j=j(Ve),j!=Ve&&j!=null&&Se.defineProperty($,N,{configurable:!0,writable:!0,value:j})},Se.polyfillIsolated=function(N,j,$,Ve){var Xe=N.split(".");N=Xe.length===1,Ve=Xe[0],Ve=!N&&Ve in Se.polyfills?Se.polyfills:Se.global;for(var yt=0;yt<Xe.length-1;yt++){var At=Xe[yt];if(!(At in Ve))return;Ve=Ve[At]}Xe=Xe[Xe.length-1],$=Se.IS_SYMBOL_NATIVE&&$==="es6"?Ve[Xe]:null,j=j($),j!=null&&(N?Se.defineProperty(Se.polyfills,Xe,{configurable:!0,writable:!0,value:j}):j!==$&&(Se.propertyToPolyfillSymbol[Xe]===void 0&&($=1e9*Math.random()>>>0,Se.propertyToPolyfillSymbol[Xe]=Se.IS_SYMBOL_NATIVE?Se.global.Symbol(Xe):Se.POLYFILL_PREFIX+$+"$"+Xe),Se.defineProperty(Ve,Se.propertyToPolyfillSymbol[Xe],{configurable:!0,writable:!0,value:j})))},Se.getConstructImplementation=function(){function N(){function $(){}return Reflect.construct($,[],function(){}),new $ instanceof $}if(Se.TRUST_ES6_POLYFILLS&&typeof Reflect!="undefined"&&Reflect.construct){if(N())return Reflect.construct;var j=Reflect.construct;return function($,Ve,Xe){return $=j($,Ve),Xe&&Reflect.setPrototypeOf($,Xe.prototype),$}}return function($,Ve,Xe){return Xe===void 0&&(Xe=$),Xe=Se.objectCreate(Xe.prototype||Object.prototype),Function.prototype.apply.call($,Xe,Ve)||Xe}},Se.construct={valueOf:Se.getConstructImplementation}.valueOf(),Se.underscoreProtoCanBeSet=function(){var N={a:!0},j={};try{return j.__proto__=N,j.a}catch($){}return!1},Se.setPrototypeOf=Se.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:Se.underscoreProtoCanBeSet()?function(N,j){if(N.__proto__=j,N.__proto__!==j)throw new TypeError(N+" is not extensible");return N}:null,Se.inherits=function(N,j){if(N.prototype=Se.objectCreate(j.prototype),N.prototype.constructor=N,Se.setPrototypeOf){var $=Se.setPrototypeOf;$(N,j)}else for($ in j)if($!="prototype")if(Object.defineProperties){var Ve=Object.getOwnPropertyDescriptor(j,$);Ve&&Object.defineProperty(N,$,Ve)}else N[$]=j[$];N.superClass_=j.prototype},Se.getRestArguments=function(){for(var N=Number(this),j=[],$=N;$<arguments.length;$++)j[$-N]=arguments[$];return j},Se.polyfill("Reflect",function(N){return N||{}},"es6","es3"),Se.polyfill("Reflect.construct",function(){return Se.construct},"es6","es3"),Se.polyfill("Reflect.setPrototypeOf",function(N){if(N)return N;if(Se.setPrototypeOf){var j=Se.setPrototypeOf;return function($,Ve){try{return j($,Ve),!0}catch(Xe){return!1}}}return null},"es6","es5"),Se.initSymbol=function(){},Se.polyfill("Symbol",function(N){function j(Xe,yt){this.$jscomp$symbol$id_=Xe,Se.defineProperty(this,"description",{configurable:!0,writable:!0,value:yt})}if(N)return N;j.prototype.toString=function(){return this.$jscomp$symbol$id_};var $="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Ve=0;return function Xe(yt){if(this instanceof Xe)throw new TypeError("Symbol is not a constructor");return new j($+(yt||"")+"_"+Ve++,yt)}},"es6","es3"),Se.polyfill("Symbol.iterator",function(N){if(N)return N;N=Symbol("Symbol.iterator");for(var j="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),$=0;$<j.length;$++){var Ve=Se.global[j[$]];typeof Ve=="function"&&typeof Ve.prototype[N]!="function"&&Se.defineProperty(Ve.prototype,N,{configurable:!0,writable:!0,value:function(){return Se.iteratorPrototype(Se.arrayIteratorImpl(this))}})}return N},"es6","es3"),Se.iteratorPrototype=function(N){return N={next:N},N[Symbol.iterator]=function(){return this},N},Se.iteratorFromArray=function(N,j){N instanceof String&&(N+="");var $=0,Ve=!1,Xe={next:function(){if(!Ve&&$<N.length){var yt=$++;return{value:j(yt,N[yt]),done:!1}}return Ve=!0,{done:!0,value:void 0}}};return Xe[Symbol.iterator]=function(){return Xe},Xe},Se.polyfill("Array.prototype.keys",function(N){return N||function(){return Se.iteratorFromArray(this,function(j){return j})}},"es6","es3"),Se.owns=function(N,j){return Object.prototype.hasOwnProperty.call(N,j)},Se.polyfill("Object.values",function(N){return N||function(j){var $=[],Ve;for(Ve in j)Se.owns(j,Ve)&&$.push(j[Ve]);return $}},"es8","es3"),Se.checkEs6ConformanceViaProxy=function(){try{var N={},j=Object.create(new Se.global.Proxy(N,{get:function($,Ve,Xe){return $==N&&Ve=="q"&&Xe==j}}));return j.q===!0}catch($){return!1}},Se.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,Se.ES6_CONFORMANCE=Se.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&Se.checkEs6ConformanceViaProxy(),Se.polyfill("WeakMap",function(N){function j(nt){if(this.id_=(st+=Math.random()+1).toString(),nt){nt=Se.makeIterator(nt);for(var lt;!(lt=nt.next()).done;)lt=lt.value,this.set(lt[0],lt[1])}}function $(){if(!N||!Object.seal)return!1;try{var nt=Object.seal({}),lt=Object.seal({}),mt=new N([[nt,2],[lt,3]]);return mt.get(nt)!=2||mt.get(lt)!=3?!1:(mt.delete(nt),mt.set(lt,4),!mt.has(nt)&&mt.get(lt)==4)}catch($t){return!1}}function Ve(){}function Xe(nt){var lt=ra(nt);return lt==="object"&&nt!==null||lt==="function"}function yt(nt){if(!Se.owns(nt,Ot)){var lt=new Ve;Se.defineProperty(nt,Ot,{value:lt})}}function At(nt){if(!Se.ISOLATE_POLYFILLS){var lt=Object[nt];lt&&(Object[nt]=function(mt){return mt instanceof Ve?mt:(Object.isExtensible(mt)&&yt(mt),lt(mt))})}}if(Se.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(N&&Se.ES6_CONFORMANCE)return N}else if($())return N;var Ot="$jscomp_hidden_"+Math.random();At("freeze"),At("preventExtensions"),At("seal");var st=0;return j.prototype.set=function(nt,lt){if(!Xe(nt))throw Error("Invalid WeakMap key");if(yt(nt),!Se.owns(nt,Ot))throw Error("WeakMap key fail: "+nt);return nt[Ot][this.id_]=lt,this},j.prototype.get=function(nt){return Xe(nt)&&Se.owns(nt,Ot)?nt[Ot][this.id_]:void 0},j.prototype.has=function(nt){return Xe(nt)&&Se.owns(nt,Ot)&&Se.owns(nt[Ot],this.id_)},j.prototype.delete=function(nt){return Xe(nt)&&Se.owns(nt,Ot)&&Se.owns(nt[Ot],this.id_)?delete nt[Ot][this.id_]:!1},j},"es6","es3"),Se.MapEntry=function(){},Se.polyfill("Map",function(N){function j(){var st={};return st.previous=st.next=st.head=st}function $(st,nt){var lt=st.head_;return Se.iteratorPrototype(function(){if(lt){for(;lt.head!=st.head_;)lt=lt.previous;for(;lt.next!=lt.head;)return lt=lt.next,{done:!1,value:nt(lt)};lt=null}return{done:!0,value:void 0}})}function Ve(st,nt){var lt=nt&&ra(nt);lt=="object"||lt=="function"?At.has(nt)?lt=At.get(nt):(lt=""+ ++Ot,At.set(nt,lt)):lt="p_"+nt;var mt=st.data_[lt];if(mt&&Se.owns(st.data_,lt))for(st=0;st<mt.length;st++){var $t=mt[st];if(nt!==nt&&$t.key!==$t.key||nt===$t.key)return{id:lt,list:mt,index:st,entry:$t}}return{id:lt,list:mt,index:-1,entry:void 0}}function Xe(st){if(this.data_={},this.head_=j(),this.size=0,st){st=Se.makeIterator(st);for(var nt;!(nt=st.next()).done;)nt=nt.value,this.set(nt[0],nt[1])}}function yt(){if(Se.ASSUME_NO_NATIVE_MAP||!N||typeof N!="function"||!N.prototype.entries||typeof Object.seal!="function")return!1;try{var st=Object.seal({x:4}),nt=new N(Se.makeIterator([[st,"s"]]));if(nt.get(st)!="s"||nt.size!=1||nt.get({x:4})||nt.set({x:4},"t")!=nt||nt.size!=2)return!1;var lt=nt.entries(),mt=lt.next();return mt.done||mt.value[0]!=st||mt.value[1]!="s"?!1:(mt=lt.next(),!(mt.done||mt.value[0].x!=4||mt.value[1]!="t"||!lt.next().done))}catch($t){return!1}}if(Se.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(N&&Se.ES6_CONFORMANCE)return N}else if(yt())return N;var At=new WeakMap;Xe.prototype.set=function(st,nt){st=st===0?0:st;var lt=Ve(this,st);return lt.list||(lt.list=this.data_[lt.id]=[]),lt.entry?lt.entry.value=nt:(lt.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:st,value:nt},lt.list.push(lt.entry),this.head_.previous.next=lt.entry,this.head_.previous=lt.entry,this.size++),this},Xe.prototype.delete=function(st){return st=Ve(this,st),st.entry&&st.list?(st.list.splice(st.index,1),st.list.length||delete this.data_[st.id],st.entry.previous.next=st.entry.next,st.entry.next.previous=st.entry.previous,st.entry.head=null,this.size--,!0):!1},Xe.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=j(),this.size=0},Xe.prototype.has=function(st){return!!Ve(this,st).entry},Xe.prototype.get=function(st){return(st=Ve(this,st).entry)&&st.value},Xe.prototype.entries=function(){return $(this,function(st){return[st.key,st.value]})},Xe.prototype.keys=function(){return $(this,function(st){return st.key})},Xe.prototype.values=function(){return $(this,function(st){return st.value})},Xe.prototype.forEach=function(st,nt){for(var lt=this.entries(),mt;!(mt=lt.next()).done;)mt=mt.value,st.call(nt,mt[1],mt[0],this)},Xe.prototype[Symbol.iterator]=Xe.prototype.entries;var Ot=0;return Xe},"es6","es3");var Xt={LOADED:"loaded",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction"},xt={APP:"app",WEB:"web"};z.isValidSerializedMessage=function(N){return!!N&&N.omid_message_guid!==void 0&&N.omid_message_method!==void 0&&N.omid_message_version!==void 0&&typeof N.omid_message_guid=="string"&&typeof N.omid_message_method=="string"&&typeof N.omid_message_version=="string"&&(N.omid_message_args===void 0||N.omid_message_args!==void 0)},z.deserialize=function(N){return new z(N.omid_message_guid,N.omid_message_method,N.omid_message_version,N.omid_message_args)},z.prototype.serialize=function(){var N={};return N=(N.omid_message_guid=this.guid,N.omid_message_method=this.method,N.omid_message_version=this.version,N),this.args!==void 0&&(N.omid_message_args=this.args),N},Te.prototype.sendMessage=function(){},Te.prototype.handleMessage=function(N,j){this.onMessage&&this.onMessage(N,j)},Te.prototype.serialize=function(N){return JSON.stringify(N)},Te.prototype.deserialize=function(N){return JSON.parse(N)},Te.prototype.isDirectCommunication=function(){return this.communicationType_==="DIRECT"},Te.prototype.isCrossOrigin=function(){},Ze("OmidSessionClient.Partner",function(N,j){G("Partner.name",N),G("Partner.version",j),this.name=N,this.version=j}),W.prototype.toJSON=function(){return{accessMode:this.accessMode,resourceUrl:this.resourceUrl,vendorKey:this.vendorKey,verificationParameters:this.verificationParameters}},Ze("OmidSessionClient.VerificationScriptResource",W),w.prototype.setVideoElement=function(N){J("Context.videoElement",N),this.videoElement=N},w.prototype.setSlotElement=function(N){J("Context.slotElement",N),this.slotElement=N},w.prototype.setServiceWindow=function(N){J("Context.serviceWindow",N),this.serviceWindow=N},Ze("OmidSessionClient.Context",w);var Tt={};Tt.omidGlobal=function(){if(typeof p!="undefined"&&p)return p;if(typeof qb!="undefined"&&qb)return qb;if(typeof window!="undefined"&&window)return window;if(typeof globalThis!="undefined"&&globalThis)return globalThis;var N=Function("return this")();if(N)return N;throw Error("Could not determine global object context.")}();var Nt={sessionError:"reportError"},Kt=Object.keys(Xt).map(function(N){return Xt[N]}),Jt=["impressionOccurred"];x.prototype.isSupported=function(){return this.interfaceRoot_!=null},x.prototype.sendMessage=function(N,j,$){if(N=="registerSessionObserver"&&($=[j]),Nt[N]&&(N=Nt[N]),j=this.interfaceRoot_,0<=Jt.indexOf(N)&&(j=j.adEvents),0<=Kt.indexOf(N)&&(j=j.mediaEvents),j=j[N],!j)throw Error("Unrecognized method name: "+N+".");j.apply(null,Se.arrayFromIterable($))};var Vt=function N(j){Te.call(this,j),this.communicationType_="DIRECT",this.handleExportedMessage=N.prototype.handleExportedMessage.bind(this)};Se.inherits(Vt,Te),Vt.prototype.sendMessage=function(N,j){if(j=j===void 0?this.to:j,!j)throw Error("Message destination must be defined at construction time or when sending the message.");j.handleExportedMessage(N.serialize(),this)},Vt.prototype.handleExportedMessage=function(N,j){z.isValidSerializedMessage(N)&&this.handleMessage(z.deserialize(N),j)},Vt.prototype.isCrossOrigin=function(){return!1},Se.inherits(P,Te),P.isCompatibleContext=function(N){return!!(N&&N.addEventListener&&N.postMessage)},P.prototype.sendMessage=function(N,j){if(j=j===void 0?this.to:j,!j)throw Error("Message destination must be defined at construction time or when sending the message.");j.postMessage(N.serialize(),"*")},P.prototype.isCrossOrigin=function(){return this.to?pt(this.to):!0};var vt={OMID_PRESENT_FRAME_NAME:"omid_v1_present",OMID_PRESENT_FRAME_NAME_WEB:"omid_v1_present_web",OMID_PRESENT_FRAME_NAME_APP:"omid_v1_present_app",getEnvironmentIframeName:function(N){var j={};return(j[xt.APP]=vt.OMID_PRESENT_FRAME_NAME_APP,j[xt.WEB]=vt.OMID_PRESENT_FRAME_NAME_WEB,j)[N]},isOmidPresent:function(N){return[vt.OMID_PRESENT_FRAME_NAME,vt.OMID_PRESENT_FRAME_NAME_WEB,vt.OMID_PRESENT_FRAME_NAME_APP].some(function(j){return ht(N,j)})},getOmidEnvironment:function(N){for(var j=Se.makeIterator(Object.values(xt)),$=j.next();!$.done;$=j.next()){$=$.value;var Ve=vt.getEnvironmentIframeName($);if(ht(N,Ve))return $}return null},declareOmidPresence:function(N,j){N.frames&&N.document&&![vt.OMID_PRESENT_FRAME_NAME,vt.OMID_PRESENT_FRAME_NAME_WEB,vt.OMID_PRESENT_FRAME_NAME_APP].some(function($){return!!N.frames[$]})&&(N.document.body==null&&vt.isMutationObserverAvailable_(N)?vt.registerMutationObserver_(N,j):(j=vt.getEnvironmentIframeName(j),N.document.body?(vt.appendPresenceIframe_(N,vt.OMID_PRESENT_FRAME_NAME),vt.appendPresenceIframe_(N,j)):(gt(N,vt.OMID_PRESENT_FRAME_NAME),gt(N,j))))},appendPresenceIframe_:function(N,j){var $=N.document.createElement("iframe");$.id=j,$.name=j,$.style.display="none",$.sandbox="",N.document.body.appendChild($)},isMutationObserverAvailable_:function(N){return"MutationObserver"in N},registerMutationObserver_:function(N,j){var $=new MutationObserver(function(Ve){Ve.forEach(function(Xe){Xe.addedNodes[0].nodeName==="BODY"&&(Xe=vt.getEnvironmentIframeName(j),vt.appendPresenceIframe_(N,vt.OMID_PRESENT_FRAME_NAME),vt.appendPresenceIframe_(N,Xe),$.disconnect())})});$.observe(N.document.documentElement,{childList:!0})}},dt=["omid","v1_SessionServiceCommunication"];S.prototype.getAdSessionId=function(){return this.adSessionId_},S.prototype.setCreativeType=function(N){if(N==="definedByJavaScript")throw Error("Creative type cannot be redefined with value definedByJavaScript");if(this.impressionOccurred_)throw Error("Impression has already occurred");if(this.creativeLoaded_)throw Error("Creative has already loaded");if(this.creativeType_&&this.creativeType_!=="definedByJavaScript")throw Error("Creative type cannot be redefined");if(this.creativeType_===void 0)throw Error("Native integration is using OMID 1.2 or earlier");this.sendOneWayMessage("setCreativeType",N,this.adSessionId_),this.creativeType_=N},S.prototype.setImpressionType=function(N){if(N==="definedByJavaScript")throw Error("Impression type cannot be redefined with value definedByJavaScript");if(this.impressionOccurred_)throw Error("Impression has already occurred");if(this.creativeLoaded_)throw Error("Creative has already loaded");if(this.impressionType_&&this.impressionType_!=="definedByJavaScript")throw Error("Impression type cannot be redefined");if(this.impressionType_===void 0)throw Error("Native integration is using OMID 1.2 or earlier");this.sendOneWayMessage("setImpressionType",N,this.adSessionId_),this.impressionType_=N},S.prototype.isSupported=function(){return!!this.communication_||this.sessionInterface_.isSupported()},S.prototype.isSendingElementsSupported_=function(){return this.communication_?this.communication_.isDirectCommunication():this.sessionInterface_.isSupported()},S.prototype.registerSessionObserver=function(N){this.sendMessage("registerSessionObserver",N,this.adSessionId_)},S.prototype.start=function(){this.sendOneWayMessage("startSession",{customReferenceData:this.context_.customReferenceData,underEvaluation:this.context_.underEvaluation},this.adSessionId_)},S.prototype.finish=function(){this.sendOneWayMessage("finishSession",this.adSessionId_)},S.prototype.error=function(N,j){this.sendOneWayMessage("sessionError",N,j,this.adSessionId_)},S.prototype.registerAdEvents=function(){if(this.hasAdEvents_)throw Error("AdEvents already registered.");this.hasAdEvents_=!0,this.sendOneWayMessage("registerAdEvents",this.adSessionId_)},S.prototype.registerMediaEvents=function(){if(this.hasMediaEvents_)throw Error("MediaEvents already registered.");this.hasMediaEvents_=!0,this.sendOneWayMessage("registerMediaEvents",this.adSessionId_)},S.prototype.sendOneWayMessage=function(N){var j=Se.getRestArguments.apply(1,arguments);this.sendMessage.apply(this,[N,null].concat(Se.arrayFromIterable(j)))},S.prototype.sendMessage=function(N,j){var $=Se.getRestArguments.apply(2,arguments);this.communication_?this.sendInternalMessage_(N,j,$):this.sessionInterface_.isSupported()&&this.sendInterfaceMessage_(N,j,$)},S.prototype.sendInternalMessage_=function(N,j,$){var Ve=it();j&&(this.callbackMap_[Ve]=j),N="SessionService."+N,$=/\d+\.\d+\.\d+(-.*)?/.test("1.4.12-iab4299")&&Ye("1.4.12-iab4299","1.0.3")?$:JSON.stringify($),N=new z(Ve,N,"1.4.12-iab4299",$),this.communication_.sendMessage(N)},S.prototype.handleInternalMessage_=function(N,j){j=N.method;var $=N.guid;if(N=N.args,j==="response"&&this.callbackMap_[$]){var Ve=N;Ve=/\d+\.\d+\.\d+(-.*)?/.test("1.4.12-iab4299")&&Ye("1.4.12-iab4299","1.0.3")?Ve||[]:Ve&&typeof Ve=="string"?JSON.parse(Ve):[],this.callbackMap_[$].apply(this,Ve)}j==="error"&&window.console&&Qe(N)},S.prototype.sendInterfaceMessage_=function(N,j,$){try{this.sessionInterface_.sendMessage(N,j,$)}catch(Ve){Qe("Failed to communicate with SessionInterface with error:"),Qe(Ve)}},S.prototype.assertSessionRunning=function(){if(!this.isSessionRunning_)throw Error("Session not started.")},S.prototype.impressionOccurred=function(){if(this.creativeType_==="definedByJavaScript")throw Error("Creative type has not been redefined");if(this.impressionType_==="definedByJavaScript")throw Error("Impression type has not been redefined");this.impressionOccurred_=!0},S.prototype.creativeLoaded=function(){if(this.creativeType_==="definedByJavaScript")throw Error("Creative type has not been redefined");if(this.impressionType_==="definedByJavaScript")throw Error("Impression type has not been redefined");this.creativeLoaded_=!0},S.prototype.setClientInfo_=function(){this.sendOneWayMessage("setClientInfo","1.4.12-iab4299",this.context_.partner.name,this.context_.partner.version,this.adSessionId_)},S.prototype.injectVerificationScripts_=function(N){N&&(N=N.map(function(j){return j.toJSON()}),this.sendOneWayMessage("injectVerificationScriptResources",N,this.adSessionId_))},S.prototype.sendSlotElement_=function(N){this.sendElement_(N,"setSlotElement")},S.prototype.sendVideoElement_=function(N){this.sendElement_(N,"setVideoElement")},S.prototype.sendElement_=function(N,j){N&&(this.isSendingElementsSupported_()?this.sendOneWayMessage(j,N,this.adSessionId_):this.error("generic","Session Client "+j+" called when communication is cross-origin"))},S.prototype.sendContentUrl_=function(N){N&&this.sendOneWayMessage("setContentUrl",N,this.adSessionId_)},S.prototype.setElementBounds=function(N){J("AdSession.elementBounds",N),this.sendOneWayMessage("setElementBounds",N,this.adSessionId_)},S.prototype.watchSessionEvents_=function(){var N=this;this.registerSessionObserver(function(j){j.type==="sessionStart"&&(N.isSessionRunning_=!0,N.creativeType_=j.data.creativeType,N.impressionType_=j.data.impressionType),j.type==="sessionFinish"&&(N.isSessionRunning_=!1)})},Ze("OmidSessionClient.AdSession",S),m.prototype.toJSON=function(){return{isSkippable:this.isSkippable,skipOffset:this.skipOffset,isAutoPlay:this.isAutoPlay,position:this.position}},v.prototype.impressionOccurred=function(){this.adSession.assertSessionRunning(),this.adSession.impressionOccurred(),this.adSession.sendOneWayMessage("impressionOccurred",this.adSessionId_)},v.prototype.loaded=function(N){N=N===void 0?null:N,this.adSession.creativeLoaded(),N=N?N.toJSON():null,this.adSession.sendOneWayMessage("loaded",N,this.adSessionId_)},Ze("OmidSessionClient.AdEvents",v),u.prototype.start=function(N,j){_e("MediaEvents.start.duration",N),tt("MediaEvents.start.mediaPlayerVolume",j,0,1),this.adSession.sendOneWayMessage("start",N,j,this.adSessionId_)},u.prototype.firstQuartile=function(){this.adSession.sendOneWayMessage("firstQuartile",this.adSessionId_)},u.prototype.midpoint=function(){this.adSession.sendOneWayMessage("midpoint",this.adSessionId_)},u.prototype.thirdQuartile=function(){this.adSession.sendOneWayMessage("thirdQuartile",this.adSessionId_)},u.prototype.complete=function(){this.adSession.sendOneWayMessage("complete",this.adSessionId_)},u.prototype.pause=function(){this.adSession.sendOneWayMessage("pause",this.adSessionId_)},u.prototype.resume=function(){this.adSession.sendOneWayMessage("resume",this.adSessionId_)},u.prototype.bufferStart=function(){this.adSession.sendOneWayMessage("bufferStart",this.adSessionId_)},u.prototype.bufferFinish=function(){this.adSession.sendOneWayMessage("bufferFinish",this.adSessionId_)},u.prototype.skipped=function(){this.adSession.sendOneWayMessage("skipped",this.adSessionId_)},u.prototype.volumeChange=function(N){tt("MediaEvents.volumeChange.mediaPlayerVolume",N,0,1),this.adSession.sendOneWayMessage("volumeChange",N,this.adSessionId_)},u.prototype.playerStateChange=function(N){J("MediaEvents.playerStateChange.playerState",N),this.adSession.sendOneWayMessage("playerStateChange",N,this.adSessionId_)},u.prototype.adUserInteraction=function(N){J("MediaEvents.adUserInteraction.interactionType",N),this.adSession.sendOneWayMessage("adUserInteraction",N,this.adSessionId_)},Ze("OmidSessionClient.MediaEvents",u),Ze("OmidSessionClient.OmidVersion",function(N,j){G("OmidVersion.semanticVersion",N),G("OmidVersion.apiLevel",j)}),Ze("OmidSessionClient.listenForServiceWindow",function(N){var j=ct();new P(j).onMessage=function($,Ve){$.method==="identifyServiceWindow"&&N(Ve)}}),Ze("OmidSessionClient.VastProperties",m);var bt={VerificationVendorId:{OTHER:1,MOAT:2,DOUBLEVERIFY:3,INTEGRAL_AD_SCIENCE:4,PIXELATE:5,NIELSEN:6,COMSCORE:7,MEETRICS:8,GOOGLE:9}},It=new Map([[bt.VerificationVendorId.MOAT,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.moatads\.com\/.*$/]],[bt.VerificationVendorId.DOUBLEVERIFY,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.doubleverify\.com\/.*$/,/^(https?:\/\/|\/\/)?c\.[\w\-]+\.com\/vfw\/dv\/.*$/,/^(https?:\/\/|\/\/)?(www\.)?[\w]+\.tv\/r\/s\/d\/.*$/,/^(https?:\/\/|\/\/)?(\w\.?)+\.dv\.tech\/.*$/]],[bt.VerificationVendorId.INTEGRAL_AD_SCIENCE,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.adsafeprotected\.com\/.*$/]],[bt.VerificationVendorId.PIXELATE,[/^https?:\/\/(q|cdn)\.adrta\.com\/s\/.*\/(aa|aanf)\.js.*$/,/^https:\/\/cdn\.rta247\.com\/s\/.*\/(aa|aanf)\.js.*$/]],[bt.VerificationVendorId.NIELSEN,[]],[bt.VerificationVendorId.COMSCORE,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.voicefive\.com\/.*$/,/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.measuread\.com\/.*$/,/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.scorecardresearch\.com\/.*$/]],[bt.VerificationVendorId.MEETRICS,[/^(https?:\/\/|\/\/)?s418\.mxcdn\.net\/bb-serve\/omid-meetrics.*\.js$/]],[bt.VerificationVendorId.GOOGLE,[/^(https?:\/\/|\/\/)?pagead2\.googlesyndication\.com\/.*$/,/^(https?:\/\/|\/\/)?www\.googletagservices\.com\/.*$/]]]);Ze("OmidSessionClient.verificationVendorIdForScriptUrl",Ct),Ze("OmidSessionClient.VerificationVendorId",bt.VerificationVendorId),bt.verificationVendorIdForScriptUrl=Ct},s)});uc(function(b,d){(function(o,s,p){if(ra(p)==="object"&&typeof p.nodeName!="string")s(o,p);else{var i,u;(function(){var v=function m(S){for(var P in S)S.hasOwnProperty(P)&&(S[P]=m(S[P]));return Object.freeze(S)};p={},i=["1.4.12-iab4299"],s(o,p);for(u in p)p.hasOwnProperty(u)&&(Object.getOwnPropertyDescriptor(o,u)==null&&Object.defineProperty(o,u,{value:{}}),i.forEach(function(m){if(Object.getOwnPropertyDescriptor(o[u],m)==null){var S=v(p[u]);Object.defineProperty(o[u],m,{get:function(){return S},enumerable:!0})}}))})()}})(qb,function(f,a){function c(o){var s;if(!(s=o)){s=X();var p=void 0;p=p===void 0?fa.isOmidPresent:p;var i=[],u=O(s,Xb);u&&i.push(u),i.push(Q(s));e:{i=D.makeIterator(i);for(var v=i.next();!v.done;v=i.next()){t:{u=s,v=v.value;var m=La,S=p;if(!R(v))try{var P=O(v,m);if(P){var x=new oa(P);break t}}catch(w){}x=S(v)?new e(u,v):null}if(v=x){s=v;break e}}s=null}}(this.communication=s)?this.communication.onMessage=this.handleMessage_.bind(this):(o=(o=Z.omidGlobal.omid3p)&&typeof o.registerSessionObserver=="function"&&typeof o.addEventListener=="function"?o:null)&&(this.omid3p=o),this.remoteIntervals_=this.remoteTimeouts_=0,this.callbackMap_={},this.imgCache_=[],this.injectionId_=(o=Z.omidGlobal.omidVerificationProperties)?o.injectionId:void 0}function e(o,s){s=s===void 0?Z.omidGlobal:s,h.call(this,s);var p=this;this.communicationType_="POST_MESSAGE",o.addEventListener("message",function(i){if(ra(i.data)==="object"){var u=i.data;l.isValidSerializedMessage(u)&&(u=l.deserialize(u),i.source&&p.handleMessage(u,i.source))}})}function h(o){this.to=o,this.communicationType_="NONE"}function l(o,s,p,i){this.guid=o,this.method=s,this.version=p,this.args=i}function n(){var o=D.getRestArguments.apply(0,arguments);r(function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat(D.arrayFromIterable(o))))},function(){return console.error.apply(console,D.arrayFromIterable(o))})}function r(o,s){typeof jasmine!="undefined"&&jasmine?o():typeof console!="undefined"&&console&&console.error&&s()}function q(o,s){if(!s)throw Error("Value for "+o+" is undefined, null or blank.");if(typeof s!="string"&&!(s instanceof String))throw Error("Value for "+o+" is not a string.");if(s.trim()==="")throw Error("Value for "+o+" is empty string.")}function y(o,s){if(!s)throw Error(o+" must not be truthy.")}function K(o,s){if(s==null)throw Error(o+" must not be null or undefined.");if(typeof s!="number"||isNaN(s))throw Error("Value for "+o+" is not a number");if(0>s)throw Error(o+" must be a positive number.")}function F(o,s){o=o.split("-")[0].split("."),s=s.split("-")[0].split(".");for(var p=0;3>p;p++){var i=parseInt(o[p],10),u=parseInt(s[p],10);if(i>u)break;if(i<u)return!1}return!0}function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var s=16*Math.random()|0;return o=o==="y"?(s&3|8).toString(16):s.toString(16)})}function I(o,s){try{return o.frames&&!!o.frames[s]}catch(p){return!1}}function H(o,s){o.document.write('<iframe style="display:none" id="'+(s+'" name="'+s+'" sandbox></iframe>'))}function U(o,s){return o&&(o[s]||(o[s]={}))}function M(o){return o!=null&&typeof o.top!="undefined"&&o.top!=null}function R(o){if(o===Z.omidGlobal)return!1;try{if(typeof o.location.hostname=="undefined")return!0}catch(s){return!0}return!1}function X(o){return typeof o=="undefined"&&typeof window!="undefined"&&window&&(o=window),M(o)?o:Z.omidGlobal}function Q(o){return M(o)?o.top:Z.omidGlobal}function O(o,s){return s.reduce(function(p,i){return p&&p[i]},o)}var D=D||{};D.scope={},D.createTemplateTagFirstArg=function(o){return o.raw=o},D.createTemplateTagFirstArgWithRaw=function(o,s){return o.raw=s,o},D.arrayIteratorImpl=function(o){var s=0;return function(){return s<o.length?{done:!1,value:o[s++]}:{done:!0}}},D.arrayIterator=function(o){return{next:D.arrayIteratorImpl(o)}},D.makeIterator=function(o){var s=typeof Symbol!="undefined"&&Symbol.iterator&&o[Symbol.iterator];if(s)return s.call(o);if(typeof o.length=="number")return D.arrayIterator(o);throw Error(String(o)+" is not an iterable or ArrayLike")},D.arrayFromIterator=function(o){for(var s,p=[];!(s=o.next()).done;)p.push(s.value);return p},D.arrayFromIterable=function(o){return o instanceof Array?o:D.arrayFromIterator(D.makeIterator(o))},D.ASSUME_ES5=!1,D.ASSUME_NO_NATIVE_MAP=!1,D.ASSUME_NO_NATIVE_SET=!1,D.SIMPLE_FROUND_POLYFILL=!1,D.ISOLATE_POLYFILLS=!1,D.FORCE_POLYFILL_PROMISE=!1,D.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,D.objectCreate=D.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(o){function s(){}return s.prototype=o,new s},D.defineProperty=D.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(o,s,p){return o==Array.prototype||o==Object.prototype||(o[s]=p.value),o},D.getGlobal=function(o){o=[(typeof globalThis=="undefined"?"undefined":ra(globalThis))=="object"&&globalThis,o,(typeof window=="undefined"?"undefined":ra(window))=="object"&&window,(typeof self=="undefined"?"undefined":ra(self))=="object"&&self,ra(qb)=="object"&&qb];for(var s=0;s<o.length;++s){var p=o[s];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")},D.global=D.getGlobal(this),D.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&ra(Symbol("x"))==="symbol",D.TRUST_ES6_POLYFILLS=!D.ISOLATE_POLYFILLS||D.IS_SYMBOL_NATIVE,D.polyfills={},D.propertyToPolyfillSymbol={},D.POLYFILL_PREFIX="$jscp$",D.polyfill=function(o,s,p,i){s&&(D.ISOLATE_POLYFILLS?D.polyfillIsolated(o,s,p,i):D.polyfillUnisolated(o,s,p,i))},D.polyfillUnisolated=function(o,s,p,i){for(p=D.global,o=o.split("."),i=0;i<o.length-1;i++){var u=o[i];if(!(u in p))return;p=p[u]}o=o[o.length-1],i=p[o],s=s(i),s!=i&&s!=null&&D.defineProperty(p,o,{configurable:!0,writable:!0,value:s})},D.polyfillIsolated=function(o,s,p,i){var u=o.split(".");o=u.length===1,i=u[0],i=!o&&i in D.polyfills?D.polyfills:D.global;for(var v=0;v<u.length-1;v++){var m=u[v];if(!(m in i))return;i=i[m]}u=u[u.length-1],p=D.IS_SYMBOL_NATIVE&&p==="es6"?i[u]:null,s=s(p),s!=null&&(o?D.defineProperty(D.polyfills,u,{configurable:!0,writable:!0,value:s}):s!==p&&(D.propertyToPolyfillSymbol[u]===void 0&&(p=1e9*Math.random()>>>0,D.propertyToPolyfillSymbol[u]=D.IS_SYMBOL_NATIVE?D.global.Symbol(u):D.POLYFILL_PREFIX+p+"$"+u),D.defineProperty(i,D.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:s})))},D.getConstructImplementation=function(){function o(){function p(){}return Reflect.construct(p,[],function(){}),new p instanceof p}if(D.TRUST_ES6_POLYFILLS&&typeof Reflect!="undefined"&&Reflect.construct){if(o())return Reflect.construct;var s=Reflect.construct;return function(p,i,u){return p=s(p,i),u&&Reflect.setPrototypeOf(p,u.prototype),p}}return function(p,i,u){return u===void 0&&(u=p),u=D.objectCreate(u.prototype||Object.prototype),Function.prototype.apply.call(p,u,i)||u}},D.construct={valueOf:D.getConstructImplementation}.valueOf(),D.underscoreProtoCanBeSet=function(){var o={a:!0},s={};try{return s.__proto__=o,s.a}catch(p){}return!1},D.setPrototypeOf=D.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:D.underscoreProtoCanBeSet()?function(o,s){if(o.__proto__=s,o.__proto__!==s)throw new TypeError(o+" is not extensible");return o}:null,D.inherits=function(o,s){if(o.prototype=D.objectCreate(s.prototype),o.prototype.constructor=o,D.setPrototypeOf){var p=D.setPrototypeOf;p(o,s)}else for(p in s)if(p!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(s,p);i&&Object.defineProperty(o,p,i)}else o[p]=s[p];o.superClass_=s.prototype},D.getRestArguments=function(){for(var o=Number(this),s=[],p=o;p<arguments.length;p++)s[p-o]=arguments[p];return s},D.polyfill("Reflect",function(o){return o||{}},"es6","es3"),D.polyfill("Reflect.construct",function(){return D.construct},"es6","es3"),D.polyfill("Reflect.setPrototypeOf",function(o){if(o)return o;if(D.setPrototypeOf){var s=D.setPrototypeOf;return function(p,i){try{return s(p,i),!0}catch(u){return!1}}}return null},"es6","es5"),D.owns=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},D.polyfill("Object.values",function(o){return o||function(s){var p=[],i;for(i in s)D.owns(s,i)&&p.push(s[i]);return p}},"es8","es3");var aa={APP:"app",WEB:"web"};l.isValidSerializedMessage=function(o){return!!o&&o.omid_message_guid!==void 0&&o.omid_message_method!==void 0&&o.omid_message_version!==void 0&&typeof o.omid_message_guid=="string"&&typeof o.omid_message_method=="string"&&typeof o.omid_message_version=="string"&&(o.omid_message_args===void 0||o.omid_message_args!==void 0)},l.deserialize=function(o){return new l(o.omid_message_guid,o.omid_message_method,o.omid_message_version,o.omid_message_args)},l.prototype.serialize=function(){var o={};return o=(o.omid_message_guid=this.guid,o.omid_message_method=this.method,o.omid_message_version=this.version,o),this.args!==void 0&&(o.omid_message_args=this.args),o},h.prototype.sendMessage=function(){},h.prototype.handleMessage=function(o,s){this.onMessage&&this.onMessage(o,s)},h.prototype.serialize=function(o){return JSON.stringify(o)},h.prototype.deserialize=function(o){return JSON.parse(o)},h.prototype.isDirectCommunication=function(){return this.communicationType_==="DIRECT"},h.prototype.isCrossOrigin=function(){};var fa={OMID_PRESENT_FRAME_NAME:"omid_v1_present",OMID_PRESENT_FRAME_NAME_WEB:"omid_v1_present_web",OMID_PRESENT_FRAME_NAME_APP:"omid_v1_present_app",getEnvironmentIframeName:function(o){var s={};return(s[aa.APP]=fa.OMID_PRESENT_FRAME_NAME_APP,s[aa.WEB]=fa.OMID_PRESENT_FRAME_NAME_WEB,s)[o]},isOmidPresent:function(o){return[fa.OMID_PRESENT_FRAME_NAME,fa.OMID_PRESENT_FRAME_NAME_WEB,fa.OMID_PRESENT_FRAME_NAME_APP].some(function(s){return I(o,s)})},getOmidEnvironment:function(o){for(var s=D.makeIterator(Object.values(aa)),p=s.next();!p.done;p=s.next()){p=p.value;var i=fa.getEnvironmentIframeName(p);if(I(o,i))return p}return null},declareOmidPresence:function(o,s){o.frames&&o.document&&![fa.OMID_PRESENT_FRAME_NAME,fa.OMID_PRESENT_FRAME_NAME_WEB,fa.OMID_PRESENT_FRAME_NAME_APP].some(function(p){return!!o.frames[p]})&&(o.document.body==null&&fa.isMutationObserverAvailable_(o)?fa.registerMutationObserver_(o,s):(s=fa.getEnvironmentIframeName(s),o.document.body?(fa.appendPresenceIframe_(o,fa.OMID_PRESENT_FRAME_NAME),fa.appendPresenceIframe_(o,s)):(H(o,fa.OMID_PRESENT_FRAME_NAME),H(o,s))))},appendPresenceIframe_:function(o,s){var p=o.document.createElement("iframe");p.id=s,p.name=s,p.style.display="none",p.sandbox="",o.document.body.appendChild(p)},isMutationObserverAvailable_:function(o){return"MutationObserver"in o},registerMutationObserver_:function(o,s){var p=new MutationObserver(function(i){i.forEach(function(u){u.addedNodes[0].nodeName==="BODY"&&(u=fa.getEnvironmentIframeName(s),fa.appendPresenceIframe_(o,fa.OMID_PRESENT_FRAME_NAME),fa.appendPresenceIframe_(o,u),p.disconnect())})});p.observe(o.document.documentElement,{childList:!0})}},Z={};Z.omidGlobal=function(){if(typeof f!="undefined"&&f)return f;if(typeof qb!="undefined"&&qb)return qb;if(typeof window!="undefined"&&window)return window;if(typeof globalThis!="undefined"&&globalThis)return globalThis;var o=Function("return this")();if(o)return o;throw Error("Could not determine global object context.")}();var oa=function o(s){h.call(this,s),this.communicationType_="DIRECT",this.handleExportedMessage=o.prototype.handleExportedMessage.bind(this)};D.inherits(oa,h),oa.prototype.sendMessage=function(o,s){if(s=s===void 0?this.to:s,!s)throw Error("Message destination must be defined at construction time or when sending the message.");s.handleExportedMessage(o.serialize(),this)},oa.prototype.handleExportedMessage=function(o,s){l.isValidSerializedMessage(o)&&this.handleMessage(l.deserialize(o),s)},oa.prototype.isCrossOrigin=function(){return!1},D.inherits(e,h),e.isCompatibleContext=function(o){return!!(o&&o.addEventListener&&o.postMessage)},e.prototype.sendMessage=function(o,s){if(s=s===void 0?this.to:s,!s)throw Error("Message destination must be defined at construction time or when sending the message.");s.postMessage(o.serialize(),"*")},e.prototype.isCrossOrigin=function(){return this.to?R(this.to):!0};var La=["omid","v1_VerificationServiceCommunication"],Xb=["omidVerificationProperties","serviceWindow"];c.prototype.isSupported=function(){return this.getEnvironment()!==aa.WEB||this.injectionId_?!(!this.communication&&!this.omid3p):!1},c.prototype.getEnvironment=function(){var o=X();return this.injectionSource()||(0,fa.getOmidEnvironment)(o)||(0,fa.getOmidEnvironment)(Q(o))},c.prototype.injectionSource=function(){var o=Z.omidGlobal.omidVerificationProperties;if(o&&o.injectionSource)return o.injectionSource},c.prototype.registerSessionObserver=function(o,s){y("functionToExecute",o),this.omid3p?this.omid3p.registerSessionObserver(o,s,this.injectionId_):this.sendMessage_("addSessionListener",o,s,this.injectionId_)},c.prototype.addEventListener=function(o,s){q("eventType",o),y("functionToExecute",s),this.omid3p?this.omid3p.addEventListener(o,s,this.injectionId_):this.sendMessage_("addEventListener",s,o,this.injectionId_)},c.prototype.sendUrl=function(o,s,p){q("url",o),Z.omidGlobal.document&&Z.omidGlobal.document.createElement?this.sendUrlWithImg_(o,s,p):this.sendMessage_("sendUrl",function(i){i&&s?s():!i&&p&&p()},o)},c.prototype.sendUrlWithImg_=function(o,s,p){function i(m){var S=u.imgCache_.indexOf(v);0<=S&&u.imgCache_.splice(S,1),m&&m()}var u=this,v=Z.omidGlobal.document.createElement("img");this.imgCache_.push(v),v.addEventListener("load",i.bind(this,s)),v.addEventListener("error",i.bind(this,p)),v.src=o},c.prototype.injectJavaScriptResource=function(o,s,p){var i=this;q("url",o),Z.omidGlobal.document?this.injectJavascriptResourceUrlInDom_(o,s,p):this.sendMessage_("injectJavaScriptResource",function(u,v){u?(i.evaluateJavaScript_(v,o),s()):(n("Service failed to load JavaScript resource."),p())},o)},c.prototype.injectJavascriptResourceUrlInDom_=function(o,s,p){var i=Z.omidGlobal.document,u=i.body;i=i.createElement("script"),i.onload=s,i.onerror=p,i.src=o,i.type="application/javascript",u.appendChild(i)},c.prototype.evaluateJavaScript_=function(t,E){try{eval(t)}catch(o){n('Error evaluating the JavaScript resource from "'+E+'".')}},c.prototype.setTimeout=function(o,s){if(y("functionToExecute",o),K("timeInMillis",s),this.hasTimeoutMethods_())return Z.omidGlobal.setTimeout(o,s);var p=this.remoteTimeouts_++;return this.sendMessage_("setTimeout",o,p,s),p},c.prototype.clearTimeout=function(o){K("timeoutId",o),this.hasTimeoutMethods_()?Z.omidGlobal.clearTimeout(o):this.sendOneWayMessage_("clearTimeout",o)},c.prototype.setInterval=function(o,s){if(y("functionToExecute",o),K("timeInMillis",s),this.hasIntervalMethods_())return Z.omidGlobal.setInterval(o,s);var p=this.remoteIntervals_++;return this.sendMessage_("setInterval",o,p,s),p},c.prototype.clearInterval=function(o){K("intervalId",o),this.hasIntervalMethods_()?Z.omidGlobal.clearInterval(o):this.sendOneWayMessage_("clearInterval",o)},c.prototype.hasTimeoutMethods_=function(){return typeof Z.omidGlobal.setTimeout=="function"&&typeof Z.omidGlobal.clearTimeout=="function"},c.prototype.hasIntervalMethods_=function(){return typeof Z.omidGlobal.setInterval=="function"&&typeof Z.omidGlobal.clearInterval=="function"},c.prototype.handleMessage_=function(o,s){s=o.method;var p=o.guid;if(o=o.args,s==="response"&&this.callbackMap_[p]){var i=o;i=/\d+\.\d+\.\d+(-.*)?/.test("1.4.12-iab4299")&&F("1.4.12-iab4299","1.0.3")?i||[]:i&&typeof i=="string"?JSON.parse(i):[],this.callbackMap_[p].apply(this,i)}s==="error"&&window.console&&n(o)},c.prototype.sendOneWayMessage_=function(o){var s=D.getRestArguments.apply(1,arguments);this.sendMessage_.apply(this,[o,null].concat(D.arrayFromIterable(s)))},c.prototype.sendMessage_=function(o,s){var p=D.getRestArguments.apply(2,arguments);if(this.communication){var i=C();s&&(this.callbackMap_[i]=s);var u="VerificationService."+o;p=/\d+\.\d+\.\d+(-.*)?/.test("1.4.12-iab4299")&&F("1.4.12-iab4299","1.0.3")?p:JSON.stringify(p),p=new l(i,u,"1.4.12-iab4299",p),this.communication.sendMessage(p)}},function(o,s,p){(p=p===void 0?typeof a=="undefined"?null:a:p)&&(o=o.split("."),o.slice(0,o.length-1).reduce(U,p)[o[o.length-1]]=s)}("OmidVerificationClient",c)},d)});var ac=function(o){function s(i,u,v){la(this,s);var m=p.call(this);return m._currentAd=i,m._adSlotDelivery=u,m._$videoElement=v||document.createElement("video"),m._sessionClient=Fl.OmidSessionClient||Fl,m._sessionClient?(m.CONTENT_URL=m._adSlotDelivery.player.getCurrentContentSource(),m.PARTNER_NAME="Smartcliptv",m.PARTNER_VERSION="6.4.10",m.OMSDK_SERVICE_WINDOW=m._adSlotDelivery.environmentVars.omidServiceWindow||window.top,m._internalOmidConfig=m._currentAd.config.adVerification,m._verifications=m._filterVerifications(m._currentAd.adVerifications,m._internalOmidConfig.vendorWhitelist),!m._verifications||m._verifications.length===0?(m.debug.info("OMID.constructor - no verification(s) after applying allow-list found"),Wb(m)):(m.debug.info("OMID.constructor",m._verifications.length,"verification(s) found after initial"),m.debug.table(m._verifications),m._internalOmidConfig.disabled?(m.debug.warn("OMID.constructor - ad verification disabled by publisher (GlobalConfig.adVerification.disabled)."),m._verifications.forEach(function(S){m._trackError(S.tracking.verificationNotExecuted,1)}),Wb(m)):m._internalOmidConfig.playerHandles?(m.debug.info("OMID.constructor - playerHandles is true"),Wb(m)):m._currentAd.isVPAID&&!m._currentAd.config.shareVideoElementWithVPAID?(m.debug.info("OMID.constructor - VPAID ad with shareVideoElementWithVPAID set to false is not supported!"),Wb(m)):(m._initOMIDJS()&&m._addEventListeners(),m))):(m.debug.warn("OMID.constructor - no sessionClient available!"),Wb(m))}ya(s,o);var p=xa(s);return ma(s,[{key:"_filterVerifications",value:function(i,u){var v=this;return i&&i.length!==0?i.filter(function(m){var S=!u||u.length===0||u.includes(m.vendor);if(!S)return v._trackError(m.tracking.verificationNotExecuted,1),!1;if(u)return!0;var P=m.javascriptResource?m.javascriptResource.apiFramework.toLowerCase()==="omid":!1;return u||P?!0:(S&&v._trackError(m.tracking.verificationNotExecuted,2),!1)}):i}},{key:"_initOMIDJS",value:function(){var i=this;return this._adSession=this._createAdSession(),this._adSession.impressionType_||this._adSession.setImpressionType(this._currentAd.config.trackImpressionOnStart?s.IMPRESSION_TYPE.RENDER:s.IMPRESSION_TYPE.LOADED),this._adSession.creativeType_||this._adSession.setCreativeType(this._currentAd.adType),this.debug.info("OMID._initOMIDJS - _initOMIDJS()",this._adSession),this._adSession.isSupported()?(this._adEvents=new this._sessionClient.AdEvents(this._adSession),this._mediaEvents=new this._sessionClient.MediaEvents(this._adSession),this._adSession.start(),!0):(this.debug.error("OMID._initOMIDJS - adsession not supported, call all error trackers and tear down"),this._verifications.map(function(u){i._trackError(u.tracking.verificationNotExecuted,2)}),!1)}},{key:"_createAdSession",value:function(){var i=this,u=new this._sessionClient.Partner(this.PARTNER_NAME,this.PARTNER_VERSION),v=this._verifications.map(function(m){return i.debug.info("OMID._createAdSession - VerificationScriptResource(()","omidScriptURL:",Rd(m.javascriptResource.url),"vendor:",m.vendor,"verification params:",m.verificationParameters,"accessMode:",i._internalOmidConfig.accessMode),new i._sessionClient.VerificationScriptResource(Rd(m.javascriptResource.url),m.vendor,m.verificationParameters,i._internalOmidConfig.accessMode)});return u=new this._sessionClient.Context(u,v,this.CONTENT_URL),u.underEvaluation=!0,u.setVideoElement(this._$videoElement),u.setServiceWindow(this.OMSDK_SERVICE_WINDOW),new this._sessionClient.AdSession(u)}},{key:"_addEventListeners",value:function(){var i=this;this._removeEventListeners(),Object.keys(A).forEach(function(u){u=i._adSlotDelivery.addEventListener(A[u],i._handleAdEvent.bind(i)),i._removeEventHandlers.push(u)})}},{key:"_removeEventListeners",value:function(){this._removeEventHandlers||(this._removeEventHandlers=[]),this._removeEventHandlers.forEach(function(i){i()}),this._removeEventHandlers=[]}},{key:"_handleAdEvent",value:function(i){var u=this;switch(this._forwardEventToOMSDK(i.type),i.type){case A.ON_AD_ERROR:this._removeEventListeners(),this.debug.info("OMID._handleAdEvent AdError -- call _adSession.error()"),this._adSession.error("generic",this._currentAd.error.code),setTimeout(function(){u._adSession.finish()},1e3*this._currentAd.config.adVerification.sessionCleanupDelay);break;case A.ON_AD_SKIPPED:case A.ON_AD_STOPPED:this._removeEventListeners(),setTimeout(function(){u.debug.info("OMID._handleAdEvent "+i.type+" -- call _adSession.finish()"),u._adSession.finish()},1e3*this._currentAd.config.adVerification.sessionCleanupDelay)}}},{key:"_forwardEventToOMSDK",value:function(i){if(this.debug.info("OMID._forwardEventToOMSDK()",i),this._adEvents)switch(i){case A.ON_AD_STARTED:i=new this._sessionClient.VastProperties(-1<this._currentAd.skipOffset,this._currentAd.skipOffset,!0,s.POSITION_MAP[this._currentAd.adBreakPosition]),this._adEvents.loaded(i);break;case A.ON_AD_PLAYBACK_START:this._mediaEvents.start(this._currentAd.duration,this._currentAd.volume,this._currentAd.volume,1);break;case A.ON_AD_IMPRESSION:this._adEvents.impressionOccurred();break;case A.ON_AD_FIRST_QUARTILE:this._mediaEvents.firstQuartile();break;case A.ON_AD_MID_POINT:this._mediaEvents.midpoint();break;case A.ON_AD_THIRD_QUARTILE:this._mediaEvents.thirdQuartile();break;case A.ON_AD_PLAYBACK_FINISHED:this._mediaEvents.complete();break;case A.ON_AD_PAUSED:this._mediaEvents.pause();break;case A.ON_AD_PLAYING:this._mediaEvents.resume();break;case A.ON_AD_VOLUME_CHANGED:this._mediaEvents.volumeChange(this._currentAd.volume,this._currentAd.volume,1);break;case A.ON_AD_SKIPPED:this._mediaEvents.skipped();break;case A.ON_AD_CLICKED:this._mediaEvents.adUserInteraction("click");break;case A.ON_ENTER_FULLSCREEN:this._mediaEvents.playerStateChange("fullscreen");break;case A.ON_EXIT_FULLSCREEN:this._mediaEvents.playerStateChange("normal");break;case A.ON_PLAYER_EXPAND:this._mediaEvents.playerStateChange("expanded");break;case A.ON_PLAYER_COLLAPSE:this._mediaEvents.playerStateChange("collapsed")}else this.debug.warn("OMID._forwardEventToOMSDK() _adEvents not set, happens when adSession is not supported")}},{key:"_trackError",value:function(i,u){this.debug.info("OMID._trackError - errorReason",u,"errorTracker",i),this._currentAd.enrichment.set("REASON",u,"reason");var v={adReinsertion:this._currentAd.adReinsertion,enrichment:this._currentAd.enrichment,timeouts:this._currentAd.config.timeouts,urlhandler:this._currentAd.config.urlhandler};new rh().track(i,v)}}]),s}(eb);ac.POSITION_MAP=["standalone","preroll","midroll","postroll","standalone"],ac.IMPRESSION_TYPE={},ac.IMPRESSION_TYPE.AUDIBLE="audible",ac.IMPRESSION_TYPE.LOADED="loaded",ac.IMPRESSION_TYPE.OTHER="other",ac.IMPRESSION_TYPE.PIXEL="onePixel",ac.IMPRESSION_TYPE.RENDER="beginToRender",ac.IMPRESSION_TYPE.UNSPECIFIED="unspecified",ac.IMPRESSION_TYPE.VIEWABLE="viewable";var Nq=function(o){function s(i,u){la(this,s);var v=p.call(this);return v.adSlotDelivery=i,v.interval=null,v.player=u,v.startAdTime=null,v.viewabilityConfig=v.adSlotDelivery.currentAd.config.viewability,v.viewabilityFinshed=!1,v.addEventListeners(),v}ya(s,o);var p=xa(s);return ma(s,[{key:"addEventListeners",value:function(){var i=this;this.removeEventListeners(),Object.keys(A).forEach(function(u){u=i.adSlotDelivery.addEventListener(A[u],i.handleAdEvent.bind(i)),i.removeEventHandlers.push(u)})}},{key:"removeEventListeners",value:function(){this.removeEventHandlers||(this.removeEventHandlers=[]),this.removeEventHandlers.forEach(function(i){i()}),this.removeEventHandlers=[]}},{key:"handleAdEvent",value:function(i){var u=this;switch(i.type){case A.ON_AD_PAUSED:clearInterval(this.interval);break;case A.ON_AD_PLAYING:case A.ON_AD_STARTED:this.startAdTime=null,this.adVisibilityControl(),clearInterval(this.interval),this.interval=setInterval(function(){u.adVisibilityControl()},250);break;case A.ON_AD_SKIPPED:case A.ON_AD_STOPPED:clearInterval(this.interval),this.viewabilityFinshed||this.adSlotDelivery.dispatchEvent(A.ON_AD_NOT_VIEWABLE)}}},{key:"adVisibilityControl",value:function(){var i=this.player.getPlayerSize(),u=this.player.getViewportSize();if(i&&u){i=i.boundingRect;var v=u.boundingRect;u=0;var m=i.width*i.height;i=(Math.min(i.right,v.right)-Math.max(i.left,v.left))*(Math.min(i.bottom,v.bottom)-Math.max(i.top,v.top)),0<i&&(u=i/m),i=100*u,i>this.viewabilityConfig.area?this.startAdTime===null&&this.adSlotDelivery.currentAd?(this.startAdTime=Date.now(),this.adSlotDelivery.currentAd.info.viewability={state:!0,threshold:this.viewabilityConfig.area,value:i},this.adSlotDelivery.dispatchEvent(A.ON_AD_VIEWABLE_STATE_CHANGE)):(i=this.startAdTime,Date.now()-i>1e3*this.viewabilityConfig.time&&!this.viewabilityFinshed&&(this.debug.info("[Viewability] tracker time reached",Date.now()),this.viewabilityFinshed=!0,this.adSlotDelivery.dispatchEvent(A.ON_AD_VIEWABLE))):(this.startAdTime!==null&&(this.adSlotDelivery.currentAd.info.viewability={state:!1,threshold:this.viewabilityConfig.area,value:i},this.adSlotDelivery.dispatchEvent(A.ON_AD_VIEWABLE_STATE_CHANGE)),this.startAdTime=null)}else this.removeEventListeners(),this.adSlotDelivery.dispatchEvent(A.ON_AD_VIEWABLE_UNDETERMINED)}}]),s}(eb),Oq=Vb,Gl="".startsWith,Pq=Math.min,Hl=yi("startsWith"),Qq=!Hl&&!!function(){var o=Oq(String.prototype,"startsWith");return o&&!o.writable}();Y({target:"String",proto:!0,forced:!Qq&&!Hl},{startsWith:function(o){var s=String(Bb(this));zi(o);var p=Ra(Pq(1<arguments.length?arguments[1]:void 0,s.length)),i=String(o);return Gl?Gl.call(s,i,p):s.slice(p,p+i.length)===i}});var Il=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined",Kf=1/0,Hm=Math.abs,cc=Math.pow,Im=Math.floor,Jm=Math.log,Km=Math.LN2,Rq=Qc.f,Em=Va.f,ed=Ma.get,Jl=Ma.set,Kb=T.ArrayBuffer,yb=Kb,Lb=T.DataView,of=Lb&&Lb.prototype,Kl=Object.prototype,ue=T.RangeError;if(Il){if(!ia(function(){Kb(1)})||!ia(function(){new Kb(-1)})||ia(function(){return new Kb,new Kb(1.5),new Kb(NaN),Kb.name!="ArrayBuffer"})){yb=function(o){return zb(this,yb),new Kb(dd(o))};for(var Sq=yb.prototype=Kb.prototype,Ll=Rq(Kb),Ml=0,wh;Ll.length>Ml;)(wh=Ll[Ml++])in yb||Ua(yb,wh,Kb[wh]);Sq.constructor=yb}bb&&Sb(of)!==Kl&&bb(of,Kl);var pf=new Lb(new yb(2)),Nl=of.setInt8;pf.setInt8(0,2147483648),pf.setInt8(1,2147483649),!pf.getInt8(0)&&pf.getInt8(1)||gc(of,{setInt8:function(o,s){Nl.call(this,o,s<<24>>24)},setUint8:function(o,s){Nl.call(this,o,s<<24>>24)}},{unsafe:!0})}else yb=function(o){zb(this,yb,"ArrayBuffer"),o=dd(o),Jl(this,{bytes:pi.call(Array(o),0),byteLength:o}),ta||(this.byteLength=o)},Lb=function(o,s,p){zb(this,Lb,"DataView"),zb(o,yb,"DataView");var i=ed(o).byteLength;if(s=Pb(s),0>s||s>i)throw ue("Wrong offset");if(p=p===void 0?i-s:Ra(p),s+p>i)throw ue("Wrong length");Jl(this,{buffer:o,byteLength:p,byteOffset:s}),ta||(this.buffer=o,this.byteLength=p,this.byteOffset=s)},ta&&(ve(yb,"byteLength"),ve(Lb,"buffer"),ve(Lb,"byteLength"),ve(Lb,"byteOffset")),gc(Lb.prototype,{getInt8:function(o){return rc(this,1,o)[0]<<24>>24},getUint8:function(o){return rc(this,1,o)[0]},getInt16:function(o){var s=rc(this,2,o,1<arguments.length?arguments[1]:void 0);return(s[1]<<8|s[0])<<16>>16},getUint16:function(o){var s=rc(this,2,o,1<arguments.length?arguments[1]:void 0);return s[1]<<8|s[0]},getInt32:function(o){return ki(rc(this,4,o,1<arguments.length?arguments[1]:void 0))},getUint32:function(o){return ki(rc(this,4,o,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(o){return oi(rc(this,4,o,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(o){return oi(rc(this,8,o,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(o,s){qc(this,1,o,ni,s)},setUint8:function(o,s){qc(this,1,o,ni,s)},setInt16:function(o,s){qc(this,2,o,mi,s,2<arguments.length?arguments[2]:void 0)},setUint16:function(o,s){qc(this,2,o,mi,s,2<arguments.length?arguments[2]:void 0)},setInt32:function(o,s){qc(this,4,o,li,s,2<arguments.length?arguments[2]:void 0)},setUint32:function(o,s){qc(this,4,o,li,s,2<arguments.length?arguments[2]:void 0)},setFloat32:function(o,s){qc(this,4,o,Gm,s,2<arguments.length?arguments[2]:void 0)},setFloat64:function(o,s){qc(this,8,o,Fm,s,2<arguments.length?arguments[2]:void 0)}});dc(yb,"ArrayBuffer"),dc(Lb,"DataView");var ie=yb,xh=Lb,Ol=ie.prototype.slice,Tq=ia(function(){return!new ie(2).slice(1,void 0).byteLength});Y({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Tq},{slice:function(o,s){if(Ol!==void 0&&s===void 0)return Ol.call(Ia(this),o);var p=Ia(this).byteLength,i=vb(o,p);p=vb(s===void 0?p:s,p);for(var u=new(Kc(this,ie))(Ra(p-i)),v=new xh(this),m=new xh(u),S=0;i<p;)m.setUint8(S++,v.getUint8(i++));return u}});var Uq=Va.f,qf=T.Int8Array,Jf=qf&&qf.prototype,Pl=T.Uint8ClampedArray,Ql=Pl&&Pl.prototype,Gc=qf&&Sb(qf),Eb=Jf&&Sb(Jf),Rl=Object.prototype,ii=Rl.isPrototypeOf,Sl=Ca("toStringTag"),yh=ld("TYPED_ARRAY_TAG"),pc=Il&&!!bb&&cd(T.opera)!=="Opera",Tl=!1,ub,oc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(ub in oc)T[ub]||(pc=!1);if((!pc||typeof Gc!="function"||Gc===Function.prototype)&&(Gc=function(){throw TypeError("Incorrect invocation")},pc))for(ub in oc)T[ub]&&bb(T[ub],Gc);if((!pc||!Eb||Eb===Rl)&&(Eb=Gc.prototype,pc))for(ub in oc)T[ub]&&bb(T[ub].prototype,Eb);if(pc&&Sb(Ql)!==Eb&&bb(Ql,Eb),ta&&!ha(Eb,Sl))for(ub in Tl=!0,Uq(Eb,Sl,{get:function(){return qa(this)?this[yh]:void 0}}),oc)T[ub]&&Ua(T[ub],yh,ub);var je=pc,Ul=Tl&&yh,Vl=Gc,ke=Eb,Vq=T.ArrayBuffer,Xc=T.Int8Array,Wq=!je||!ia(function(){Xc(1)})||!ia(function(){new Xc(-1)})||!ye(function(o){new Xc,new Xc(null),new Xc(1.5),new Xc(o)},!0)||ia(function(){return new Xc(new Vq(2),1,void 0).length!==1});uc(function(o){function s(G,J,_e){return!(i(G,J=Qb(J,!0))&&qa(_e)&&ha(_e,"value"))||ha(_e,"get")||ha(_e,"set")||_e.configurable||ha(_e,"writable")&&!_e.writable||ha(_e,"enumerable")&&!_e.enumerable?w(G,J,_e):(G[J]=_e.value,G)}function p(G,J){return i(G,J=Qb(J,!0))?Tb(2,G[J]):W(G,J)}function i(G,J){return te(G)&&typeof J!="symbol"&&J in G&&String(+J)==String(J)}function u(G){var J;return G instanceof ie||(J=cd(G))=="ArrayBuffer"||J=="SharedArrayBuffer"}function v(G,J){w(G,J,{get:function(){return P(this)[J]}})}function m(G,J){for(var _e=0,tt=J.length,Ue=new(Dd(G))(tt);tt>_e;)Ue[_e]=J[_e++];return Ue}var S=Qc.f,P=Ma.get,x=Ma.set,w=Va.f,W=Vb,Te=Math.round,z=T.RangeError;ta?(je||(Vb=p,Va.f=s,v(ke,"buffer"),v(ke,"byteOffset"),v(ke,"byteLength"),v(ke,"length")),Y({target:"Object",stat:!0,forced:!je},{getOwnPropertyDescriptor:p,defineProperty:s}),o.exports=function(G,J,_e){function tt(pt,ct){w(pt,ct,{get:function(){var ht=P(this);return ht.view[it](ct*Ue+ht.byteOffset,!0)},set:function(ht){var gt=P(this);_e&&(ht=0>(ht=Te(ht))?0:255<ht?255:ht&255),gt.view[Qe](ct*Ue+gt.byteOffset,ht,!0)},enumerable:!0})}var Ue=G.match(/\d+$/)[0]/8,Ze=G+(_e?"Clamped":"")+"Array",it="get"+G,Qe="set"+G,We=T[Ze],Ye=We;G=Ye&&Ye.prototype;var at={};je?Wq&&(Ye=J(function(pt,ct,ht,gt){return zb(pt,Ye,Ze),ze(qa(ct)?u(ct)?gt!==void 0?new We(ct,se(ht,Ue),gt):ht!==void 0?new We(ct,se(ht,Ue)):new We(ct):te(ct)?m(Ye,ct):hi.call(Ye,ct):new We(dd(ct)),pt,Ye)}),bb&&bb(Ye,Vl),Ic(S(We),function(pt){pt in Ye||Ua(Ye,pt,We[pt])}),Ye.prototype=G):(Ye=J(function(pt,ct,ht,gt){zb(pt,Ye,Ze);var Mt=0,Ct=0;if(qa(ct))if(u(ct)){var Se=ct;if(Ct=se(ht,Ue),ct=ct.byteLength,gt===void 0){if(ct%Ue||(gt=ct-Ct,0>gt))throw z("Wrong length")}else if(gt=Ra(gt)*Ue,gt+Ct>ct)throw z("Wrong length");ct=gt/Ue}else return te(ct)?m(Ye,ct):hi.call(Ye,ct);else ct=dd(ct),gt=ct*Ue,Se=new ie(gt);for(x(pt,{buffer:Se,byteOffset:Ct,byteLength:gt,length:ct,view:new xh(Se)});Mt<ct;)tt(pt,Mt++)}),bb&&bb(Ye,Vl),G=Ye.prototype=wb(ke)),G.constructor!==Ye&&Ua(G,"constructor",Ye),Ul&&Ua(G,Ul,Ze),at[Ze]=Ye,Y({global:!0,forced:Ye!=We,sham:!je},at),"BYTES_PER_ELEMENT"in Ye||Ua(Ye,"BYTES_PER_ELEMENT",Ue),"BYTES_PER_ELEMENT"in G||Ua(G,"BYTES_PER_ELEMENT",Ue),Ie(Ze)}):o.exports=function(){}})("Uint8",function(o){return function(s,p,i){return o(this,s,p,i)}});var Xq=Math.min,Yq=[].copyWithin||function(o,s){var p=ab(this),i=Ra(p.length),u=vb(o,i),v=vb(s,i),m=2<arguments.length?arguments[2]:void 0;for(i=Xq((m===void 0?i:vb(m,i))-v,i-u),m=1,v<u&&u<v+i&&(m=-1,v+=i-1,u+=i-1);0<i--;)v in p?p[u]=p[v]:delete p[u],u+=m,v+=m;return p};Ka("copyWithin",function(o,s){return Yq.call(Oa(this),o,s,2<arguments.length?arguments[2]:void 0)}),Ka("every",function(o){return Uo(Oa(this),o,1<arguments.length?arguments[1]:void 0)}),Ka("fill",function(o){return pi.apply(Oa(this),arguments)}),Ka("filter",function(o){var s=Mk(Oa(this),o,1<arguments.length?arguments[1]:void 0),p=Kc(this,this.constructor),i=0,u=s.length;for(p=new(Dd(p))(u);u>i;)p[i]=s[i++];return p}),Ka("find",function(o){return Mf(Oa(this),o,1<arguments.length?arguments[1]:void 0)}),Ka("findIndex",function(o){return Ok(Oa(this),o,1<arguments.length?arguments[1]:void 0)}),Ka("forEach",function(o){Ic(Oa(this),o,1<arguments.length?arguments[1]:void 0)}),Ka("includes",function(o){return ik(Oa(this),o,1<arguments.length?arguments[1]:void 0)}),Ka("indexOf",function(o){return og(Oa(this),o,1<arguments.length?arguments[1]:void 0)});var Wl=Ca("iterator"),Xl=T.Uint8Array,Dm=yc.values,Zq=yc.keys,$q=yc.entries,zh=Xl&&Xl.prototype[Wl],Yl=!!zh&&(zh.name=="values"||zh.name==null);Ka("entries",function(){return $q.call(Oa(this))}),Ka("keys",function(){return Zq.call(Oa(this))}),Ka("values",gi,!Yl),Ka(Wl,gi,!Yl);var ar=[].join;Ka("join",function(o){return ar.apply(Oa(this),arguments)}),Ka("lastIndexOf",function(o){return ph.apply(Oa(this),arguments)}),Ka("map",function(o){return Lk(Oa(this),o,1<arguments.length?arguments[1]:void 0,function(s,p){return new(Dd(Kc(s,s.constructor)))(p)})}),Ka("reduce",function(o){return zl(Oa(this),o,arguments.length,1<arguments.length?arguments[1]:void 0)}),Ka("reduceRight",function(o){return xq(Oa(this),o,arguments.length,1<arguments.length?arguments[1]:void 0)});var br=Math.floor;Ka("reverse",function(){for(var o=Oa(this).length,s=br(o/2),p=0,i;p<s;)i=this[p],this[p++]=this[--o],this[o]=i;return this});var cr=ia(function(){new Int8Array(1).set({})});Ka("set",function(o){Oa(this);var s=se(1<arguments.length?arguments[1]:void 0,1),p=this.length,i=ab(o),u=Ra(i.length),v=0;if(u+s>p)throw RangeError("Wrong length");for(;v<u;)this[s+v]=i[v++]},cr);var dr=[].slice,er=ia(function(){new Int8Array(1).slice()});Ka("slice",function(o,s){var p=dr.call(Oa(this),o,s),i=Kc(this,this.constructor),u=0,v=p.length;for(i=new(Dd(i))(v);v>u;)i[u]=p[u++];return i},er),Ka("some",function(o){return Nk(Oa(this),o,1<arguments.length?arguments[1]:void 0)});var fr=[].sort;Ka("sort",function(o){return fr.call(Oa(this),o)}),Ka("subarray",function(o,s){var p=Oa(this),i=p.length,u=vb(o,i);return new(Kc(p,p.constructor))(p.buffer,p.byteOffset+u*p.BYTES_PER_ELEMENT,Ra((s===void 0?i:vb(s,i))-u))});var rf=T.Int8Array,Zl=[].toLocaleString,gr=[].slice,hr=!!rf&&ia(function(){Zl.call(new rf(1))}),ir=ia(function(){return[1,2].toLocaleString()!=new rf([1,2]).toLocaleString()})||!ia(function(){rf.prototype.toLocaleString.call([1,2])});Ka("toLocaleString",function(){return Zl.apply(hr?gr.call(Oa(this)):Oa(this),arguments)},ir);var $l=T.Uint8Array,jr=$l&&$l.prototype||{},sf=[].toString,kr=[].join;ia(function(){sf.call({})})&&(sf=function(){return kr.call(this)}),Ka("toString",sf,jr.toString!=sf);var Na={CLICK_THRU:"Creative:clickThru",COLLAPSE_NONLINEAR:"Creative:collapseNonlinear",EXPAND_NONLINEAR:"Creative:expandNonlinear",FATAL_ERROR:"Creative:fatalError",GET_MEDIA_STATE:"Creative:getMediaState",LOG:"Creative:log",REQUEST_CHANGE_AD_DURATION:"Creative:requestChangeAdDuration",REQUEST_FULL_SCREEN:"Creative:requestFullScreen",REQUEST_PAUSE:"Creative:requestPause",REQUEST_PLAY:"Creative:requestPlay",REQUEST_RESIZE:"Creative:requestResize",REQUEST_SKIP:"Creative:requestSkip",REQUEST_STOP:"Creative:requestStop",REQUEST_TRACKING:"Creative:reportTracking",REQUEST_VOLUME:"Creative:requestVolume"},Mb={CREATE_SESSION:"createSession",REJECT:"reject",RESOLVE:"resolve"},lr=function(o){function s(i){la(this,s);var u=p.call(this);return u.eventsThatRequireResponse=[Na.GET_MEDIA_STATE,Na.REQUEST_VIDEO_LOCATION,Na.READY,Na.CLICK_THRU,Na.REQUEST_SKIP,Na.REQUEST_STOP,Na.REQUEST_PAUSE,Na.REQUEST_PLAY,Na.REQUEST_FULL_SCREEN,Na.REQUEST_VOLUME,Na.REQUEST_RESIZE,Na.REQUEST_CHANGE_AD_DURATION,Na.REPORT_TRACKING,"Player:init","Player:startCreative","Player:adSkipped","Player:adStopped","Player:fatalError",Mb.CREATE_SESSION],u.listeners={},u.sessionId="",u.nextMessageId=1,u.target=i.ownerDocument.defaultView,u.target.addEventListener("message",u.receiveMessage.bind(Pd(u)),!1),u.resolutionListeners={},u}ya(s,o);var p=xa(s);return ma(s,[{key:"reset",value:function(){this.listeners={},this.sessionId="",this.nextMessageId=1,this.resolutionListeners={}}},{key:"sendMessage",value:function(i,u){var v=this,m=this.nextMessageId++,S={sessionId:this.sessionId,messageId:m,type:i===Mb.CREATE_SESSION?i:"SIMID:"+i,timestamp:Date.now(),args:u};return this.eventsThatRequireResponse.includes(i)?new Promise(function(P,x){v.addResolveRejectListener(m,P,x),v.target.postMessage(JSON.stringify(S),"*")}):new Promise(function(P){v.target.postMessage(JSON.stringify(S),"*"),P()})}},{key:"addListener",value:function(i,u){this.listeners[i]?this.listeners[i].push(u):this.listeners[i]=[u]}},{key:"addResolveRejectListener",value:function(i,u,v){this.resolutionListeners[i]=function(m){var S=m.type;m=m.args.value,S==="resolve"&&u(m),S==="reject"&&v(m)}.bind(this)}},{key:"receiveMessage",value:function(i){if(i&&i.data){var u=null;try{u=JSON.parse(i.data)}catch(m){return}i=u.type;var v=this.sessionId===u.sessionId;(this.sessionId===""&&i===Mb.CREATE_SESSION||v)&&i!==null&&(Object.values(Mb).includes(i)?this.handleProtocolMessage(u):i.startsWith("SIMID:")&&(i=i.substr(6),(i=this.listeners[i])&&i.forEach(function(m){m(u)})))}}},{key:"handleProtocolMessage",value:function(i){var u=i.type;switch(u){case Mb.CREATE_SESSION:this.sessionId=i.sessionId,this.resolve(i),(u=this.listeners[u])&&u.forEach(function(m){m(i)});break;case Mb.RESOLVE:case Mb.REJECT:u=i.args.messageId;var v=this.resolutionListeners[u];v&&(v(i),delete this.resolutionListeners[u])}}},{key:"resolve",value:function(i,u){var v=this.nextMessageId++,m={messageId:i.messageId,value:u};v={sessionId:this.sessionId,messageId:v,type:Mb.RESOLVE,timestamp:Date.now(),args:m},this.target.postMessage(JSON.stringify(v),"*")}},{key:"reject",value:function(i,u){var v=this.nextMessageId++,m={messageId:i.messageId,value:u};v={sessionId:this.sessionId,messageId:v,type:Mb.REJECT,timestamp:Date.now(),args:m},this.target.postMessage(JSON.stringify(v),"*")}},{key:"createSession",value:function(){var i=this;this.generateSessionId(),this.sendMessage(Mb.CREATE_SESSION).then(function(){Ja(Fa(s.prototype),"debug",i).info("[SIMID-Protocol] Session created.")},function(){Ja(Fa(s.prototype),"debug",i).info("[SIMID-Protocol] Session creation was rejected.")})}},{key:"generateSessionId",value:function(){var i=new Uint8Array(16);window.crypto.getRandomValues(i),i[6]=i[6]&15|64,i[8]=i[8]&63|128;var u="",v;for(v=0;16>v;v++)u+=(v===4||v===6||v===8||v===10?"-":"")+i[v].toString(16);this.sessionId=u}},{key:"setMessageTarget",value:function(i){this.target=i}}]),s}(jb),Yc={UNSPECIFIED:0,USER_INITIATED:1,MEDIA_PLAYBACK_COMPLETE:2,PLAYER_INITATED:3,CREATIVE_INITIATED:4,NON_LINEAR_DURATION_COMPLETE:5},mr=function(o){function s(i,u){la(this,s);var v=p.call(this);return v.currentAd=u,v.creativeAsset=v.currentAd.properCreative.selectedCreativeFile,v.mediaAsset=v.currentAd.properCreative.selectedMediaFile,v.player=i,v.simidProtocol=new lr(v.player.getPlayerElement()),v.addListeners(),v.simidIframe=null,v.initializationPromise=null,v.videoTrackingEvents=new Map,v.isLinearAd=v.mediaAsset.linearity==="linear",v.nonLinearStartTime=null,v.requestedDuration=0,v.resolveSessionCreatedPromise=null,v.sessionCreatedPromise=new Promise(function(m){v.resolveSessionCreatedPromise=m}),v.resolveInitializationPromise=null,v.rejectInitializationPromise=null,v.nonLinearDimensions=null,v.durationInterval=null,v.initializationPromise=new Promise(function(m,S){v.resolveInitializationPromise=m,v.rejectInitializationPromise=S}),v.trackEventsOnAdVideoElement(),v}ya(s,o);var p=xa(s);return ma(s,[{key:"initializeAd",value:function(){var i=this;this.isLinearAd||this.isValidDimensions(this.getNonlinearDimensions())?(this.simidIframe=this.createSimidIframe(),this.isLinearAd||this.displayNonlinearCreative(),this.requestDuration=0,this.initializationPromise.catch(function(u){i.onAdInitializedFailed(u)}),this.sessionCreatedPromise.then(function(){i.sendInitMessage(),i.dispatchEvent(A.ON_AD_LOADED)})):Ja(Fa(s.prototype),"debug",this).info("[SIMID-Player] Unable to play a non-linear ad with dimensions bigger than the player. Please modify dimensions to a smaller size.")}},{key:"playAd",value:function(){var i=this;Ja(Fa(s.prototype),"debug",this).info("[SIMID-Player] start creative playback"),this.initializationPromise.then(function(){i.startCreativePlayback()})}},{key:"addContainer",value:function(i){this.$container=vc("div",{id:"container--simid"}),i.parentNode.insertBefore(this.$container,i.nextSibling)}},{key:"createSimidIframe",value:function(){this.addContainer(this.player.getPlayerElement());var i=document.createElement("iframe");return Ja(Fa(s.prototype),"debug",this).info("[SIMID-Player] create SIMID-Iframe with",this.creativeAsset),i.src=this.creativeAsset.fileURL,i.style.display="none",this.$container.appendChild(i),this.simidProtocol.setMessageTarget(i.contentWindow),i}},{key:"addListeners",value:function(){this.simidProtocol.addListener(Mb.CREATE_SESSION,this.onSessionCreated.bind(this)),this.simidProtocol.addListener(Na.CLICK_THRU,this.onRequestClickThu.bind(this)),this.simidProtocol.addListener(Na.REQUEST_FULL_SCREEN,this.onRequestFullScreen.bind(this)),this.simidProtocol.addListener(Na.REQUEST_PLAY,this.onRequestPlay.bind(this)),this.simidProtocol.addListener(Na.REQUEST_PAUSE,this.onRequestPause.bind(this)),this.simidProtocol.addListener(Na.FATAL_ERROR,this.onCreativeFatalError.bind(this)),this.simidProtocol.addListener(Na.REQUEST_SKIP,this.onRequestSkip.bind(this)),this.simidProtocol.addListener(Na.REQUEST_STOP,this.onRequestStop.bind(this)),this.simidProtocol.addListener(Na.REQUEST_CHANGE_AD_DURATION,this.onRequestChangeAdDuration.bind(this)),this.simidProtocol.addListener(Na.GET_MEDIA_STATE,this.onGetMediaState.bind(this)),this.simidProtocol.addListener(Na.LOG,this.onReceiveCreativeLog.bind(this)),this.simidProtocol.addListener(Na.EXPAND_NONLINEAR,this.onExpandResize.bind(this)),this.simidProtocol.addListener(Na.COLLAPSE_NONLINEAR,this.onCollapse.bind(this)),this.simidProtocol.addListener(Na.REQUEST_RESIZE,this.onRequestResize.bind(this))}},{key:"onSessionCreated",value:function(){this.resolveSessionCreatedPromise()}},{key:"destroySimidIframe",value:function(){this.simidIframe&&(this.simidIframe.parentNode.remove(),this.simidIframe=null,this.simidProtocol.reset());var i=hj(this.videoTrackingEvents),u;try{for(i.s();!(u=i.n()).done;){var v=qg(u.value,2);this.player.removeEventListener(v[0],v[1],!0)}}catch(m){i.e(m)}finally{i.f()}this.videoTrackingEvents.clear()}},{key:"getFullDimensions",value:function(){var i=this.player.getPlayerSize();return{x:0,y:0,width:i.width,height:i.height}}},{key:"isValidDimensions",value:function(i){var u=this.player.getPlayerSize(),v=parseInt(i.y,10)+parseInt(i.height,10)<=parseInt(u.height,10);return i=parseInt(i.x,10)+parseInt(i.width,10)<=parseInt(u.width,10),v&&i}},{key:"getNonlinearDimensions",value:function(){if(this.nonLinearDimensions)return this.nonLinearDimensions;var i={};return i.x=this.player.getPlayerSize().x+100,i.y=this.player.getPlayerSize().y,i.height=this.currentAd.properCreative.selectedMediaFile.height,i.width=this.currentAd.properCreative.selectedMediaFile.width,i}},{key:"displayNonlinearCreative",value:function(){var i=this.getNonlinearDimensions();this.isValidDimensions(i)?(this.setSimidIframeDimensions(i),this.simidIframe.style.position="absolute",this.player.play(),this.requestedDuration=this.currentAd.duration):Ja(Fa(s.prototype),"debug",this).info("Unable to play a non-linear ad with dimensions bigger than the player. Please modify dimensions to a smaller size.")}},{key:"setSimidIframeDimensions",value:function(i){Ja(Fa(s.prototype),"debug",this).info("[SIMID-Player] resize",i),this.simidIframe.style.height=i.height,this.simidIframe.style.width=i.width,this.simidIframe.style.left="".concat(i.x,"px"),this.simidIframe.style.top="".concat(i.y,"px")}},{key:"onExpandResize",value:function(i){if(this.isLinearAd){var u={errorCode:1105,message:"Linear resize not yet supported."};this.simidProtocol.reject(i,u),Ja(Fa(s.prototype),"debug",this).info(u.message)}else u=this.getFullDimensions(),this.setSimidIframeDimensions(u),this.player.pause(),this.simidProtocol.resolve(i)}},{key:"onCollapse",value:function(i){var u=this.getNonlinearDimensions();this.isLinearAd?(u={message:"Cannot collapse linear ads."},this.simidProtocol.reject(i,u),Ja(Fa(s.prototype),"debug",this).info(u.message)):this.isValidDimensions(u)?(this.setSimidIframeDimensions(u),this.simidIframe.style.position="absolute",this.player.play(),this.simidProtocol.resolve(i)):(u={message:"Unable to collapse to dimensions bigger than the player. Please modify dimensions to a smaller size."},this.simidProtocol.reject(i,u),Ja(Fa(s.prototype),"debug",this).info(u.message))}},{key:"onRequestResize",value:function(i){if(this.isLinearAd){var u={errorCode:1105,message:"Linear resize not yet supported."};this.simidProtocol.reject(i,u),Ja(Fa(s.prototype),"debug",this).error("[SIMID-Player] error on request resize",u.message)}else this.isValidDimensions(i.args.creativeDimensions)?(this.nonLinearDimensions=i.args.creativeDimensions,this.setSimidIframeDimensions(i.args.creativeDimensions),this.simidProtocol.resolve(i)):(u={errorCode:1105,message:"Unable to resize a non-linear ad with dimensions bigger than the player. Please modify dimensions to a smaller size."},this.simidProtocol.reject(i,u),Ja(Fa(s.prototype),"debug",this).error("[SIMID-Player] error on request resize",u.message))}},{key:"sendInitMessage",value:function(){var i=this,u=this.getFullDimensions(),v=this.isLinearAd?this.getFullDimensions():this.getNonlinearDimensions();u={videoDimensions:u,creativeDimensions:v,fullscreen:!1,fullscreenAllowed:!0,variableDurationAllowed:!0,skippableState:"adHandles",siteUrl:document.location.host,appId:"",useragent:"",deviceId:"",muted:this.player.muted,volume:this.player.volume},v={adParameters:this.creativeAsset.adParameters,adId:this.currentAd.id,creativeId:"",adServingId:"",clickThroughUrl:this.currentAd.clickThroughURL},this.isLinearAd||(v.duration=this.currentAd.duration),this.simidProtocol.sendMessage("Player:init",{environmentData:u,creativeData:v}).then(function(m){i.resolveInitializationPromise(m)}).catch(function(m){i.rejectInitializationPromise(m)})}},{key:"startCreativePlayback",value:function(){this.showSimidIFrame(),this.isLinearAd?(Ja(Fa(s.prototype),"debug",this).info("[SIMID-Player] start linear creative"),this.playLinearVideoAd()):(Ja(Fa(s.prototype),"debug",this).info("[SIMID-Player] start nonLinear creative"),this.nonLinearStartTime=this.player.getCurrentTime(),this.player.play()),this.simidProtocol.sendMessage("Player:startCreative")}},{key:"playLinearVideoAd",value:function(){this.player.load(this.mediaAsset.fileURL),this.dispatchEvent(A.ON_AD_STARTED)}},{key:"onAdInitializedFailed",value:function(i){this.setError(21,"Unknown Manifest Loading Error."),this.dispatchEvent(A.ON_SIMID_ERROR),Ja(Fa(s.prototype),"debug",this).error("[SIMID-Player] Ad init failed.",JSON.stringify(i)),this.destroyIframeAndResumeContent()}},{key:"hideSimidIFrame",value:function(){this.simidIframe.style.display="none"}},{key:"showSimidIFrame",value:function(){this.simidIframe.style.bottom="0",this.simidIframe.style.display="block",this.simidIframe.style.height="100%",this.simidIframe.style.left="0",this.simidIframe.style.position="absolute",this.simidIframe.style.width="100%"}},{key:"setCreativeControlsState",value:function(i){document.querySelectorAll(".ad_request").forEach(function(u){u.disabled=i})}},{key:"trackEventsOnAdVideoElement",value:function(){var i=this;this.videoTrackingEvents.set("ended",this.videoComplete.bind(this)),this.videoTrackingEvents.set("error",function(){i.simidProtocol.sendMessage("Media:error",{error:902,message:"General InteractiveCreativeFile error code"}),i.dispatchEvent(A.ON_AD_ERROR)}),this.videoTrackingEvents.set("pause",function(){i.simidProtocol.sendMessage("Media:pause")}),this.videoTrackingEvents.set("play",function(){i.simidProtocol.sendMessage("Media:play")}),this.videoTrackingEvents.set("playing",function(){i.simidProtocol.sendMessage("Media:playing")}),this.videoTrackingEvents.set("seeked",function(){i.simidProtocol.sendMessage("Media:seeked")}),this.videoTrackingEvents.set("seeking",function(){i.simidProtocol.sendMessage("Media:seeking")}),this.videoTrackingEvents.set("timeupdate",function(){i.simidProtocol.sendMessage("Media:timeupdate",{currentTime:i.player.getCurrentTime()}),i.compareAdAndRequestedDurations(),i.dispatchEvent("timeupdate"),i.simidProtocol.sendMessage("Media:durationchange",{duration:i.player.getDuration()}),i.nonLinearStartTime!==null&&i.player.getCurrentTime()-i.nonLinearStartTime>i.requestedDuration&&i.stopAd(Yc.NON_LINEAR_DURATION_COMPLETE)}),this.videoTrackingEvents.set("volumechange",function(){i.simidProtocol.sendMessage("Media:volumechange",{volume:i.player.getVolume()})});var u=hj(this.videoTrackingEvents),v;try{for(u.s();!(v=u.n()).done;){var m=qg(v.value,2);this.player.addEventListener(m[0],m[1],!0)}}catch(S){u.e(S)}finally{u.f()}}},{key:"stopAd",value:function(){var i=this,u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:Yc.PLAYER_INITATED;Ja(Fa(s.prototype),"debug",this).info("SIMID-Player::stopAd",u),this.simidIframe&&(this.hideSimidIFrame(),this.simidProtocol.sendMessage("Player:adStopped").then(function(){Ja(Fa(s.prototype),"debug",i).info("SIMID-Player::stopAd-destroy",u),i.destroyIframeAndResumeContent()}))}},{key:"skipAd",value:function(){var i=this;this.hideSimidIFrame(),this.simidProtocol.sendMessage("Player:adSkipped").then(function(){return i.destroyIframeAndResumeContent()}),this.dispatchEvent(A.ON_AD_SKIPPED)}},{key:"destroyIframeAndResumeContent",value:function(){Ja(Fa(s.prototype),"debug",this).info("SIMID-Player::destroy"),this.destroySimidIframe(),this.setCreativeControlsState(!0),this.dispatchEvent(A.ON_AD_STOPPED)}},{key:"onRequestFullScreen",value:function(i){var u=this;Ja(Fa(s.prototype),"debug",this).info("SIMID-Player::onRequestFullScreen",i);var v=null;(v=(this.simidIframe.mozRequestFullScreen||this.simidIframe.msRequestFullscreen||this.simidIframe.requestFullscreen||this.simidIframe.webkitRequestFullscreen)())?(Ja(Fa(s.prototype),"debug",this).info("[SIMID-Player] fullscreen promise case",i),v.then(function(){return u.simidProtocol.resolve(i)})):this.simidProtocol.resolve(i)}},{key:"onRequestClickThu",value:function(i){i.args&&i.args.playerHandles&&this.pauseAd(),this.dispatchEvent(A.ON_AD_CLICKED)}},{key:"onRequestPlay",value:function(i){var u=this;this.isLinearAd?this.player.play().then(function(){return u.simidProtocol.resolve(i)}).catch(function(){u.simidProtocol.reject(i,{errorCode:1206,message:"The SIMID media could not be loaded."})}):this.simidProtocol.reject(i,{errorCode:1102,message:"Non linear ads do not play video."})}},{key:"onRequestPause",value:function(i){this.player.pause(),this.simidProtocol.resolve(i)}},{key:"pauseAd",value:function(){this.player.pause()}},{key:"onCreativeFatalError",value:function(i){this.simidProtocol.resolve(i),this.stopAd(Yc.CREATIVE_INITIATED)}},{key:"onRequestSkip",value:function(i){this.simidProtocol.resolve(i),this.skipAd()}},{key:"onRequestStop",value:function(i){this.simidProtocol.resolve(i),this.stopAd(Yc.CREATIVE_INITIATED)}},{key:"onReportTracking",value:function(i){i=i.args.trackingUrls,Ja(Fa(s.prototype),"debug",this).info("The creative has asked for the player to ping "+i)}},{key:"videoComplete",value:function(){var i=this;if(this.simidProtocol.sendMessage("Media:ended"),this.requestedDuration===0&&this.stopAd(Yc.MEDIA_PLAYBACK_COMPLETE),this.requestedDuration!==0&&this.requestedDuration!==-2){var u=1e3*(this.requestedDuration-this.player.getDuration());setTimeout(function(){i.stopAd(Yc.CREATIVE_INITIATED)},u)}}},{key:"onRequestChangeAdDuration",value:function(i){var u=i.args.duration;u!==-2&&0>u?this.simidProtocol.reject(i,{errorCode:1202,message:"A negative duration is not valid."}):(this.requestedDuration=u,this.compareAdAndRequestedDurations(),this.simidProtocol.resolve(i))}},{key:"compareAdAndRequestedDurations",value:function(){this.requestedDuration!==0&&this.requestedDuration!==-2&&this.player.getCurrentTime()>=this.requestedDuration&&(Ja(Fa(s.prototype),"debug",this).info("Creative requested a duration shorter than the ad",this.requestedDuration),this.stopAd(Yc.CREATIVE_INITATED))}},{key:"setError",value:function(i,u){this.currentAd.error={code:i,timestamp:Date.now(),message:u}}},{key:"onGetMediaState",value:function(i){var u={currentSrc:this.player.getCurrentContentSource(),currentTime:this.player.getCurrentTime(),duration:this.player.getDuration(),ended:this.player.ended,muted:this.player.isMuted(),paused:this.player.isPaused(),volume:this.player.getVolume(),fullscreen:this.player.fullscreen};this.simidProtocol.resolve(i,u)}},{key:"onReceiveCreativeLog",value:function(){}},{key:"sendLog",value:function(i){this.simidProtocol.sendMessage("Player:log",{message:i})}}]),s}(eb),nr=function(o){function s(i,u,v){la(this,s);var m=p.call(this);return m.resource=i,m.currentAd=v,m.config=v.config,m.$playerVideoElement=u,m.defaultElementStyle="position:absolute;top:0;left:0;width:100%;height:100%;",m.defaultIFrameStyle="position:absolute;top:0;left:0;width:0;height:0;overflow:hidden;border:none;visibility:hidden;",m.height=u.getBoundingClientRect().height,m.width=u.getBoundingClientRect().width,m.debugTiming=[],m.debugTiming.push({event:"constructor",time:Date.now()}),m.progressInterval=0,m.TIMEUPDATE_INTERVAL=250,m.addContainer(u),Hn("container--vpaid__iframe",m.defaultIFrameStyle,m.$container).then(function(S){m.$friendlyIFrame=S,m.debugTiming.push({event:"addFriendlyIFrame.done",time:Date.now()}),m.addSlots(),m.load()}),m}ya(s,o);var p=xa(s);return ma(s,[{key:"addContainer",value:function(i){this.$container=vc("div",{id:"container--vpaid",style:this.defaultElementStyle+"z-index:100;"}),i.parentNode.insertBefore(this.$container,i.nextSibling)}},{key:"addSlots",value:function(){this.debugTiming.push({event:"addSlots.start",time:Date.now()}),this.config.shareVideoElementWithVPAID||(this.$videoSlot=vc("video",{id:"container--vpaid__videoslot",style:this.defaultElementStyle}),this.$videoSlot.muted=!0,this.$friendlyIFrame.contentDocument.body.appendChild(this.$videoSlot)),this.$slot=vc("div",{id:"container--vpaid__slot",style:this.defaultElementStyle+"overflow:hidden;"}),this.$friendlyIFrame.contentDocument.body.appendChild(this.$slot),this.debugTiming.push({event:"addSlots.done",time:Date.now()})}},{key:"load",value:function(){var i=this;this.debugTiming.push({event:"vpaidScriptLoad.start",time:Date.now()}),this.$vpaidScript=vc("script",{type:"text/javascript",src:this.resource.fileURL}),this.timeoutScriptLoadTimer=setTimeout(function(){i.guardScriptLoadFail()},1e3*this.config.timeouts.vpaidRequest),this.$vpaidScript.onload=function(){clearTimeout(i.timeoutScriptLoadTimer),i.debugTiming.push({event:"vpaidScriptLoad.done -- maxTime:"+i.config.timeouts.vpaidRequest,time:Date.now()}),i.getVPAIDAd()&&i.isValidHandshake()&&(i.subscribeToVPAIDAd(),i.initAd())},this.$vpaidScript.onerror=function(u){i.debug.warn(">> VPAIDBridge.js::load() - Creative loading error.",u),clearTimeout(i.timeoutScriptLoadTimer),i.debugTiming.push({event:"vpaidScriptLoad.failed -- maxTime:"+i.config.timeouts.vpaidRequest,time:Date.now()}),i.currentAd.error.code=401,i.currentAd.error.description="File not found. Unable to find Linear/MediaFile from URI.",i.currentAd.enrichment.set("ERRORCODE",i.currentAd.error.code),i.onAdError("vpaidRequest failed",i.config.timeouts.vpaidRequest)},this.$friendlyIFrame.contentDocument.body.appendChild(this.$vpaidScript)}},{key:"getVPAIDAd",value:function(){return this.$friendlyIFrame.contentWindow.getVPAIDAd&&typeof this.$friendlyIFrame.contentWindow.getVPAIDAd=="function"?(this.vpaidAd=this.$friendlyIFrame.contentWindow.getVPAIDAd(),this.debug.info(">> VPAIDBridge.js::getVPAIDAd() - available properties - preHandshake:",Object.keys(this.vpaidAd)),!0):(this.debug.info(">> VPAIDBridge.js::getVPAIDAd() - getVPAIDAd not implemented - not a valid VPAID creative"),!1)}},{key:"isValidHandshake",value:function(){if(this.functionExistsOnVPAIDAd("handshakeVersion")){var i=this.vpaidAd.handshakeVersion("2.0")+"",u=parseInt(i.split(".")[0],10);return this.debug.info(">> VPAIDBridge.js::isValidHandshake() -- handshakeVersion:",i,"majorVersion:",u),this.debug.info(">> VPAIDBridge.js::getVPAIDAd() - available properties - afterHandshake:",Object.keys(this.vpaidAd)),2>=u}return!1}},{key:"getCreativeData",value:function(){return{AdParameters:this.resource.adParameters}}},{key:"getEnvironmentVars",value:function(){return{slot:this.$slot,videoSlot:this.config.shareVideoElementWithVPAID?this.$playerVideoElement:this.$videoSlot}}},{key:"initAd",value:function(){var i=this;this.debugTiming.push({event:"initAd.start",time:Date.now()}),this.debug.info(">> VPAIDBridge.js::initAd() -- this.config.shareVideoElementWithVPAID",this.config.shareVideoElementWithVPAID),this.functionExistsOnVPAIDAd("initAd")&&(this.timeoutAdLoadedTimer=setTimeout(function(){i.guardAdLoadedFail()},1e3*this.config.timeouts.vpaidReadiness),this.debug.info(">> VPAIDBridge.js::initAd()","WxH:",this.width+"x"+this.height,"viewMode:",this.config.viewMode,"bitrate:",this.config.bitrate,"creativeData:",this.getCreativeData(),"environmentVars:",this.getEnvironmentVars()),this.vpaidAd.initAd(this.width,this.height,this.config.viewMode,this.config.bitrate,this.getCreativeData(),this.getEnvironmentVars()))}},{key:"functionExistsOnVPAIDAd",value:function(i){return this.vpaidAd&&this.vpaidAd[i]&&typeof this.vpaidAd[i]=="function"}},{key:"subscribeToVPAIDAd",value:function(){this.callbacks={AdStarted:this.onStartAd,AdStopped:this.onStopAd,AdSkipped:this.onSkipAd,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog};for(var i in this.callbacks)this.callbacks.hasOwnProperty(i)&&this.vpaidAd.subscribe(this.callbacks[i],i,this)}},{key:"unsubscribeFromVPAIDAd",value:function(){for(var i in this.callbacks)this.callbacks.hasOwnProperty(i)&&this.functionExistsOnVPAIDAd("unsubscribe")&&this.vpaidAd.unsubscribe(this.callbacks[i],i,this)}},{key:"guardScriptLoadFail",value:function(){this.debug.info(">> VPAIDBridge.js::guardScriptLoadFail() - script didn't load"),clearTimeout(this.timeoutScriptLoadTimer),this.$vpaidScript.onload=null,this.$vpaidScript.onerror=null,this.currentAd.error.code=402,this.currentAd.error.description="Timeout of VPAID resource URI.",this.currentAd.enrichment.set("ERRORCODE",this.currentAd.error.code),this.onAdError("vpaidRequest timeout",this.config.timeouts.vpaidRequest)}},{key:"guardAdLoadedFail",value:function(){this.debug.info(">> VPAIDBridge.js::guardAdLoadedFail()"),clearTimeout(this.timeoutAdLoadedTimer),this.currentAd.error.code=901,this.currentAd.error.description="General VPAID error. Creative doesn't initialize.",this.currentAd.enrichment.set("ERRORCODE",this.currentAd.error.code),this.onAdError("vpaidReadiness timeout",this.config.timeouts.vpaidReadiness)}},{key:"cleanUp",value:function(){clearInterval(this.progressInterval),this.progressInterval=0,this.debug.info(">> VPAIDBridge.js::cleanUp()"),this.unsubscribeFromVPAIDAd(),this.removeContainer()}},{key:"removeContainer",value:function(){this.$container.parentNode&&this.$container.parentNode.removeChild(this.$container)}},{key:"onAdLoaded",value:function(){this.debug.info(">> VPAIDBridge.js::onAdLoaded()"),this.debugTiming.push({event:"initAd.done - in onAdLoaded() -- maxTime:"+this.config.timeouts.vpaidReadiness,time:Date.now()}),clearTimeout(this.timeoutAdLoadedTimer),this.dispatchEvent(A.ON_AD_LOADED),this.functionExistsOnVPAIDAd("startAd")&&(this.$friendlyIFrame.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;border:none;"),this.vpaidAd.startAd())}},{key:"pause",value:function(){this.debug.info(">> VPAIDBridge.js::pause()"),this.functionExistsOnVPAIDAd("pauseAd")&&this.vpaidAd.pauseAd()}},{key:"play",value:function(){this.debug.info(">> VPAIDBridge.js::pause()"),this.functionExistsOnVPAIDAd("resumeAd")&&this.vpaidAd.resumeAd()}},{key:"setVolume",value:function(i){this.debug.info(">> VPAIDBridge.js::setVolume()",i),this.functionExistsOnVPAIDAd("setAdVolume")&&this.vpaidAd.setAdVolume(i)}},{key:"resizeAd",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::resizeAd()",i,u,v),this.functionExistsOnVPAIDAd("resizeAd")&&this.vpaidAd.resizeAd(i,u,v)}},{key:"onStartAd",value:function(){this.debug.info(">> VPAIDBridge.js::onStartAd()"),this.dispatchEvent(A.ON_AD_STARTED),this.debugTiming.push({event:"onStartAd",time:Date.now()}),this.logTimings()}},{key:"onAdImpression",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdImpression()",i,u,v),this.dispatchEvent(A.ON_AD_IMPRESSION)}},{key:"onAdVideoStart",value:function(i,u,v){var m=this;this.debug.info(">> VPAIDBridge.js::onAdVideoStart()",i,u,v),this.dispatchEvent(A.ON_AD_PLAYBACK_START),this.onAdRemainingTimeChange(),this.progressInterval=setInterval(this.onAdRemainingTimeChange.bind(this),this.TIMEUPDATE_INTERVAL),setTimeout(function(){0>=m._remainingTime&&(m.debug.warn(">> VPAIDBridge.js::onAdRemainingTimeChange() - Ad didn't update times after 10 tries.Stop monitoring ad progress."),clearInterval(m.progressInterval),m.progressInterval=0)},10*this.TIMEUPDATE_INTERVAL)}},{key:"onAdVideoFirstQuartile",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdVideoFirstQuartile()",i,u,v),this.dispatchEvent(A.ON_AD_FIRST_QUARTILE)}},{key:"onAdVideoMidpoint",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdVideoMidpoint()",i,u,v),this.dispatchEvent(A.ON_AD_MID_POINT)}},{key:"onAdVideoThirdQuartile",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdVideoThirdQuartile()",i,u,v),this.dispatchEvent(A.ON_AD_THIRD_QUARTILE)}},{key:"onAdVideoComplete",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdVideoComplete()",i,u,v),clearInterval(this.progressInterval),this.onAdRemainingTimeChange(),this.dispatchEvent(A.ON_AD_PLAYBACK_FINISHED)}},{key:"onAdDurationChange",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdDurationChange()",i,u,v),this.getAllProperties()}},{key:"onStopAd",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onStopAd()",i,u,v),this.dispatchEvent(A.ON_AD_STOPPED),this.cleanUp()}},{key:"onAdError",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdError()",i,u,v),this.currentAd.error.code=this.currentAd.error.code||901,this.currentAd.error.description=this.currentAd.error.description||"General VPAID error. Creative doesn't initialize.",this.currentAd.enrichment.set("ERRORCODE",this.currentAd.error.code),this.dispatchEvent(A.ON_AD_ERROR),this.cleanUp()}},{key:"onSkipAd",value:function(i,u,v){this.dispatchEvent(A.ON_AD_SKIPPED),this.debug.info(">> VPAIDBridge.js::onSkipAd()",i,u,v),this.cleanUp()}},{key:"onAdLinearChange",value:function(){this.dispatchEvent(A.ON_AD_LINEARITY_CHANGE)}},{key:"onAdSizeChange",value:function(){this.functionExistsOnVPAIDAd("getAdWidth")&&this.functionExistsOnVPAIDAd("getAdHeight")&&this.debug.info(">> VPAIDBridge.js::onAdSizeChange()",this.vpaidAd.getAdWidth(),this.vpaidAd.getAdHeight()),this.dispatchEvent(A.ON_AD_SIZE_CHANGED)}},{key:"onAdExpandedChange",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdExpandedChange()",i,u,v)}},{key:"onAdSkippableStateChange",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdSkippableStateChange()",i,u,v),this.dispatchEvent(A.ON_AD_SKIPPABLE_STATE_CHANGE)}},{key:"onAdRemainingTimeChange",value:function(){this.functionExistsOnVPAIDAd("getAdDuration")&&(this._duration=this.vpaidAd.getAdDuration()),this.functionExistsOnVPAIDAd("getAdRemainingTime")&&(this._remainingTime=this.vpaidAd.getAdRemainingTime()),this.dispatchEvent(A.ON_AD_PROGRESS)}},{key:"onAdVolumeChange",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdVolumeChange()",i,u,v)}},{key:"onAdClickThru",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1;this.debug.info(">> VPAIDBridge.js::onAdClickThru() - creative handles click",!v),v===!0&&(this.debug.info(">> VPAIDBridge.js::onAdClickThru() - open landing page",i,u),this.currentAd.clickThroughURL=i||this.currentAd.clickThroughURL,this.currentAd.handleClickThrough=v),this.dispatchEvent(A.ON_AD_CLICKED)}},{key:"onAdInteraction",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdInteraction()",i,u,v)}},{key:"onAdUserAcceptInvitation",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdUserAcceptInvitation()",i,u,v)}},{key:"onAdUserMinimize",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdUserMinimize()",i,u,v)}},{key:"onAdUserClose",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdUserClose()",i,u,v)}},{key:"onAdPaused",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdPaused()",i,u,v)}},{key:"onAdPlaying",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdPlaying()",i,u,v),this.dispatchEvent(A.ON_AD_PLAYING)}},{key:"onAdLog",value:function(i,u,v){this.debug.info(">> VPAIDBridge.js::onAdLog()",i,u,v)}},{key:"duration",get:function(){return this._duration||0}},{key:"remainingTime",get:function(){return this._remainingTime||0}},{key:"getAllProperties",value:function(){if(this.config.debug){var i=Object.keys(this.vpaidAd),u;for(u in i)i.hasOwnProperty(u)&&i[u].indexOf("getAd")===0&&this.debug.info(">> VPAIDBridge.js::--vpaidAd."+i[u]+"()",this.vpaidAd[i[u]]())}}},{key:"logTimings",value:function(){this.config.debug&&(this.debugTiming.map(function(i,u,v){i.delta=u===0?0:v[u].time-v[u-1].time}),this.debug.table(this.debugTiming))}}]),s}(eb),le=function(o){function s(i,u,v,m){la(this,s);var S=p.call(this);return S.player=m,S.environmentVars=v,S.eventHandlers=[],S.eventKeys=Object.keys(A),S.eventTypes=Object.values(A),S.requestedTrackingEvents=[],S.currentViewMode=s.VIEW_MODE.NORMAL,S.adSlotHasStarted=!1,S.prepare(i,u),S}ya(s,o);var p=xa(s);return ma(s,[{key:"prepare",value:function(i,u){this.manifest=i.slice(0),this.buffet=(u||[]).slice(0),this.adSlotTimes=new Aq(this.manifest),this.currentAd=null,clearTimeout(this.loadPendingTimeout),this.loadPendingTimeout=null,this.environmentVars.vastMacros=Object.assign(this.environmentVars.vastMacros||{},{CONTENTPLAYHEAD:this.player.getCurrentTime(),MEDIAPLAYHEAD:this.player.getCurrentTime()})}},{key:"addPlayerEventListener",value:function(i,u){var v=this;return this.player.addEventListener(i,u),this.eventHandlers.push(function(){return v.player.removeEventListener(i,u)}),function(){return v.player.removeEventListener(i,u)}}},{key:"removePlayerEventListener",value:function(i,u){this.player.removeEventListener(i,u)}},{key:"pause",value:function(){this.currentAd&&(this.currentAd.isVPAID?this.vpaidPlayer.pause():this.player.pause())}},{key:"play",value:function(){this.currentAd&&(this.currentAd.isVPAID?this.vpaidPlayer.play():this.player.play())}},{key:"on",value:function(){var i=this;this.off(),this.addPlayerEventListener("timeupdate",function(){i.timeupdate()}),this.addPlayerEventListener("playerPause",function(){i.currentAd.isPaused=!0,0<i.player.getCurrentTime()&&i.player.getCurrentTime()<i.player.getDuration()&&i.dispatchEvent(A.ON_AD_PAUSED)}),this.addPlayerEventListener("playerPlay",function(){i.currentAd.isPaused=!1,0<i.player.getCurrentTime()&&i.dispatchEvent(A.ON_AD_PLAYING)}),this.addPlayerEventListener("volumeChanged",function(){i.currentAd&&(isNaN(i.currentAd.volume)||(i.currentAd.volume===0&&0<i.player.getVolume()?i.dispatchEvent(A.ON_AD_UNMUTED):0<i.currentAd.volume&&i.player.getVolume()===0&&i.dispatchEvent(A.ON_AD_MUTED)),i.currentAd.volume=i.player.getVolume(),i.dispatchEvent(A.ON_AD_VOLUME_CHANGED))}),this.addEventListener(A.ON_AD_STARTED,this._saveStartVolume),this.addEventListener(A.ON_AD_STARTED,function(){i.currentAd.isVPAID||i.currentAd.isSIMID||(i.removeDeliverNextAdEventHandler=i.addPlayerEventListener("ended",function(){i.debug.info("AdSlotDelivery: Received ended event from the video player.",i.currentAd),i.timeupdate(),i.dispatchEvent(A.ON_AD_FINISHED),i.dispatchEvent(A.ON_AD_STOPPED),i._deliverNextAd()}))}),this.addPlayerEventListener("error",function(){i.debug.info("[AdSlotDelivery] Player sent error event, getError() returns",i.player.getError())}),Object.keys(A).forEach(function(u){u=i.addEventListener(A[u],function(v){i._trackEvent(v.type)}),i.eventHandlers.push(u)})}},{key:"off",value:function(){this.debug.info("[AdSlotDelivery] Unsubscribe event listeners. Current list",this.eventHandlers),this.eventHandlers.forEach(function(i){i()}),this.eventHandlers=[]}},{key:"_saveStartVolume",value:function(){this.currentAd&&this.player&&(this.currentAd.volume=this.player.getVolume(),this.currentAd.isVPAID&&this.vpaidPlayer.setVolume(this.player.getVolume()))}},{key:"stop",value:function(){var i=this;return this.off(),new Promise(function(u){if(!i.adSlotHasStarted)return u();i.removeDeliverNextAdEventHandler&&i.removeDeliverNextAdEventHandler(),i.currentAd={},i.adSlotHasStarted&&(i.adSlotHasStarted=!1,i.dispatchEvent(A.ON_AD_SLOT_FINISHED),i.dispatchEvent(A.ON_AD_SLOT_STOPPED)),u()})}},{key:"_getBuffetAdAndDeliverNextAd",value:function(){if(!this.currentAd.replaced&&this.currentAd.fallbackOnNoAd&&0<this.buffet.length){var i=this.buffet.shift();i.sequence=parseFloat(this.currentAd.sequence)+.1,i.info.currentClip=this.currentAd.info.currentClip,i.info.currentCommercial=this.currentAd.info.currentCommercial,i.info.totalClips=this.currentAd.info.totalClips,i.info.totalCommercials=this.currentAd.info.totalCommercials,i.info.totalPlayableClips=this.currentAd.info.totalPlayableClips,i.info.totalPlayableCommercials=this.currentAd.info.totalPlayableCommercials,this.debug.info("[AdSlotDelivery] Insert buffet ad at runtime",i),this.currentAd.replaced=!0,this.manifest.unshift(i),i.variant===cb.COMMERCIAL&&(i=i.duration,this.currentAd.isLinear||(i+=this.currentAd.duration),this.debug.info("[AdSlotDelivery] Adjust AdSlotTime.totalCommercialsDuration after replace",i),this.setTotalCommercialsDurationAndDispatchEvent(i))}this._deliverNextAd()}},{key:"deliver",value:function(){this._deliverNextAd()}},{key:"cancelAd",value:function(){this.currentAd.error.code=403,this.currentAd.error.description="Couldn't find MediaFile that is supported by this video player,based on the attributes of the MediaFile element.",this._cancelAdWithError()}},{key:"_deliverNextAd",value:function(){var i=this,u=this;clearTimeout(u.loadPendingTimeout);var v=u.manifest;if(0<v.length){var m=function(){var P=u.currentAd.properCreative,x=P.selectedMediaFile;u.currentAd.info=u.currentAd.info,u.currentAd.info.universalAdId=u.currentAd.universalAdId,u.currentAd.info.universalAdIds=u.currentAd.universalAdIds,u.currentAd.isLinear=!0,u.currentAd.isExpanded=!1,u.currentAd.isVPAID=x.isVPAID,u.currentAd.isSIMID=!!P.selectedCreativeFile,u.currentAd.isInteractive=u.currentAd.isVPAID||u.currentAd.isSIMID,u.currentAd.skipOffset=u.currentAd.skipOffset||u.currentAd.config.skipOffset,u.currentAd.isSkippable=!1,u.currentAd.enrichment.setFromObject(u.environmentVars.vastMacros),u.currentAd.enrichment.set("ASSETURI",x.fileURL),u.currentAd.enrichment.set("BLOCKED",u.currentAd.adReinsertion.isActive),u.currentAd.enrichment.set("ERRORCODE",0),u.currentAd.enrichment.set("UNIVERSALADID",u.currentAd.universalAdIds),u.currentAd.enrichment.set("PODSEQUENCE",u.currentAd.sequence),u.currentAd.enrichment.set("ADTYPE",u.currentAd.adType||"video"),u.currentAd.enrichment.set("ADSERVINGID",u.currentAd.adServingId),u.currentAd.enrichment.set("MEDIAMIME",u.environmentVars.desiredMimeTypes||Object.values(md)),u.requestedTrackingEvents=[],u.currentAd.trackingEvents=Object.assign({},u.currentAd.adTrackers,P.creativeTrackers),new Nq(u,u.player),u.dispatchEvent(A.ON_AD_START),u._deployConcurrentAssets(),u.removeDeliverNextAdEventHandler&&u.removeDeliverNextAdEventHandler(),u.removeImpressionOnStartHandler&&u.removeImpressionOnStartHandler(),u.currentAd.isSIMID?(u.debug.info("[AdSlotDelivery] SIMID Case"),u.loadAdSIMID(u.player,u.currentAd)):x.isVPAID?(P=Pe(u.player),u.loadAdVPAID(x,P,u.currentAd)):(u.removeImpressionOnStartHandler=u.addEventListener(u.currentAd.config.trackImpressionOnStart?A.ON_AD_PLAYBACK_START:A.ON_AD_STARTED,function(){u.dispatchEvent(A.ON_AD_IMPRESSION),u.dispatchEvent(A.ON_AD_CREATIVE_VIEW)}),u.loadAd(x))};if(u.currentAd=v.shift(),u.debug.info("[AdSlotDelivery] Deliver Linear Ad.",u.currentAd),u.adSlotHasStarted||(u.dispatchEvent(A.ON_AD_SLOT_STARTED),u.adSlotHasStarted=!0,u.on()),u.currentAd.hasError)u.currentAd.trackingEvents=u.currentAd.adTrackers,u._cancelAdWithError();else if(u.currentAd.config.adSourceSelector)if(v=new Promise(function(P){setTimeout(P,250,null)}),u.currentAd.properCreative&&u.currentAd.properCreative.mediaFiles.length){var S=u.currentAd.config.adSourceSelector(u.currentAd.properCreative.mediaFiles).then(function(P){return P===null||Object.keys(P).length===0?null:P});Promise.race([v,S]).then(function(P){P===null?i.cancelAd():(u.currentAd.properCreative.selectedMediaFile=P,m())}).catch(function(){i.cancelAd()})}else this.cancelAd();else m()}else u.stop()}},{key:"setTotalCommercialsDurationAndDispatchEvent",value:function(i){this.adSlotTimes.setTotalCommercialsDuration(i),this.dispatchEvent(A.ON_AD_SLOT_DURATION_CHANGE)}},{key:"_cancelAdWithError",value:function(){if(this.currentAd.error.code=this.currentAd.error.code||200,this.currentAd.error.description=this.currentAd.error.description||"The video player received an ad type that it wasn't expectingand/or cannot display.",this.currentAd.enrichment.set("ERRORCODE",this.currentAd.error.code),this.dispatchEvent(A.ON_AD_ERROR),this.currentAd.variant===cb.COMMERCIAL){var i=-1*this.currentAd.duration;this.debug.info("[AdSlotDelivery] Decrease AdSlotTime.totalCommercialsDuration",i),this.setTotalCommercialsDurationAndDispatchEvent(i)}this._getBuffetAdAndDeliverNextAd()}},{key:"_deployConcurrentAssets",value:function(){var i=this.currentAd.creatives.filter(function(u){return u.type==="companion"&&u.hasCompanionResources});i&&0<i.length&&this.dispatchEvent(A.ON_COMPANIONS_DETECTED),this.currentAd.extensions&&0<this.currentAd.extensions.length&&this.dispatchEvent(A.ON_EXTENSIONS_DETECTED),this.currentAd.icons&&0<Object.keys(this.currentAd.icons).length&&this.dispatchEvent(A.ON_ICONS_DETECTED),this.currentAd.closedCaptions&&0<this.currentAd.closedCaptions.length&&this.dispatchEvent(A.ON_CLOSED_CAPTIONS_DETECTED),i=Pe(this.player),new ac(this.currentAd,this,i),this.currentAd.adVerifications&&0<this.currentAd.adVerifications.length&&this.dispatchEvent(A.ON_VERIFICATION_DETECTED)}},{key:"loadAd",value:function(i){var u=this,v=i.fileURL,m=!1;clearTimeout(this.loadPendingTimeout),this.loadPendingTimeout=setTimeout(function(S){m=!0,u.debug.error("VideoProxy load timeout.",S),u.currentAd.error.code=402,u.currentAd.error.description="Timeout of MediaFile URI.",u.currentAd.adReinsertion.isActive?u._cancelAdWithError():(u.currentAd.adReinsertion.setReinsertionReason({reason:sa.REASON.MEDIAFILE_TIMEOUT,source:v,error:u.currentAd.error}),u.currentAd.adReinsertion.enable(function(){u.currentAd.enrichment.set("ERRORCODE",u.currentAd.error.code),u.dispatchEvent(A.ON_AD_ERROR),sa.EventDispatcher.dispatchEvent(A.ON_AD_REINSERTION_ACTIVATION)},function(){u._cancelAdWithError()}))}.bind(this),1e3*this.currentAd.config.timeouts.videoRequest),this.debug.info("[AdSlotDelivery] Load MediaFile from URI",v),this.player.load(v,!0).then(function(){clearTimeout(u.loadPendingTimeout),m||(u.debug.info("[AdSlotDelivery] Load MediaFile success."),u.dispatchEvent(A.ON_AD_LOADED),u.dispatchEvent(A.ON_AD_STARTED))},function(S){clearTimeout(u.loadPendingTimeout),m||(u.debug.error("[AdSlotDelivery] Load MediaFile failed",S),u.currentAd.error.code=405,u.currentAd.error.description="Problem displaying MediaFile. Video player found a MediaFile with supported typebut couldn't display it. MediaFile may include:unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc.",u.currentAd.adReinsertion.isActive?u._cancelAdWithError():(u.currentAd.adReinsertion.setReinsertionReason({reason:sa.REASON.MEDIAFILE_LOAD_ERROR,source:v,error:u.currentAd.error}),u.currentAd.adReinsertion.enable(function(){u.currentAd.enrichment.set("ERRORCODE",u.currentAd.error.code),u.dispatchEvent(A.ON_AD_ERROR),sa.EventDispatcher.dispatchEvent(A.ON_AD_REINSERTION_ACTIVATION)},function(){u._cancelAdWithError()})))})}},{key:"loadAdSIMID",value:function(i,u){var v=this;this.simidPlayer=new mr(i,u),this.simidPlayer.initializeAd(),[A.ON_AD_CLICKED,A.ON_AD_ERROR,A.ON_AD_LOADED,A.ON_AD_SIZE_CHANGED,A.ON_AD_STARTED,A.ON_AD_STOPPED,A.ON_SIMID_ERROR].map(function(m){v.simidPlayer.addEventListener(m,function(S){return v.simidEventHandler(S)})}),["timeupdate"].map(function(m){v.simidPlayer.addEventListener(m,function(S){return v.simidPlayerEventHandler(S)})})}},{key:"simidEventHandler",value:function(i){switch(i.type){case A.ON_AD_CLICKED:this.onClickThrough();break;case A.ON_AD_ERROR:this.currentAd.error.code=902,this.currentAd.error.description="General InteractiveCreativeFile error code",this._cancelAdWithError();break;case A.ON_AD_LOADED:this.debug.info("[AdSlotDelivery] SIMID-Loaded",this.simidPlayer),this.simidPlayer.playAd();break;case A.ON_AD_SIZE_CHANGED:this.dispatchEvent(i.type);break;case A.ON_AD_STARTED:this.dispatchEvent(i.type);break;case A.ON_AD_STOPPED:this.dispatchEvent(i.type),this._deliverNextAd();break;case A.ON_SIMID_ERROR:this._cancelAdWithError()}}},{key:"simidPlayerEventHandler",value:function(i){switch(i.type){case"timeupdate":this.timeupdate()}}},{key:"loadAdVPAID",value:function(i,u,v){var m=this;this.vpaidPlayer=new nr(i,u,v),[A.ON_AD_CLICKED,A.ON_AD_LOADED,A.ON_AD_STARTED,A.ON_AD_IMPRESSION,A.ON_AD_PLAYING,A.ON_AD_PLAYBACK_START,A.ON_AD_FIRST_QUARTILE,A.ON_AD_MID_POINT,A.ON_AD_THIRD_QUARTILE,A.ON_AD_PLAYBACK_FINISHED,A.ON_AD_STOPPED,A.ON_AD_SKIPPED,A.ON_AD_ERROR,A.ON_AD_PROGRESS,A.ON_AD_SIZE_CHANGED,A.ON_AD_SKIPPABLE_STATE_CHANGE].map(function(S){m.vpaidPlayer.addEventListener(S,function(P){return m.vpaidEventHandler(P)})})}},{key:"vpaidEventHandler",value:function(i){switch(i.type){case A.ON_AD_LOADED:case A.ON_AD_STARTED:case A.ON_AD_IMPRESSION:case A.ON_AD_PLAYING:case A.ON_AD_PLAYBACK_START:case A.ON_AD_FIRST_QUARTILE:case A.ON_AD_MID_POINT:case A.ON_AD_THIRD_QUARTILE:case A.ON_AD_PLAYBACK_FINISHED:this.requestedTrackingEvents.push(i.type),this.dispatchEvent(i.type);break;case A.ON_AD_CLICKED:this.onClickThrough(!this.currentAd.handleClickThrough);break;case A.ON_AD_SKIPPABLE_STATE_CHANGE:this._onAdSkippableStateChange();break;case A.ON_AD_PROGRESS:this.timeupdate();break;case A.ON_AD_SIZE_CHANGED:this.dispatchEvent(i.type);break;case A.ON_AD_SKIPPED:this.requestedTrackingEvents.push(i.type),this.onSkip();break;case A.ON_AD_ERROR:this.requestedTrackingEvents.push(i.type),this.dispatchEvent(i.type),this._deliverNextAd();break;case A.ON_AD_STOPPED:this.dispatchEvent(i.type),this._deliverNextAd()}}},{key:"_onAdSkippableStateChange",value:function(){this.currentAd.adSkippableStateChangeSent||(this.currentAd.adSkippableStateChangeSent=!0,this.currentAd.isSkippable=!0,this.dispatchEvent(A.ON_AD_SKIPPABLE_STATE_CHANGE))}},{key:"getMinimalDurationTime",value:function(){return this.currentAd.minSuggestedDuration&&0<this.currentAd.minSuggestedDuration?Math.min(this.currentAd.minSuggestedDuration,this.currentAd.config.timeouts.nonlinearMaxDuration):this.currentAd.config.timeouts.nonlinearMaxDuration}},{key:"timeupdate",value:function(){var i=this,u=this.currentAd.isVPAID?this.vpaidPlayer.duration-this.vpaidPlayer.remainingTime:this.player.getCurrentTime(),v=this.currentAd.isVPAID?this.vpaidPlayer.duration:this.player.getDuration();if(!(!this.currentAd||isNaN(v)||!isNaN(v)&&0>=v||1>Object.keys(this.currentAd).length)){if(this.currentAd.enrichment.set("ADPLAYHEAD",Ne(u)),this.currentAd.variant===cb.COMMERCIAL){var m=v-this.currentAd.duration;m&&Number.isFinite(m)&&(this.currentAd.isLinear||(m=this.currentAd.isVPAID?this.vpaidPlayer.duration:this.getMinimalDurationTime()),this.setTotalCommercialsDurationAndDispatchEvent(m)),u>=v?(this.adSlotTimes.setCurrentTimeOffset(this.adSlotTimes.totalCommercialsCurrentTime),this.adSlotTimes.setCommercialsCurrentTime(this.adSlotTimes.currentTimeOffset)):this.adSlotTimes.setCommercialsCurrentTime(this.adSlotTimes.currentTimeOffset+u)}if(this.currentAd.duration=this.currentAd.info.duration=v,this.currentAd.currentTime=this.currentAd.info.currentTime=u,this.currentAd.remainingTime=v-u,[cb.COMMERCIAL,cb.SPONSORED].includes(this.currentAd.variant)&&Number.isFinite(this.currentAd.skipOffset)&&-1<this.currentAd.skipOffset&&u>=this.currentAd.skipOffset&&this._onAdSkippableStateChange(),(this.currentAd.properCreative&&this.currentAd.properCreative.creativeTrackers&&this.currentAd.properCreative.creativeTrackers.progress?this.currentAd.properCreative.creativeTrackers.progress:[]).forEach(function(x){var w=x.offset;-1<w.indexOf("%")&&(w=parseInt(w,10)/100*v),u>=parseInt(w,10)&&!x.requested&&i.dispatchEvent(A.ON_AD_PROGRESS)}),!this.currentAd.isVPAID){m=[];var S=[];u>=v&&m.push(A.ON_AD_PLAYBACK_FINISHED),u>=v/(4/3)&&m.push(A.ON_AD_THIRD_QUARTILE),u>=v/2&&m.push(A.ON_AD_MID_POINT),u>=v/4&&m.push(A.ON_AD_FIRST_QUARTILE),u&&m.push(A.ON_AD_PLAYBACK_START),S.push(m[0]),this.currentAd.config.trackSkippedQuartiles&&(S=m),m=function(x){if(i.requestedTrackingEvents.filter(function(w){return w===S[x]}).shift())return"continue";i.dispatchEvent(S[x])};for(var P=S.length-1;0<=P;P--)m(P)}}}},{key:"getCurrentAd",value:function(){return this.currentAd}},{key:"onRewind",value:function(){this.dispatchEvent(A.ON_AD_REWIND)}},{key:"onClickThrough",value:function(i){this.dispatchEvent(A.ON_AD_CLICKED);var u=this.currentAd.enrichment.apply(this.currentAd.clickThroughURL);return u&&u.indexOf("//")===0&&(u=Rd(u)),i||window.open(u,this.currentAd.adReinsertion.isActive?"_self":"_blank"),u}},{key:"onIconClickThrough",value:function(i,u){if(!this.currentAd.icons[i])return null;this._callTrackers(this.currentAd.icons[i].clickTracker);var v=this.currentAd.enrichment.apply(this.currentAd.icons[i].clickThroughURL);return u||window.open(v,this.currentAd.adReinsertion.isActive?"_self":"_blank"),v}},{key:"onIconView",value:function(i){this.currentAd&&this.currentAd.icons[i]&&this._callTrackers(this.currentAd.icons[i].creativeViewTracker)}},{key:"onVerificationNotExecuted",value:function(i,u){if(this.currentAd&&this.currentAd.adVerifications){var v=this.currentAd.adVerifications.filter(function(S){return S.vendor===i})[0];if(v&&v.tracking.verificationNotExecuted){v=v.tracking.verificationNotExecuted;var m=parseInt(u,10);u&&isFinite(m)&&1<=m&&3>=m&&this.currentAd.enrichment.set("REASON",m),v&&0<v.length&&this._callTrackers(v)}}}},{key:"onSkip",value:function(){this.currentAd.variant===cb.COMMERCIAL&&(this.adSlotTimes.setCommercialsCurrentTime(this.adSlotTimes.currentTimeOffset+this.currentAd.duration),this.adSlotTimes.setCurrentTimeOffset(this.adSlotTimes.totalCommercialsCurrentTime)),this.dispatchEvent(A.ON_AD_SKIPPED),this._deliverNextAd()}},{key:"onResizeAd",value:function(i,u){this.currentAd&&(u===s.VIEW_MODE.FULLSCREEN&&u!==this.currentViewMode?(this.currentViewMode=u,this.dispatchEvent(A.ON_ENTER_FULLSCREEN),this.dispatchEvent(A.ON_PLAYER_EXPAND)):this.currentViewMode===s.VIEW_MODE.FULLSCREEN&&u!==this.currentViewMode&&(this.currentViewMode=u,this.dispatchEvent(A.ON_EXIT_FULLSCREEN),this.dispatchEvent(A.ON_PLAYER_COLLAPSE)),this.currentAd.isVPAID?this.vpaidPlayer.resizeAd(i.width,i.height,u):this.dispatchEvent(A.ON_AD_SIZE_CHANGED))}},{key:"_trackEvent",value:function(i){var u=this.eventKeys[this.eventTypes.indexOf(i)];u=Vc[u];var v=this.player.getCurrentTime(),m=this.player.getDuration();this.requestedTrackingEvents.push(i),this.currentAd.trackingEvents&&this.currentAd.trackingEvents[u]&&(u=this.currentAd.trackingEvents[u],i===A.ON_AD_PROGRESS&&(u=u.filter(function(S){var P=S.offset;return-1<P.indexOf("%")&&(P=parseInt(P,10)/100*m),v>=parseInt(P,10)&&!S.requested})),this._callTrackers(u))}},{key:"_callTrackers",value:function(i){var u=this;if(!i||1>i.length)this.debug.info("[AdSlotDelivery] Requested trackers without URIs",i);else{var v={adReinsertion:this.currentAd.adReinsertion,enrichment:this.currentAd.enrichment,timeouts:this.currentAd.config.timeouts,urlhandler:this.currentAd.config.urlhandler};this.currentAd.enrichment.set("PLAYERSIZE",this.player.getPlayerSize().boundingRect);var m=this.currentAd;new rh().track(i,v,function(S,P){P&&(u.debug.warn("[AdSlotDelivery] Call tracker failed ",P,S),m.error.code=P.code||50,m.error.description=`
					`.concat(P.description||"Unknown tracker loading error",`
					: `).concat(S),u.dispatchEvent(A.ON_AD_WARNING))})}}}]),s}(eb);le.VIEW_MODE={},le.VIEW_MODE.NORMAL="normal",le.VIEW_MODE.FULLSCREEN="fullscreen";var or=function(o){function s(i){la(this,s);var u=p.call(this);return u._adList=[],u._handleXMLDoc(i),u}ya(s,o);var p=xa(s);return ma(s,[{key:"_handleXMLDoc",value:function(i){for(var u=i.querySelectorAll(":scope > *"),v=0;v<u.length;v++)this._adList.push(new ah(u[v],i))}},{key:"getAdList",value:function(){return this._adList}}]),s}(eb),Ah=[],am=Ah.sort,pr=ia(function(){Ah.sort(void 0)}),qr=ia(function(){Ah.sort(null)}),rr=Hc("sort");Y({target:"Array",proto:!0,forced:pr||!qr||!rr},{sort:function(o){return o===void 0?am.call(ab(this)):am.call(ab(this),Ab(o))}});var sr=Ca("iterator"),Bh=!ia(function(){var o=new URL("b?a=1&b=2&c=3","http://a"),s=o.searchParams,p="";return o.pathname="c%20d",s.forEach(function(i,u){s.delete("b"),p+=u+i}),!s.sort||o.href!=="http://a/c%20d?a=1&c=3"||s.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!s[sr]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||p!=="a1c3"||new URL("http://x",void 0).host!=="x"}),wm=/[^\0-\u007E]/,vm=/[.\u3002\uFF0E\uFF61]/g,$c=Math.floor,Hf=String.fromCharCode,bm=Ub("fetch"),Ch=Ub("Headers"),tr=Ca("iterator"),$h=Ma.set,tb=Ma.getterFor("URLSearchParams"),ur=Ma.getterFor("URLSearchParamsIterator"),Bm=/\+/g,ei=Array(4),cm=/[!'()~]|%20/g,Am={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Dh=ui(function(o,s){$h(this,{type:"URLSearchParamsIterator",iterator:ai(tb(o).entries),kind:s})},"Iterator",function(){var o=ur(this),s=o.kind;o=o.iterator.next();var p=o.value;return o.done||(o.value=s==="keys"?p.key:s==="values"?p.value:[p.key,p.value]),o}),tf=Bd.prototype;gc(tf,{append:function(o,s){ad(arguments.length,2);var p=tb(this);p.entries.push({key:o+"",value:s+""}),p.updateURL()},delete:function(o){ad(arguments.length,1);for(var s=tb(this),p=s.entries,i=o+"",u=0;u<p.length;)p[u].key===i?p.splice(u,1):u++;s.updateURL()},get:function(o){ad(arguments.length,1);for(var s=tb(this).entries,p=o+"",i=0;i<s.length;i++)if(s[i].key===p)return s[i].value;return null},getAll:function(o){ad(arguments.length,1);for(var s=tb(this).entries,p=o+"",i=[],u=0;u<s.length;u++)s[u].key===p&&i.push(s[u].value);return i},has:function(o){ad(arguments.length,1);for(var s=tb(this).entries,p=o+"",i=0;i<s.length;)if(s[i++].key===p)return!0;return!1},set:function(o,s){ad(arguments.length,1);for(var p=tb(this),i=p.entries,u=!1,v=o+"",m=s+"",S=0,P;S<i.length;S++)P=i[S],P.key===v&&(u?i.splice(S--,1):(u=!0,P.value=m));u||i.push({key:v,value:m}),p.updateURL()},sort:function(){var o=tb(this),s=o.entries,p=s.slice(),i,u;for(u=s.length=0;u<p.length;u++){var v=p[u];for(i=0;i<u;i++)if(s[i].key>v.key){s.splice(i,0,v);break}i===u&&s.push(v)}o.updateURL()},forEach:function(o){for(var s=tb(this).entries,p=Fc(o,1<arguments.length?arguments[1]:void 0,3),i=0,u;i<s.length;)u=s[i++],p(u.value,u.key,this)},keys:function(){return new Dh(this,"keys")},values:function(){return new Dh(this,"values")},entries:function(){return new Dh(this,"entries")}},{enumerable:!0}),Ta(tf,tr,tf.entries),Ta(tf,"toString",function(){for(var o=tb(this).entries,s=[],p=0,i;p<o.length;)i=o[p++],s.push(encodeURIComponent(i.key).replace(cm,di)+"="+encodeURIComponent(i.value).replace(cm,di));return s.join("&")},{enumerable:!0}),dc(Bd,"URLSearchParams"),Y({global:!0,forced:!Bh},{URLSearchParams:Bd}),Bh||typeof bm!="function"||typeof Ch!="function"||Y({global:!0,enumerable:!0,forced:!0},{fetch:function(o){var s=[o];if(1<arguments.length){var p=arguments[1];if(qa(p)){var i=p.body;if(cd(i)==="URLSearchParams"){var u=p.headers?new Ch(p.headers):new Ch;u.has("content-type")||u.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),p=wb(p,{body:Tb(0,String(i)),headers:Tb(0,u)})}}s.push(p)}return bm.apply(this,s)}});var me=T.URL,km=Bd,jm=Ma.set,Qa=Ma.getterFor("URL"),pm=Math.floor,Zh=Math.pow,Mh=/[A-Za-z]/,nm=/[\d+\-.A-Za-z]/,Ff=/\d/,sm=/^(0x|0X)/,um=/^[0-7]+$/,tm=/^\d+$/,Yh=/^[\dA-Fa-f]+$/,xm=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ym=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,lm=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,mm=/[\u0009\u000A\u000D]/g,re={},Xh=ge({},re,{" ":1,'"':1,"<":1,">":1,"`":1}),Wh=ge({},Xh,{"#":1,"?":1,"{":1,"}":1}),zf=ge({},Wh,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),oe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},vf={},Nh={},wf={},Oh={},Qh={},yf={},Sh={},Ph={},pe={},qe={},Af={},Bf={},Ef={},xf={},Th={},Cf={},zd={},Ob={},Rh={},Ec={},bc={},Eh=Cc.prototype;if(ta&&Rg(Eh,{href:ja(ne,function(o){var s=Qa(this);if(o=Nb(s,String(o)))throw TypeError(o);tb(s.searchParams).updateSearchParams(s.query)}),origin:ja(Lh),protocol:ja(Kh,function(o){var s=Qa(this);Nb(s,String(o)+":",vf)}),username:ja(Jh,function(o){var s=Qa(this);if(o=Dc(String(o)),!Gf(s)){s.username="";for(var p=0;p<o.length;p++)s.username+=nc(o[p],zf)}}),password:ja(Ih,function(o){var s=Qa(this);if(o=Dc(String(o)),!Gf(s)){s.password="";for(var p=0;p<o.length;p++)s.password+=nc(o[p],zf)}}),host:ja(Hh,function(o){var s=Qa(this);s.cannotBeABaseURL||Nb(s,String(o),Af)}),hostname:ja(Bc,function(o){var s=Qa(this);s.cannotBeABaseURL||Nb(s,String(o),Bf)}),port:ja(Za,function(o){var s=Qa(this);Gf(s)||(o=String(o),o==""?s.port=null:Nb(s,o,Ef))}),pathname:ja(Xa,function(o){var s=Qa(this);s.cannotBeABaseURL||(s.path=[],Nb(s,o+"",zd))}),search:ja(za,function(o){var s=Qa(this);o=String(o),o==""?s.query=null:(o.charAt(0)=="?"&&(o=o.slice(1)),s.query="",Nb(s,o,Ec)),tb(s.searchParams).updateSearchParams(s.query)}),searchParams:ja(Ga),hash:ja(Ea,function(o){var s=Qa(this);o=String(o),o==""?s.fragment=null:(o.charAt(0)=="#"&&(o=o.slice(1)),s.fragment="",Nb(s,o,bc))})}),Ta(Eh,"toJSON",function(){return ne.call(this)},{enumerable:!0}),Ta(Eh,"toString",function(){return ne.call(this)},{enumerable:!0}),me){var dm=me.createObjectURL,em=me.revokeObjectURL;dm&&Ta(Cc,"createObjectURL",function(o){return dm.apply(me,arguments)}),em&&Ta(Cc,"revokeObjectURL",function(o){return em.apply(me,arguments)})}dc(Cc,"URL"),Y({global:!0,forced:!Bh,sham:!ta},{URL:Cc});var uf=function(){function o(){la(this,o)}return ma(o,null,[{key:"getProperCreative",value:function(s,p){if(!s||1>s.length)return null;var i=s.slice(0);return s[0].type===Sa.NON_LINEAR?vr.select(i,p):wr.select(i,p)}},{key:"removeUnwantedVPAIDVendors",value:function(s){var p=this,i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];return s.filter(function(u){return u.isVPAID?p.isFriendlyVendorHost(u.fileURL,i):!0})}},{key:"isFriendlyVendorHost",value:function(s){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];return!p||p&&p.length===0?!0:p.some(function(i){return-1<new URL(s).origin.indexOf(i)})}}]),o}(),wr=function(){function o(){la(this,o)}return ma(o,null,[{key:"select",value:function(s,p){var i=this;return s.forEach(function(u){u._isValid=!1,u.selectedCreativeFile=null,u.selectedMediaFile=null;var v=u.mediaFiles||[];v.map(function(m){m.isSIMID=(m.apiFramework+"").toUpperCase()==="SIMID",u.selectedCreativeFile=m.isSIMID?m:null,m.isVPAID=(m.apiFramework+"").toUpperCase()==="VPAID"}),v=uf.removeUnwantedVPAIDVendors(v,p.desiredVPAIDVendors),v=In(v,p.desiredMimeTypes),u.selectedMediaFile=i._selectMediaFile(v,p.desiredBitrate||1e3,p.desiredMimeTypes||[]),u.selectedMediaFile&&(u._isValid=!0)}),s.filter(function(u){return u._isValid}).shift()}},{key:"_selectMediaFile",value:function(s,p,i){function u(x){if(0<x&&0<S.length)return s=S,P=x,"break";s.filter(function(w){w.mimeType===i[x]&&S.push(w)}),x++,P=x}var v=s.filter(function(x){return x.isSIMID}),m=s.filter(function(x){return x.isVPAID});if(0<v.length)return v[0];if(0<m.length)return m[0];for(var S=[],P=0;P<i.length&&u(P)!=="break";);return this._selectMediaFileByBitrate(s,p)}},{key:"_selectMediaFileByBitrate",value:function(s,p){var i=s.filter(function(v){return!v.isVPAID}).sort(function(v,m){return m.bitrate-v.bitrate}),u=i.filter(function(v){return v.bitrate<=p});return 0<u.length?u.shift():i.pop()||s.shift()}}]),o}(),vr=function(){function o(){la(this,o)}return ma(o,null,[{key:"select",value:function(s,p){return s.forEach(function(i){i._isValid=!1;var u=i.variations;u.map(function(v){v.selectedResource=null,(v.apiFramework+"").toUpperCase()==="VPAID"&&(v.isVPAID=!0,v.resources=v.resources.filter(function(m){return uf.isFriendlyVendorHost(m.resource,p.desiredVPAIDVendors)}))}),u.forEach(function(v){0>=v.resources.length?v.hasCreative=!1:(v.selectedResource=v.resources[0],i._isValid=!0)}),i.variations=u.filter(function(v){return!!v.selectedResource})}),s.filter(function(i){return i._isValid}).shift()}}]),o}(),nj={HLS:"application/x-mpegURL",PROGRESSIVE:"video/mp4",MP4:"video/mp4",DASH:"application/dash+xml",WEBM:"video/webm",OGG:"video/ogg"},xr=function(o){function s(i,u,v,m){la(this,s);var S=p.call(this);return S._adList=i||[],S._publisherGlobalConfig=u,S._environmentVars=v,S._adBreak=m,S._decorateAdList(),S._createAdSlotModel(),S._extendWithSeparationClips(),oj(S._adSlotModel),S._adSlotBuffet=oj(S._adSlotBuffet),S.debug.info("[AdSlotModelGenerator] ParserResponse:adPod",S._adSlotModel),S.debug.info("[AdSlotModelGenerator] ParserResponse:adBuffet",S._adSlotBuffet),S}ya(s,o);var p=xa(s);return ma(s,[{key:"_decorateAdList",value:function(){var i=this;this._adList.forEach(function(u){u.expectedAdType=i._adBreak.type,u.adBreakPosition=i._adBreak.adBreakPosition,u.config=i._publisherGlobalConfig,u.publisherMacros=i._environmentVars.vastMacros,u.enrichment=new Mc,u.enrichment.setFromObject(u.publisherMacros),u.adReinsertion=new sa(u.config.adReinsertion,u.enrichment),u.isPaused=!0,u.hasError||(1>u.creatives.length?(u.error.code=303,u.error.description="No Ads VAST response after one or more Wrappers."):u.expectedAdType===Sa.LINEAR&&u.creativeClass.linearAsArray[0].mediaFiles.length===0||u.expectedAdType===Sa.NON_LINEAR&&u.creativeClass.nonLinear.length===0?(u.error.code=201,u.error.description="Video player expecting different linearity."):(u.expectedAdType===Sa.LINEAR?(u.properCreative=uf.getProperCreative(u.creativeClass.linearAsArray,i._environmentVars),u.properCreative&&(u.closedCaptions=u.properCreative.captions,u.icons=u.properCreative.icons)):u.properCreative=uf.getProperCreative(u.creativeClass.nonLinear,i._environmentVars),u.properCreative||(u.error.code=403,u.error.description="Couldn't find MediaFile that is supported by this video player,based on the attributes of the MediaFile element.")))})}},{key:"_createAdSlotModel",value:function(){0<this._getPodAdList().length?(this._adSlotModel=this._getPodAdList(),this._adSlotBuffet=this._getBuffetAdList()):(this._adSlotModel=this._adList,this._adSlotBuffet=[])}},{key:"_extendWithSeparationClips",value:function(){this._adBreak.type===Sa.LINEAR&&(this._adSlotModel=Jn(this._adSlotModel,this.hasPlayableAds,this._adBreak,this._publisherGlobalConfig))}},{key:"hasValidAds",get:function(){return!!this._adSlotModel.filter(function(i){return!i.hasError||i.hasError&&i.adTrackers&&i.adTrackers.error&&0<i.adTrackers.error.length}).shift()}},{key:"hasPlayableAds",get:function(){return!!this._adSlotModel.filter(function(i){return!i.hasError}).shift()}},{key:"hasSessionTimeoutError",get:function(){return this._adList.some(function(i){return i.adXML&&i.adXML.querySelector('_error[code="'.concat(22,'"]'))})}},{key:"adSlotModel",get:function(){return this._adSlotModel}},{key:"adSlotBuffet",get:function(){return this._adSlotBuffet}},{key:"_getPodAdList",value:function(){return this._adList.filter(function(i){return!isNaN(i.sequence)}).sort(this._bySequence)}},{key:"_getBuffetAdList",value:function(){var i=this;return this._adList.filter(function(u){var v=isNaN(u.sequence)&&i._environmentVars.prefetchBuffetAds;return u=isNaN(u.sequence)&&!i._environmentVars.prefetchBuffetAds&&!u.hasError,v||u})}},{key:"_bySequence",value:function(i,u){return i.sequence-u.sequence}}]),s}(jb),Fh=function(o){function s(i){la(this,s);var u=p.call(this);return u.adReinsertion=null,u._$XMLDoc=null,u._callbackOnDoneLoading=null,u._XMLsToLoad=0,u._initialTimestamp=Date.now(),u._hasSessionTimeoutError=!1,u._setOptions(i),u}ya(s,o);var p=xa(s);return ma(s,[{key:"_setOptions",value:function(i){this.adReinsertion=i.adReinsertion,this._blockInsecureURL=i.blockInsecureURL||!1,this._maxWrapperDepth=i.maxWrapperDepth||10,this._wrapperChainTimeout=1e3*i.timeouts.adRequestChain,this._adSlotTimeout=1e3*i.timeouts.adSlotRequest,i.adRequestObserver.requestTime=Date.now(),this._urlHandlerOptions=i}},{key:"requestXML",value:function(i,u){this._callbackOnDoneLoading=u,this._requestXML(i)}},{key:"requestURL",value:function(i,u){var v=this;this._callbackOnDoneLoading=u,this._initialTimestamp=Date.now(),this._loadURL(i).then(function(m){return v._saveInitialURLToTag(i,m),v._saveInitialTimestampToTag(v._initialTimestamp,Date.now(),m),v._requestXML(m)})}},{key:"_requestXML",value:function(i){var u=this;this._$XMLDoc=i,this._loadAllWrapperURLs(function(){0>=--u._XMLsToLoad&&u._onAllAdWrappersWalked()})}},{key:"_loadAllWrapperURLs",value:function(i){var u=this._$XMLDoc.querySelectorAll("VASTAdTagURI");if(this._XMLsToLoad=u.length,this._XMLsToLoad===0)i();else for(var v=0;v<this._XMLsToLoad;v++){var m=(u[v].textContent||"").trim();this._walkDownAdWrappers(m,0,u[v].parentNode,Date.now()).then(function(){i()}).catch(function(S){i(S)})}}},{key:"_walkDownAdWrappers",value:function(i,u,v,m){var S=this;return new Promise(function(P,x){var w=v.querySelector("VASTAdTagURI");if(w.setAttribute("_loadStart",Date.now()),w.setAttribute("_loadEnd",Date.now()),Date.now()-m>S._wrapperChainTimeout)return S._flagAdWithError(v,301,"Wrapper chain timeout reached."),x(),i;if(u>=S._maxWrapperDepth)return S._flagAdWithError(v,302,"Wrapper limit reached, as defined by the video player"),x(),i;if(S._isInsecureURL(i))return S._flagAdWithError(v,310,"Mixed Content: The request has been blocked and must be served over HTTPS."),x(),i;if(S._hasSessionTimeoutError)return x(),i;var W,Te;S._loadURL(i,!0).then(function(z){var G=z.querySelector("VASTAdTagURI");(W=((G||{}).textContent||"").trim())&&(Te=G.parentNode),S._addContentToWrapperNode(v,z),w.setAttribute("_loadEnd",Date.now()),P([W,Te])})}).then(function(P){var x=qg(P,2);return P=x[0],x=x[1],P?S._walkDownAdWrappers(P,u+1,x,m):i})}},{key:"_onAllAdWrappersWalked",value:function(){this._callbackOnDoneLoading(this._$XMLDoc)}},{key:"_loadURL",value:function(i){var u=this,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1;return this._urlHandlerOptions.response=null,this._urlHandlerOptions.isWrapper=v,new Promise(function(m){new qh().get(i,u._urlHandlerOptions,function(S,P){if(Date.now()-u._initialTimestamp>u._adSlotTimeout){var x=P||document.createDocumentFragment(),w=x.querySelector("Ad")||x.documentElement||x;u._hasSessionTimeoutError=!0,u._flagAdWithError(w,22,"The manifest couldn't be loaded in time."),u.adReinsertion.setReinsertionReason({reason:sa.REASON.AD_SLOT_TIMEOUT,xmlResponse:P}),m(x)}!S&&P&&P.querySelector("parsererror")&&(x=document.createDocumentFragment(),u._flagAdWithError(x,110,"XML validation error"),u.adReinsertion.setReinsertionReason({reason:sa.REASON.XML_PARSING_ERROR,xmlResponse:P}),m(x)),!S&&P&&P.documentElement.nodeName.toUpperCase()==="VAST"&&P.querySelectorAll(":scope > *").length===0&&(x=document.createDocumentFragment(),u._flagAdWithError(x,303,"No Ads VAST response after one or more Wrappers."),m(x)),S&&!P?(x=document.createDocumentFragment(),u.debug.warn("[AdTagService] XHR Request Error",S.code,S.description),u._flagAdWithError(x,S.code,S.description),m(x)):m(P)})})}},{key:"_isInsecureURL",value:function(i){return this._blockInsecureURL&&!mj(i)}},{key:"_saveInitialURLToTag",value:function(i,u){if(u){var v=u.querySelector("VAST");v&&v.setAttribute("_initialURL",i)}}},{key:"_saveInitialTimestampToTag",value:function(i,u,v){v&&(v=v.querySelector("VAST"))&&(v.setAttribute("_loadStart",i),v.setAttribute("_loadEnd",u))}},{key:"_addContentToWrapperNode",value:function(i,u){var v=document.createElement("_VASTAdTagURIContent");v.appendChild(u.firstElementChild),i.appendChild(v)}},{key:"_flagAdWithError",value:function(i,u,v){var m=document.createElement("_error");m.setAttribute("code",u),m.setAttribute("description",v),i.appendChild(m)}}]),s}(eb);Fh.EVENT={},Fh.EVENT.PARSED="AdTagService::parsed";var yr=function(o){function s(i,u){la(this,s);var v=p.call(this);return v.adSlotController=i,v.$publisherAdContainer=u,v.$adContainer=null,v.$ad=null,v.asset=null,v.adDisplayTime={currentTime:0,duration:0,offset:0},v.cleanupTimer=[],v}ya(s,o);var p=xa(s);return ma(s,[{key:"init",value:function(i){var u=this;return this.asset=i,this.adDisplayTime.duration=i.displayDuration,this._createAdContainer(),this._createNonLinearElement(),new Promise(function(v){u._render(),v()})}},{key:"_createAdContainer",value:function(){this.$adContainer=document.createElement("div"),this.$adContainer.setAttribute("style","display:none; pointer-events:none; position:absolute; width:100%; height:100%; top:0; left:0;")}},{key:"_createNonLinearElement",value:function(){var i={attributes:{},style:{}};this.asset.scalable?(i.style.width="100%",i.style.height="100%",i.style["object-fit"]="contain",i.style["object-position"]="bottom"):(i.style.width=parseInt(this.asset.width,10)+"px",i.style.height=parseInt(this.asset.height,10)+"px"),i.style.position="absolute",i.style.bottom="0",i.style.right="50%",i.style.transform="translateX(50%)",i.attributes.style=JSON.stringify(i.style),i.attributes.style=i.attributes.style.substring(1,JSON.stringify(i.style).length-1),i.attributes.style=i.attributes.style.replace(/"/ig,"").replace(/,/ig,";")+";",i.attributes.src=this.asset.selectedResource.resource,this.$ad=i}},{key:"_render",value:function(){switch(this.asset.selectedResource.type){case"StaticResource":var i="img";break;default:i="iframe"}var u=document.createElement(i),v;for(v in this.$ad.attributes)this.$ad.attributes[v]&&u.setAttribute(v,this.$ad.attributes[v]);u.style.pointerEvents="auto",u.onload=this._onStartAd.bind(this),i==="iframe"?(u.frameBorder=0,u.setAttribute("scrolling","no"),u.setAttribute("margin","0"),u.setAttribute("allowtransparency","true")):(u.style.cursor="pointer",u.addEventListener("click",this._onClick.bind(this))),this.$adContainer.appendChild(u),this.$publisherAdContainer.appendChild(this.$adContainer)}},{key:"stop",value:function(){this.cleanupTimer.forEach(function(i){clearTimeout(i)}),this.$adContainer&&this.$adContainer.parentNode===this.$publisherAdContainer&&this.$publisherAdContainer.removeChild(this.$adContainer)}},{key:"pause",value:function(){this.debug.info("[NonLinear] pause"),this.cleanupTimer.forEach(function(i){clearTimeout(i)}),this.adDisplayTime.currentTime+=(Date.now()-this.adDisplayTime.offset)/1e3}},{key:"play",value:function(){this.debug.info("[NonLinear] start or resume playback"),this.adDisplayTime.offset=Date.now();var i=this.adDisplayTime.duration-this.adDisplayTime.currentTime;this.debug.info("[NonLinear] Remove ad in (seconds)",i),i=setTimeout(this._onStopAd.bind(this),1e3*i),this.cleanupTimer.push(i)}},{key:"_onStartAd",value:function(){this.debug.info("[NonLinear] onStartAd()"),this.$adContainer.style.display="block",this.dispatchEvent(A.ON_AD_LOADED),this.dispatchEvent(A.ON_AD_STARTED),this.dispatchEvent(A.ON_AD_IMPRESSION),this.dispatchEvent(A.ON_AD_CREATIVE_VIEW),this.play()}},{key:"_onStopAd",value:function(){this.debug.info("[NonLinear] onStopAd()"),this.dispatchEvent(A.ON_AD_NONLINEAR_STOPPED),this.dispatchEvent(A.ON_AD_STOPPED),this.stop()}},{key:"_onClick",value:function(){this.adSlotController.onClickThrough(this.asset)}}]),s}(eb),zr=function(o){function s(i,u,v,m){return la(this,s),i=p.call(this,i,u,v,m),i.nonLinearView=null,i.debug.info("[NonLinearAdSlotDelivery] Initializing a new AdSlot for NonLinear Ads."),i}ya(s,o);var p=xa(s);return ma(s,[{key:"stop",value:function(){return this.debug.info("[NonLinearAdSlotDelivery] Stop AdSlot."),this.nonLinearView&&(this.nonLinearView.stop(),this.nonLinearView=null),Ja(Fa(s.prototype),"stop",this).call(this)}},{key:"cancelAd",value:function(){this.currentAd.error.code=403,this.currentAd.error.description="Couldn't find MediaFile that is supported by this video player,based on the attributes of the MediaFile element.",this._cancelAdWithError()}},{key:"_deliverNextAd",value:function(){var i=this,u=this;clearTimeout(u.loadPendingTimeout);var v=u.manifest;if(0<v.length){var m=function(){if(u.debug.info("[NonLinearAdSlotDelivery] Deliver NonLinear Ad.",u.currentAd),u.adSlotHasStarted||(u.dispatchEvent(A.ON_AD_SLOT_STARTED),u.adSlotHasStarted=!0,u.on()),u.currentAd.hasError)u.currentAd.trackingEvents=u.currentAd.adTrackers,u._cancelAdWithError();else{var P=u.currentAd.properCreative,x=P.variations[0];u.currentAd.info=u.currentAd.info||{},u.currentAd.info.universalAdId=P.universalAdId,u.currentAd.info.universalAdIds=P.universalAdIds,u.currentAd.isLinear=!1,u.currentAd.isExpanded=!1,u.currentAd.isInteractive=u.currentAd.isVPAID=x.isVPAID||!1,u.currentAd.isSkippable=!1,u.currentAd.enrichment.set("ASSETURI",x.selectedResource.resource),u.currentAd.enrichment.set("BLOCKED",u.currentAd.adReinsertion.isActive),u.currentAd.enrichment.set("ERRORCODE",0),u.currentAd.enrichment.set("UNIVERSALADID",u.currentAd.universalAdIds),u.currentAd.enrichment.set("PODSEQUENCE",u.currentAd.sequence),u.currentAd.enrichment.set("ADTYPE","hybrid"),u.currentAd.enrichment.set("ADSERVINGID",u.currentAd.adServingID),u.requestedTrackingEvents=[],u.currentAd.trackingEvents=Object.assign({},u.currentAd.adTrackers,P.variations[0].creativeTrackers),x.displayDuration=u.currentAd.config.timeouts.nonlinearMaxDuration,0<x.minSuggestedDuration&&(x.displayDuration=Math.min(x.minSuggestedDuration,u.currentAd.config.timeouts.nonlinearMaxDuration)),u.dispatchEvent(A.ON_AD_START),u._deployConcurrentAssets(),x.isVPAID?(P=Pe(u.player),u.loadAdVPAID(x,P,u.currentAd)):u.loadAd(x)}};if(u.currentAd=v.shift(),u.currentAd.config.adSourceSelector)if(v=new Promise(function(P){setTimeout(P,250,null)}),u.currentAd.properCreative&&u.currentAd.properCreative.variations.length){var S=u.currentAd.config.adSourceSelector(u.currentAd.properCreative.variations).then(function(P){return P===null||Object.keys(P).length===0?null:P});Promise.race([v,S]).then(function(P){P===null?i.cancelAd():(u.currentAd.properCreative.variations[0]=P,m())}).catch(function(){i.cancelAd()})}else this.cancelAd();else m()}else u.stop()}},{key:"nonLinearVpaidEventHandler",value:function(i){if(this.vpaidPlayer.functionExistsOnVPAIDAd("getAdLinear"))switch(i.type){case A.ON_AD_LINEARITY_CHANGE:this.vpaidPlayer.vpaidAd.getAdLinear()?(this.debug.info("[NonLinearAdSlotDelivery] Ad change linear mode"),this.player.lockContent()):this.player.releaseContent();break;case A.ON_AD_SKIPPED:this.vpaidPlayer.vpaidAd.getAdLinear()&&this.player.releaseContent();break;case A.ON_AD_STOPPED:this.vpaidPlayer.vpaidAd.getAdLinear()&&this.player.releaseContent()}}},{key:"loadAdVPAID",value:function(i,u,v){var m=this;i={fileURL:i.selectedResource.resource,adParameters:i.adParameters},Ja(Fa(s.prototype),"loadAdVPAID",this).call(this,i,u,v),[A.ON_AD_LINEARITY_CHANGE,A.ON_AD_SKIPPED,A.ON_AD_STOPPED].map(function(S){m.vpaidPlayer.addEventListener(S,function(P){return m.nonLinearVpaidEventHandler(P)})})}},{key:"loadAd",value:function(i){var u=this,v=!1;if(clearTimeout(this.loadPendingTimeout),this.currentAd.config.playerHandlesNonLinear)this.addPlayerEventListener("loadeddata",function(){u.dispatchEvent(A.ON_AD_STARTED),u.dispatchEvent(A.ON_AD_IMPRESSION),u.dispatchEvent(A.ON_AD_CREATIVE_VIEW)}),this.addPlayerEventListener("ended",function(){u.dispatchEvent(A.ON_AD_NONLINEAR_STOPPED),u.dispatchEvent(A.ON_AD_STOPPED)});else{if(this.loadPendingTimeout=setTimeout(function(S){v=!0,u.debug.error("[NonLinearAdSlotDelivery] Load timeout.",S),u.currentAd.error.code=502,u.currentAd.error.description="Timeout of Resource URI.",u.currentAd.enrichment.set("ERRORCODE",u.currentAd.error.code),u.dispatchEvent(A.ON_AD_ERROR),u.currentAd.adReinsertion.isActive?u._deliverNextAd():(u.currentAd.adReinsertion.setReinsertionReason({reason:sa.REASON.MEDIAFILE_TIMEOUT,source:i,error:u.currentAd.error}),u.currentAd.adReinsertion.enable(function(){sa.EventDispatcher.dispatchEvent(A.ON_AD_REINSERTION_ACTIVATION)},function(){u._deliverNextAd()}))},1e3*this.currentAd.config.timeouts.videoRequest),this.environmentVars.adContainer){this.debug.info("[NonLinearAdSlotDelivery] Using publisher adContainer",this.environmentVars.adContainer);var m=this.environmentVars.adContainer}else m=Pe(this.player),this.debug.warn("[NonLinearAdSlotDelivery] Publisher adContainer not specified. Using the video elements parent element as a fallback.",m.parentNode),m=m.parentNode;this.nonLinearView=new yr(this,m),[A.ON_AD_STARTED,A.ON_AD_IMPRESSION,A.ON_AD_CREATIVE_VIEW,A.ON_AD_NONLINEAR_STOPPED,A.ON_AD_STOPPED].map(function(S){u.nonLinearView.addEventListener(S,function(P){u.dispatchEvent(P.type),P.type!==A.ON_AD_STOPPED&&P.type!==A.ON_AD_SKIPPED||u._deliverNextAd()})}),this.addPlayerEventListener("playerPlay",this.play.bind(this)),this.addPlayerEventListener("playerPause",this.pause.bind(this)),this.nonLinearView.init(i).then(function(){clearTimeout(u.loadPendingTimeout),v||u.debug.info("[NonLinearAdSlotDelivery] Requests load: Load ad complete")},function(S){clearTimeout(u.loadPendingTimeout),v||(u.debug.error("VideoProxy load failed",S),u.currentAd.error.code=500,u.currentAd.error.description="General NonLinearAds error.",u.currentAd.enrichment.set("ERRORCODE",u.currentAd.error.code),u.dispatchEvent(A.ON_AD_ERROR),u.currentAd.adReinsertion.isActive?u._deliverNextAd():(u.currentAd.adReinsertion.setReinsertionReason({reason:sa.REASON.MEDIAFILE_LOAD_ERROR,source:i,error:u.currentAd.error}),u.currentAd.adReinsertion.enable(function(){sa.EventDispatcher.dispatchEvent(A.ON_AD_REINSERTION_ACTIVATION)},function(){u._deliverNextAd()})))})}}},{key:"pause",value:function(){this.currentAd&&(this.currentAd.isVPAID?this.vpaidPlayer.pause():this.nonLinearView.pause())}},{key:"play",value:function(){this.currentAd&&(this.currentAd.isVPAID?this.vpaidPlayer.play():this.nonLinearView.play())}},{key:"onClickThrough",value:function(i,u){this.dispatchEvent(A.ON_AD_CLICKED),this._callTrackers(i.clickTracker);var v=this.currentAd.enrichment.apply(i.clickThroughURL);return v&&v.indexOf("//")===0&&(v=Rd(v)),u||window.open(v,this.currentAd.adReinsertion.isActive?"_self":"_blank"),v}}]),s}(le),Ar=function(o){function s(i){la(this,s);var u=p.call(this),v=Pd(u);return i?Wb(u,Object.defineProperties({},{isLinear:{get:function(){return i.isLinear||!1},configurable:!0,enumerable:!0},width:{get:function(){if(i.isLinear)return i.properCreative&&i.properCreative.selectedMediaFile?i.properCreative.selectedMediaFile.width:-1;var m=this.nonLinear[0];return m&&this.isExpanded?m.expandedWidth||m.width:m?m.width:-1},configurable:!0,enumerable:!0},height:{get:function(){if(i.isLinear)return i.properCreative&&i.properCreative.selectedMediaFile?i.properCreative.selectedMediaFile.height:-1;var m=this.nonLinear[0];return m&&this.isExpanded?m.expandedHeight||m.height:m?m.height:-1},configurable:!0,enumerable:!0},isExpanded:{get:function(){return i.isExpanded||!1},configurable:!0,enumerable:!0},isSkippable:{get:function(){return i.isSkippable||!1},configurable:!0,enumerable:!0},skipOffset:{get:function(){return i.skipOffset||-1},configurable:!0,enumerable:!0},remainingTime:{get:function(){return!i.isLinear&&this.nonLinear.length?this.duration-i.currentTime:i.remainingTime||i.duration||-1},configurable:!0,enumerable:!0},currentTime:{get:function(){return i.currentTime||-1},configurable:!0,enumerable:!0},duration:{get:function(){return!i.isLinear&&this.nonLinear.length?this.nonLinear[0].displayDuration:i.duration||-1},configurable:!0,enumerable:!0},volume:{set:function(m){i.volume=m},get:function(){return i.volume||-1},configurable:!0,enumerable:!0},isInteractive:{get:function(){return i.isInteractive||!1},configurable:!0,enumerable:!0},hasClickThrough:{get:function(){return!!i.clickThroughURL},configurable:!0,enumerable:!0},companions:{get:function(){var m=i.creatives;return m&&m.length!==0&&(m=m.filter(function(S){return S.type==="companion"}).shift())&&m.variations&&0<m.variations.length?m.variations:(v.debug.info("There are no companions available."),[])},configurable:!0,enumerable:!0},nonLinear:{get:function(){var m=i.creatives;return m&&m.length!==0&&(m=m.filter(function(S){return S.type==="nonlinear"}).shift())&&m.variations&&0<m.variations.length?m.variations:(v.debug.info("There are no nonLinearAds available."),[])},configurable:!0,enumerable:!0},linear:{get:function(){var m=i.properCreative;return m&&m.length!==0?m:(v.debug.info("There are no linear ads available."),{})},configurable:!0,enumerable:!0},extensions:{get:function(){var m=i.extensions;return!m||0>=m.length?(v.debug.info("There is no VAST extension available."),[]):m},configurable:!0,enumerable:!0},verifications:{get:function(){var m=i.adVerifications;return!m||0>=m.length?(v.debug.info("There is no AdVerification vendor available."),[]):m},configurable:!0,enumerable:!0},wrappers:{get:function(){var m=i.wrappers;return!m||0>=m.length?(v.debug.info("The ad was no part of a wrapper chain."),[]):m},configurable:!0,enumerable:!0},icons:{get:function(){return!i.icons||0>=Object.keys(i.icons).length?(v.debug.info("There are no Industry Icons along with this ad."),{}):i.icons},configurable:!0,enumerable:!0},closedCaptions:{get:function(){return!i.closedCaptions||0>=i.closedCaptions.length?(v.debug.info("There are no Closed Captions along with this ad."),[]):i.closedCaptions},configurable:!0,enumerable:!0},info:{get:function(){return i.info||{}},configurable:!0,enumerable:!0},type:{get:function(){return i.adType||"video"},configurable:!0,enumerable:!0},error:{get:function(){return i.error&&i.error.code?{code:i.error.code,timestamp:Date.now(),description:i.error.description}:(v.debug.info("The ad seems to have no error."),{code:-1,timestamp:Date.now(),description:"No error."})},configurable:!0,enumerable:!0},macroList:{get:function(){return i.enrichment?i.enrichment.getMacroList():{}},configurable:!0,enumerable:!0},viewability:{get:function(){return i.info?i.info.viewability:{}},configurable:!0,enumerable:!0}})):Wb(u,{})}ya(s,o);var p=xa(s);return s}(jb),Br=function(o){function s(i){la(this,s);var u=p.call(this);return i?Wb(u,Object.defineProperties({},{currentClip:{get:function(){return i.currentAd.info.currentClip},configurable:!0,enumerable:!0},currentCommercial:{get:function(){return i.currentAd.info.currentCommercial},configurable:!0,enumerable:!0},totalClips:{get:function(){return i.currentAd.info.totalClips},configurable:!0,enumerable:!0},totalCommercials:{get:function(){return i.currentAd.info.totalCommercials},configurable:!0,enumerable:!0},totalPlayableClips:{get:function(){return i.currentAd.info.totalPlayableClips},configurable:!0,enumerable:!0},totalPlayableCommercials:{get:function(){return i.currentAd.info.totalPlayableCommercials},configurable:!0,enumerable:!0},totalCommercialsCurrentTime:{get:function(){return i.adSlotTimes.totalCommercialsCurrentTime},configurable:!0,enumerable:!0},totalCommercialsDuration:{get:function(){return i.adSlotTimes.totalCommercialsDuration},configurable:!0,enumerable:!0}})):Wb(u,{})}ya(s,o);var p=xa(s);return s}(jb);Y({target:"String",proto:!0},{repeat:xi}),Y({target:"Object",stat:!0},{is:Object.is||function(o,s){return o===s?o!==0||1/o===1/s:o!=o&&s!=s}});var Cr=[].reverse,fm=[1,2];Y({target:"Array",proto:!0,forced:String(fm)===String(fm.reverse())},{reverse:function(){return tc(this)&&(this.length=this.length),Cr.call(this)}});var Dr=!ye(function(o){Array.from(o)});Y({target:"Array",stat:!0,forced:Dr},{from:Dc});var kb=null,sb=null,Gh=function(o){function s(i,u){la(this,s);var v=p.call(this);return v.player=i,v.globalConfig=kb=u,v._error={},v.adSlotBuffet=null,v.adSlotModel=null,v.adSlotRequestTimeout=null,v.initialURLHandler=u.urlhandler?u.urlhandler:Jb,v.environmentVars={},v.rejectSlotChanges=!1,v.slot=null,v._removeOnAdSlotFinishedHandler=v.addEventListener(A.ON_AD_SLOT_STOPPED,function(){v.stopAdSlot()}),v._removeOnAdReinsertionActivationHandler=sa.EventDispatcher.addEventListener(A.ON_AD_REINSERTION_ACTIVATION,function(){v._restartAdSlot()}),v._error=null,v._timeouts=kb.timeouts,v._startAdSlotCounter=0,v.initializeHOMAD(v.globalConfig),v.globalConfig.adReinsertion.homad.setup.forceActivation&&v.forceHOMADActivation(),v}ya(s,o);var p=xa(s);return ma(s,[{key:"initializeHOMAD",value:function(i){function u(P){m.debug.warn("[AdSlotAPI] HOMAD Penalty"),v=function(){},sb.vendorAPI?(m.debug.warn("HOMAD Penalty during ad playback."),Gb.call(m,23,"AdReinsertion failed at runtime")):(m.debug.warn("HOMAD Initialization Error.",P),Gb.call(m,62,"AdReinsertion initialization failed")),m.dispatchEvent(A.ON_HOMAD_PENALTY)}function v(P){m.debug.info("[AdSlotAPI] HOMAD ready, received HOMAD Utils.",P),m.debug.info("[AdSlotAPI] HOMAD ready, set vendor API HOMAD Utils.",P),sb.setVendorAPI(P),sb.setCorroborationCallback(m._onRequestAdReinsertionCorroboration.bind(m)),sb.setActivationCallback(m._onAdReinsertionActivation.bind(m)),i.adReinsertion.homad.utils=P}var m=this,S=new Mc;S.setFromObject(this.environmentVars.vastMacros),S.set("MEDIAMIME",this.environmentVars.desiredMimeTypes||Object.values(md)),sb=new sa(this.globalConfig.adReinsertion,S),i.adReinsertion.homad.enabled&&i.adReinsertion.homad.setup&&(S=i.adReinsertion.homad.setup,Mn(S.globalConfig,S.clientConfig,{player:this.player,adSlotAPI:this},function(P){v(P)},function(P){u(P)}))}},{key:"forceHOMADActivation",value:function(){var i=this;this._error&&this._error.code===62||(sb.setReinsertionReason({reason:sa.REASON.FORCE_ACTIVATION,source:"",error:{code:1020}}),sb.enable(function(){i.debug.info("[AdSlotAPI] Override default URLHandler with HOMADURLHandler. Forced."),i.globalConfig.adReinsertion.homad.setup.enableSessionCoverage=!0,i._removeOnAdReinsertionActivationHandler(),i.dispatchEvent(A.ON_AD_REINSERTION_ACTIVATION)},function(){i.debug.warn("HOMAD Penalty while forcing activation. HOMAD disabled.")}))}},{key:"dispose",value:function(){this._removeOnAdSlotFinishedHandler(),this._removeOnAdReinsertionActivationHandler()}},{key:"initAdSlot",value:function(i){var u=this,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.adBreak=i,this.environmentVars=v;var m=this._error=null;return this.rejectSlotChanges?(Gb.call(this,10,"An ad-break has already been started."),Promise.reject(this._error)):Ln(this.adBreak,this.debug)?(this.environmentVars.vastMacros=Object.assign(this.environmentVars.vastMacros||{},{PLAYERSIZE:this.player.getPlayerSize().boundingRect,CONTENTPLAYHEAD:this.player.getCurrentTime(),MEDIAPLAYHEAD:this.player.getCurrentTime()}),this._timeouts=Lc(kb.timeouts,v.timeouts),this.environmentVars.omidServiceWindow=v.omidServiceWindow||this.globalConfig.adVerification.serviceWindow,this.debug.info(">> AdSlotAPI initAdSlot with",this.adBreak,this.environmentVars),this.rejectSlotChanges=!0,new Promise(function(S,P){u.adBreak.type||(u.adBreak.type=Sa.LINEAR),u.adBreak.adBreakPosition||(u.adBreak.type===Sa.NON_LINEAR?u.adBreak.adBreakPosition=4:0>=u.player.getCurrentTime()?u.adBreak.adBreakPosition=1:u.player.getCurrentTime()>=u.player.getDuration()?u.adBreak.adBreakPosition=3:u.adBreak.adBreakPosition=2),u.environmentVars.vastMacros=Object.assign(u.environmentVars.vastMacros,{BREAKPOSITION:u.adBreak.adBreakPosition}),u.adBreak.type!==Sa.NON_LINEAR||u.environmentVars.adContainer||u.debug.warn(">> AdSlotAPI:initAdSlot - NonLinear adContainer not set. Using the video elementsparent element as a fallback."),u._startAdSlotCounter=0,m=u.addEventListener(A.ON_AD_MANIFEST_LOAD_ERROR,function(){return u.debug.info(">> AdSlotAPI initAdSlot failed with error",u.error),u.rejectSlotChanges=!1,clearTimeout(u.adSlotRequestTimeout),P(u._error)}),u.addEventListener(A.ON_AD_MANIFEST_LOADED,function(){return clearTimeout(u.adSlotRequestTimeout),m(),u.rejectSlotChanges=!1,S("ok")});var x=u._timeouts.adSlotRequest+.2;clearTimeout(u.adSlotRequestTimeout),u.adSlotRequestTimeout=setTimeout(function(){u.debug.info("[AdSlotAPI] Resolving initAdSlot timed out without response from the AdTagService."),Gb.call(u,22,"The manifest couldn't be loaded in time."),u.dispatchEvent(A.ON_AD_MANIFEST_LOAD_ERROR)},1e3*x),u.parse(u.adBreak)})):(Gb.call(this,20,"Invalid AdBreak definition."),Promise.reject(this._error))}},{key:"_onRequestAdReinsertionCorroboration",value:function(i,u){var v=this;return new Promise(function(m,S){if(!kb.adReinsertion.homad.utils)throw v.debug.info(">> HOMADUtils.corroborate() Utils not ready."),Error("HOMADUtils.corroborate() Utils not ready.");kb.adReinsertion.homad.utils.corroborate(u).then(function(){v.debug.info(">> HOMADUtils.corroborate() resolved."),m()}).catch(function(P){v.debug.info(">> HOMADUtils.corroborate() rejected.",P),S(P)})})}},{key:"_onAdReinsertionActivation",value:function(i){var u=this;return new Promise(function(v,m){if(!kb.adReinsertion.homad.setup.activationCallback)return v();var S=kb.adReinsertion.homad.setup.activationCallback.bind(u),P=!1,x=setTimeout(function(){return P=!0,v()},sa.TIMEOUT.ACTIVATION_CALLBACK_RESPONSE);try{S(i).then(function(){if(clearTimeout(x),u.debug.info(">> Activate AdReinsertion approved."),!P)return v()},function(w){if(clearTimeout(x),u.debug.warn(">> Activate AdReinsertion declined.",ra(w)),w&&w.stack&&w.message)return sb.disable(),v();if(!P)return sb.disable(),m()})}catch(w){return clearTimeout(x),u.debug.warn(">> Error in activationCallback. Activate AdReinsertion failed.",w),P=!0,sb.disable(),v()}})}},{key:"_restartAdSlot",value:function(){var i=this;this.debug.info("[AdSlotAPI] RestartAdSlot - Override default URLHandler with HOMADURLHandler."),this.globalConfig.urlhandler=kb.urlHandler=xl,clearTimeout(this.adSlotRequestTimeout),this.adBreak=this.adBreak.originConfig,this.rejectSlotChanges=!1,this.initAdSlot(this.adBreak,this.environmentVars).then(function(){i.slot?(i.rejectSlotChanges=!0,i.slot.prepare(i.adSlotModel,i.adSlotBuffet),i.slot.adSlotHasStarted=!0,i.slot.deliver()):i.debug.warn("[AdSlotAPI] What to do next?")}).catch(function(u){i.debug.error("AdReinsertion error: Failed to restart the adSlot. Reset content.",u),i.resetContent()})}},{key:"parse",value:function(i){if(typeof i=="string")i=[];else{if(i.originConfig=JSON.parse(JSON.stringify(i)),ra(i.tag)==="object"?i.urls=i.tag:i.urls=i.tag?[i.tag]:[],i.response&&(i.responseXML=new DOMParser().parseFromString(i.response,"text/xml")),i.repeat=i.repeat&&1<i.repeat?i.repeat:1,1<i.repeat){var u=i.urls[0];i.urls=[];for(var v=0;v<i.repeat;v++)i.urls.push(u.replace("[count]",v+1))}i.limit=i.limit||i.urls.length,0<i.urls.length&&!i.responseXML&&(i.responseXML=Kn(i.urls,i.limit)),i.requested=!1}if(this.debug.info(">> AdSlotAPI: Start parsing the ad slot",i),u=new Mc,u.setFromObject(this.environmentVars.vastMacros),u.set("MEDIAMIME",this.environmentVars.desiredMimeTypes||Object.values(md)),sb=new sa(this.globalConfig.adReinsertion,u),this.environmentVars.vastMacros.GDPRCONSENT||new wl(u),v=JSON.parse(JSON.stringify(kb.timeouts)),u={adReinsertion:sb,blockInsecureURL:kb.blockInsecureURL,enrichment:u,maxWrapperDepth:kb.maxWrapperDepth,prefetchBuffetAds:this.environmentVars.prefetchBuffetAds||!1,response:i.responseXML,timeouts:v,urlhandler:kb.urlhandler,withCredentials:!0,adRequestObserver:{originTimeouts:Lc({},v),initialTime:Date.now(),requestTime:0,responseTime:0}},v=null,i.urls.length===1&&(v=i.urls[0],delete u.response),v||u.response){var m=new Fh(u);v?m.requestURL(i.urls[0],this._onXMLLoadDone.bind(this,u)):m.requestXML(u.response,this._onXMLLoadDone.bind(this,u))}else this.debug.warn(">> AdSlotAPI: Ad slot contains neither ad tag URL(s) nor a direct ad response."),this.handleParserResponse(null,u)}},{key:"_onXMLLoadDone",value:function(i,u){this._$rawXML=u,this._rawAdSlotModel=new or(u),this.handleParserResponse(this._rawAdSlotModel.getAdList(),i)}},{key:"handleParserResponse",value:function(i,u){function v(){!x.hasValidAds||w?(Gb.call(m,w?22:21,w?"The manifest couldn't be loaded in time.":"Unknown Manifest Loading Error."),m.dispatchEvent(A.ON_AD_MANIFEST_LOAD_ERROR)):m.dispatchEvent(A.ON_AD_MANIFEST_LOADED)}var m=this,S=u||{};if(!u){var P=Ba.create(Ba.GLOBAL_CONFIG);S.adReinsertion=new sa(P.adReinsertion,new Mc),S.timeouts=P.timeouts}this.adSlotModel=[],this.adSlotBuffet=[];var x=new xr(i,kb,this.environmentVars,this.adBreak);this.adSlotModel=x.adSlotModel,this.adSlotBuffet=x.adSlotBuffet;var w=x.hasSessionTimeoutError;S.adReinsertion.reinsertionReason&&!S.adReinsertion.isActive?(this.debug.info("[AdSlotAPI] Found reason to enable AdReinsertion",S.adReinsertion.reinsertionReason),S.adReinsertion.enable(function(){S.adReinsertion.setReinsertionReason(null),m._restartAdSlot()},function(W){m.debug.info("[AdSlotAPI] AdReinsertion remains disabled.",W),v()})):v()}},{key:"startAdSlot",value:function(){var i=this;if(this.rejectSlotChanges)this.debug.warn("The current ad-break has already been started.");else if(0>=this.adSlotModel.length)this.debug.warn("The requested ad-break has no ads defined. Use initAdSlot() to request a new manifest.");else{this.adBreak.type===Sa.NON_LINEAR&&this.globalConfig.playerHandlesNonLinear&&this.dispatchEvent(A.ON_NONLINEAR_DETECTED);var u=function(){i.dispatchEvent(A.ON_AD_SLOT_START),i.rejectSlotChanges=!0,i.slot=new(i.adBreak.type===Sa.LINEAR?le:zr)(i.adSlotModel,i.adSlotBuffet,i.environmentVars,i.player),1<++i._startAdSlotCounter&&(i._resetErrorWarning(),i.slot.addEventListener(A.ON_AD_IMPRESSION,function(){i.slot.onRewind()})),Object.keys(A).forEach(function(v){i.slot.addEventListener(A[v],function(m){i.dispatchEvent(m.type)})}),i.slot.deliver()};this.adBreak.type===Sa.LINEAR?(this.debug.info("StartAdSlot requests player to lock the current content."),this.player.lockContent().then(function(){i.debug.info("StartAdSlot player locked current content."),u()},function(){i.debug.warn("StartAdSlot player failed to lock current content."),u()})):u()}}},{key:"_resetErrorWarning",value:function(){for(var i=[50,51],u=0;u<this.adSlotModel.length;u++)i.indexOf(this.adSlotModel[u].error.code)!==-1&&(this.adSlotModel[u].error={code:void 0,description:void 0})}},{key:"stopAdSlot",value:function(){var i=this;if(!this.rejectSlotChanges||!this.slot)return Promise.reject("Calling `stopAdSlot` requires a running ad-break.");this.slot.adSlotHasStarted=!1;var u=this.adBreak.type===Sa.LINEAR?this.resetContent.bind(this):this._closeAdSlot.bind(this);return new Promise(function(v){i.removeStopSlotHandler&&i.removeStopSlotHandler(),i.removeStopSlotHandler=i.addEventListener(s.EVENT.STOP_SLOT_SUCCESS,function(){return i.dispatchEvent(A.ON_AD_SLOT_COMPLETE),v()}),i.slot.stop().then(function(){u()},function(m){i.debug.critical("Calling AdSlot.stop() failed. Try to reset content...",m),u()})})}},{key:"resetContent",value:function(){var i=this;this.debug.info("AdSlotAPI: Reset content.");var u=!1,v=this.player.releaseContent.bind(this.player),m=setTimeout(function(){u=!0,i.debug.error("AdSlotAPI: Reset content timeout"),Gb.call(i,11,"SessionError: Reset content timed out. Player did not respond."),i.dispatchEvent(A.ON_GENERAL_ERROR),i._closeAdSlot()},1e3*this._timeouts.contentRequest);v().then(function(){u||(clearTimeout(m),i.debug.info("AdSlotAPI: Reset content complete"),i._closeAdSlot())},function(S){u||(clearTimeout(m),i.debug.error("AdSlotAPI: Reset content failed",i.player.getCurrentContentSource(),S),Gb.call(i,11,"SessionError: Reset content failed."),i.dispatchEvent(A.ON_GENERAL_ERROR),i._closeAdSlot())})}},{key:"_closeAdSlot",value:function(){sb&&kb.adReinsertion.homad.setup.enableSessionCoverage!==!0&&(sb.disable(),this.globalConfig.urlhandler=kb.urlhandler=this.initialURLHandler),this.rejectSlotChanges=!1,this.dispatchEvent(s.EVENT.STOP_SLOT_SUCCESS),this.slot=null}},{key:"skipAd",value:function(){this.slot&&this.slot.onSkip()}},{key:"resize",value:function(i,u){this.slot&&this.slot.onResizeAd(i,u)}},{key:"clickThrough",value:function(){if(this.slot)return this.slot.onClickThrough(0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1)}},{key:"iconClickThrough",value:function(i){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1;if(this.slot)return this.dispatchEvent(A.ON_ICON_CLICKED),this.slot.onIconClickThrough(i,u)}},{key:"iconView",value:function(i){this.slot&&this.slot.onIconView(i)}},{key:"verificationNotExecuted",value:function(i,u){this.slot&&this.slot.onVerificationNotExecuted(i,u)}},{key:"companionView",value:function(i){if(this.slot){var u=this.ad.companions.filter(function(v){return v.id===i}).shift();u&&(this.dispatchEvent(A.ON_COMPANION_CREATIVE_VIEW),0<u.creativeViewTracker.length&&(this.debug.table("Request companion creativeView trackers.",u.creativeViewTracker),this.slot._callTrackers(u.creativeViewTracker)))}}},{key:"companionClickThrough",value:function(i){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;if(this.slot){var v=this.ad.companions.filter(function(m){return m.id===i}).shift();if(v&&(this.dispatchEvent(A.ON_COMPANION_CLICKED),0<v.clickTracker.length&&(this.debug.table("Request companion click trackers.",v.clickTracker),this.slot._callTrackers(v.clickTracker)),v=v.clickThroughURL))return v=this.slot.currentAd.enrichment.apply(v),u||window.open(v,this.slot.currentAd.adReinsertion.isActive?"_self":"_blank"),v}}},{key:"pauseAd",value:function(){this.slot.pause()}},{key:"resumeAd",value:function(){this.slot.play()}},{key:"dispatchEvent",value:function(i){return this.debug.info("AdSlotAPI: Dispatching event",i),Ja(Fa(s.prototype),"dispatchEvent",this).call(this,i)}},{key:"ad",get:function(){return this.slot?new Ar(this.slot.currentAd):(this.debug.warn("There is no ad playing."),{})}},{key:"adSlot",get:function(){return this.slot?new Br(this.slot):(this.debug.warn("There is no adSlot running."),{})}},{key:"error",get:function(){return this._error||null}},{key:"rawXML",get:function(){return this._$rawXML}}]),s}(eb);Gh.EVENT={},Gh.EVENT.STOP_SLOT_SUCCESS="AdSlotAPI::stopSlotSuccess";var Er=function(o){function s(){return la(this,s),p.apply(this,arguments)}ya(s,o);var p=xa(s);return ma(s,[{key:"_getAsJSONP",value:function(i,u,v){var m=this,S=!1,P=1e3*u.timeouts.adRequest,x="json_callback_"+lj(),w=new URL(i);w.searchParams.set("ang_jsonp",x);var W=document.createElement("script");W.src=w.href,W.type="text/javascript",W.charset="utf-8",W.async=!0,W.onerror=function(){if(clearTimeout(Te),S)m.debug.info("[JSONPURLHandler] Ignoring onerror after timeout",w.href);else{m.debug.info("[JSONPURLHandler] JSONP Error.",w.href);var z=Error("JSONPURLHandler: Loading script failed.");z.code=301,z.description="JSONPURLHandler: Loading script failed.",v(z)}};var Te=setTimeout(function(){S=!0,m.debug.info("[JSONPURLHandler] JSONP Timeout.",w.href);var z=Error("JSONPURLHandler: Request timeout.");z.code=301,z.description=u.timeouts.errorDescription||"Timeout of VAST URI provided in Wrapper element,or of VAST URI provided in a subsequent Wrapper element",v(z)},P);window[x]=function(z){if(W&&(W.parentNode&&W.parentNode.removeChild(W),W=W.onerror=null),window[x]&&delete window[x],clearTimeout(Te),!S)try{var G=z;if(z&&z.hasOwnProperty("contents")&&(G=Oe(z.contents)),G)v(null,G);else{m.debug.info("[JSONPURLHandler] JSONP Response Error: Response contains neither 'responseXML' nor 'responseText'");var J=Error("JSONPURLHandler: Response contains neither 'responseXML' nor 'responseText'");J.code=100,J.description="JSONP Response Error: Response contains neither 'responseXML' nor 'responseText'",v(J)}}catch(_e){m.debug.warn("[JSONPURLHandler] JSONP Request Error - received ".concat(z)),z=Error("JSONPURLHandler: Request error."),z.code=301,z.description="JSONP Request Error: ".concat(_e),v(z)}},document.head.firstChild?document.head.insertBefore(W,document.head.firstChild):document.head.appendChild(W)}},{key:"get",value:function(i,u,v){u.timeouts||(u.timeouts=Ba.create(Ba.GLOBAL_CONFIG).timeouts),this.debug.info("[JSONPURLHandler] JSONP get with timeout ".concat(u.timeouts.adRequest," sec: ").concat(i)),u&&u.issuer&&u.issuer===Jb.ISSUER.TRACKING?tl.getAsImage(i,u,v):this._getAsJSONP(i,u,v)}}],[{key:"supported",value:function(){return!0}}]),s}(jb);Nf("Set",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},nl);var Fr=function(o){function s(i){la(this,s);var u=p.call(this);return u.OmidServiceClient=Nn(),u._playerProxy=i,u}ya(s,o);var p=xa(s);return ma(s,[{key:"setup",value:function(i){var u=this;return new Promise(function(v,m){u._playerProxy||(Gb.call(u,61,"Video player API isn't available"),m(u._error)),Ba.validate(i,Ba.GLOBAL_CONFIG)||(Gb.call(u,60,"Invalid GlobalConfig definition"),m(u._error)),u.setDebugEnabled(!!i.debug);var S=Lc(Ba.create(Ba.GLOBAL_CONFIG),i);u.debug.info("[CoreInstance] Setting up a new AdSlotAPI",u._playerProxy,S),S.adRequestMethod===bh.JSONP&&(S.urlhandler=Er,S.adReinsertion.homad.enabled&&u.debug.warn("[CoreInstance] Ad tags get loaded as <script> tags (JSON-P). This disables AdReinsertion which works with XHR requests only."),S.adReinsertion.homad.enabled=!1),u.detectOMID(S.adVerification),S=new Gh(u._playerProxy,S),v(S)})}},{key:"detectOMID",value:function(i){var u=window,v=!1;try{var m=i.omidServiceWindow||window.top;v=m.frames?!!m.frames.omid_v1_present:!1}catch(S){this.debug.warn("[CoreInstance] Could not detect OM publisher service client.",S)}v||(this.debug.info("[CoreInstance] OM publisher service client not present. Using internal service client."),i.omidServiceWindow=u)}},{key:"error",get:function(){return this._error||null}}]),s}(jb),gm=["3.1","3.2"],hm=function(o){function s(){return la(this,s),p.apply(this,arguments)}ya(s,o);var p=xa(s);return ma(s,[{key:"connect",value:function(i){return i&&this._hasValidHandshake(i)&&this._hasValidFacadeImplementation(i)?new Fr(i):(this.debug.critical("ConnectError: Calling connect() without player facade reference."),null)}},{key:"_hasValidHandshake",value:function(i){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"3.2",v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:gm;if(i.handshakeVersion){var m=i.handshakeVersion(u);return-1<v.indexOf(m)?!0:(this.debug.critical("ConnectError: Handshake failed - Expected Facade version "+u+" received "+m),!1)}return this.debug.critical("ConnectError: Handshake failed - Expected Facade version "+u+". Could not call handshakeVersion(), not implemented?"),!1}},{key:"_hasValidFacadeImplementation",value:function(i){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:wq,v=Object.keys(i).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(i)));return u=Object.getOwnPropertyNames(Object.getPrototypeOf(new u)).filter(function(m){return m==="getPlayerElement"||m==="getVideoElement"?!v.includes("getPlayerElement")&&!v.includes("getVideoElement"):!v.includes(m)}),0<u.length?(this.debug.critical("ConnectError: Incomplete Facade interface implementation. Expected implementation of following function(s) or properties:",u.join(",")),!1):!0}},{key:"EVENT",get:function(){return A}},{key:"EVENTS",get:function(){return Object.values(A)}},{key:"DEFAULT_MIMETYPES",get:function(){return md}},{key:"SCHEMA",get:function(){return Ba}},{key:"AD_TYPE",get:function(){return Sa}},{key:"AD_REQUEST_METHOD",get:function(){return bh}},{key:"DEBUG",get:function(){return this.debug}},{key:"facadeVersion",get:function(){return"3.2"}},{key:"supportedFacadeVersions",get:function(){return gm}},{key:"version",get:function(){return"6.4.10"}}]),s}(jb),Zc=new hm;typeof window!="undefined"&&(window.smartclientcore=Zc),(typeof exports=="undefined"?"undefined":ra(exports))==="object"&&(module.exports={smartclientcore:hm});var Gr=function(o){function s(i){la(this,s);var u=p.call(this);return u._playerProxy=i,u}ya(s,o);var p=xa(s);return ma(s,[{key:"initCore",value:function(i,u){var v=this;return new Promise(function(m,S){Zc.connect(i).setup(u).then(function(P){v.debug.info("[VMAPInstance] Core initialization done."),m(P)},function(P){v.debug.error("[VMAPInstance] Core initialization error.",P),S(P)})})}},{key:"setup",value:function(i){var u=this;return this.debug.info("[VMAPInstance] Setup Player",this._playerProxy,i),new Promise(function(v,m){u.initCore(u._playerProxy,i).then(function(S){var P=new sq(u._playerProxy,S);u.debug.info("[VMAPInstance] Resolving setup with VMAP and AdSlot APIs",P,S),v([P,S])}).catch(function(S){u.debug.warn("[VMAPInstance] Reject setup with error",S),Gb.call(u,S.code,S.message),m(u._error||null)})})}},{key:"error",get:function(){return this._error||null}}]),s}(jb),Hr=["3.1","3.2"],im=new(function(o){function s(){return la(this,s),p.apply(this,arguments)}ya(s,o);var p=xa(s);return ma(s,[{key:"connect",value:function(i){return i&&Zc._hasValidHandshake(i,"3.2",Hr)&&Zc._hasValidFacadeImplementation(i,Bo)?new Gr(i):(this.debug.critical("[VMAPModule] ConnectError: Calling connect() without player facade reference."),null)}},{key:"version",get:function(){return"0.4 Beta"}},{key:"EVENT",get:function(){return Db}},{key:"EVENTS",get:function(){return Object.values(Db)}}]),s}(jb));Zc.vmap=im,typeof window!="undefined"&&(window.smartclientcore=Zc,window.smartclientcore.vmap=im),(typeof exports=="undefined"?"undefined":ra(exports))==="object"&&(module.exports=Zc)}()}).call(exports)});var Ku={};Ru(Ku,{AdvertisingPlugin:()=>ea});var Nr={Opener:"opener",Closer:"closer",Bumper:"bumper",Commercial:"commercial",ContentFrame:"contentframe",Overlay:"overlay",Sponsored:"sponsored",Unknown:"unknown"},wt={PreRoll:"PRE_ROLL",MidRoll:"MID_ROLL",PostRoll:"POST_ROLL",NonLinear:"NON_LINEAR"},Ha={AdStarted:"advertising:AdStarted",AdStopped:"advertising:AdStopped",AdSlotStarted:"advertising:AdSlotStarted",AdSlotStopped:"advertising:AdSlotStopped",AdSlotCompleted:"advertising:AdSlotCompleted"},Wr={Linear:"LINEAR",NonLinear:"NON_LINEAR"},Tr={GrunerUndJahr:"grunerundjahr",RTLPlusWatch:"rtlplusmpawatch",RTLPlusRadio:"rtlplusmparadio",RTLPlusAudiobook:"rtlplusmpaaudiobook",RTLPlusPodcast:"rtlplusmpapodcast",SuperRTLToggo:"superrtltoggo",MediaHub:"mediahub",RTLDigitalNews:"rtldigitalnews",CorporateSites:"corporatesites"},Qu={[Tr.RTLPlusWatch]:{Web:"web",Tizen:"tizen",LG:"lg",Magenta:"magenta",Sky:"sky",Chromecast:"chromecast"},[Tr.RTLPlusRadio]:{Web:"web",Tizen:"tizen",LG:"lg",Magenta:"magenta",Sky:"sky",Chromecast:"chromecast"},[Tr.RTLPlusAudiobook]:{Web:"web",Tizen:"tizen",LG:"lg",Magenta:"magenta",Sky:"sky",Chromecast:"chromecast"},[Tr.RTLPlusPodcast]:{Web:"web",Tizen:"tizen",LG:"lg",Magenta:"magenta",Sky:"sky",Chromecast:"chromecast"},[Tr.RTLDigitalNews]:{NTV:"ntv",Capital:"capital",Geo:"geo",RTL:"rtl",Sport:"sport",Stern:"stern",Wetter:"wetter"},[Tr.CorporateSites]:{BusinessPortal:"businessportal",Crime:"crime",GeoTV:"geotv",JournalistenSchule:"journalistenschule",Living:"living",Nitro:"nitro",Passion:"passion",RTLSuper:"rtlsuper",RTLUp:"rtlup",SchlagerLiebe:"schlagerliebe",VOX:"vox"},[Tr.GrunerUndJahr]:{BabyClub:"babyclub",Brigitte:"brigitte",Eltern:"eltern",EssenUndTrinken:"essenundtrinken",Gala:"gala",Geolino:"geolino",LivingAtHome:"livingathome",SchoenerWohnen:"schoenerwohnen",Urbia:"urbia",VIP:"vip",Vorname:"vorname"}};var Zt={None:0,Error:10,Warn:20,Info:30,Debug:40,Trace:50};var Ya={PlayerCreated:"player:PlayerCreated",MediaStarted:"player:MediaStarted",ContentStart:"player:ContentStart",ContentEnd:"player:ContentEnd",SessionStart:"player:SessionStart",SessionEnd:"player:SessionEnd",Destroy:"player:Destroy",HDCPFallback:"player:HDCPFallback",CueEnter:"player:CueEnter",CueExit:"player:CueExit",Error:"player:Error",Muted:"player:Muted",Unmuted:"player:Unmuted",Play:"player:Play",Paused:"player:Paused",PlaybackSpeedChanged:"player:PlaybackSpeedChanged",Playing:"player:Playing",Ready:"player:Ready",Seek:"player:Seek",Seeked:"player:Seeked",StallStarted:"player:StallStarted",StallEnded:"player:StallEnded",TimeChanged:"player:TimeChanged",VolumeChanged:"player:VolumeChanged",AudioTrackSelected:"player:AudioTrackSelected",TextTrackSelected:"player:SubtitlesSelected",SubtitlesSelected:"player:SubtitlesSelected",MetadataUpdated:"player:MetadataUpdated"};var ju=Ut(Ft());var Wa=Ut(Ft());var kt=o=>{var p;if(!o){let i=new Error("Cannot return a logger for an empty namespace");throw Object.assign(i,{code:Wa.ErrorCodes.INTERNAL_PLAYER_ERROR}),i}let s=(p=window.foundation)==null?void 0:p.logger;if(!s){let i=new Error("Logger on the window object wasn't initialized yet when getLogger() was called");throw Object.assign(i,{code:Wa.ErrorCodes.PLAYER_DEPENDENCY_MISSING}),i}return s.getLogger(o)},Td=Zt.Warn;var Rt=[];for(Vn=0;Vn<256;++Vn)Rt.push((Vn+256).toString(16).slice(1));var Vn;function Ls(o,s=0){return(Rt[o[s+0]]+Rt[o[s+1]]+Rt[o[s+2]]+Rt[o[s+3]]+"-"+Rt[o[s+4]]+Rt[o[s+5]]+"-"+Rt[o[s+6]]+Rt[o[s+7]]+"-"+Rt[o[s+8]]+Rt[o[s+9]]+"-"+Rt[o[s+10]]+Rt[o[s+11]]+Rt[o[s+12]]+Rt[o[s+13]]+Rt[o[s+14]]+Rt[o[s+15]]).toLowerCase()}var Un,Lu=new Uint8Array(16);function eo(){if(!Un&&(Un=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Un))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Un(Lu)}var Du=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),io={randomUUID:Du};function Nu(o,s,p){if(io.randomUUID&&!s&&!o)return io.randomUUID();o=o||{};var i=o.random||(o.rng||eo)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,s){p=p||0;for(var u=0;u<16;++u)s[p+u]=i[u];return s}return Ls(i)}var no=Nu;var Uu=Ut(Ft());var Fu=Ut(Ft());var Bu=Ut(Ft());var Hu=Ut(Ft());var qu=Ut(Ft());var Yu=Ut(Ft());var Wu=Ut(Ft()),Pt={...Ya,UpdateMetaData:"player:UpdateMetaData",TimedMetadata:"player:TimedMetadata",MetricAdded:"player:MetricAdded",PlayerLoaded:"player:PlayerLoaded",MediaLoad:"player:MediaLoad",MediaLoaded:"player:MediaLoaded",Destroyed:"player:Destroyed",Metadata:"player:Metadata",PlaybackFinished:"player:PlaybackFinished",ContentReady:"player:ContentReady",SourceLoaded:"player:SourceLoaded",SourceUnloaded:"player:SourceUnloaded",StallingFix:"player:StallingFix",MediaAdaptation:"player:MediaAdaptation",AutoplaySuccessful:"player:AutoplaySuccessful",TrackChanged:"player:TrackChanged",KeySystemSelected:"player:KeySystemSelected"},Mr=class extends Event{constructor(o,s={}){super(o),this.originalEvent=s.originalEvent}};var Bt=class extends Mr{constructor(o,s){super(o,s),this.code=s.code,this.message=s.message,this.response=s.response,this.responseText=s.responseText,this.name=s.name,this.context=s.context,Vu(this.response)&&(this.code=this.response.errorCode,this.message=this.response.error)}};function Vu(o){return o!==null&&typeof o=="object"&&"origin"in o&&typeof o.origin=="string"&&"errorCode"in o&&typeof Number(o.errorCode)=="number"&&"error"in o&&typeof o.error=="string"}var ao=class extends Mr{constructor(o,s){super(o,s),this.start=s.start,this.end=s.end,this.duration=s.duration||this.end-this.start}};var St={...Ha,AdSlotsCreated:"advertising:AdSlotsCreated",InitAdSlot:"advertising:InitAdSlot",AdSlotReady:"advertising:AdSlotReady",PauseAd:"advertising:PauseAd",ResumeAd:"advertising:ResumeAd",SkipAd:"advertising:SkipAd",StartAdSlot:"advertising:StartAdSlot",StopAdSlot:"advertising:StopAdSlot",OpenClickThrough:"advertising:OpenClickThrough",HomadActivation:"advertising:HomadActivation",HomadPenalty:"advertising:HomadPenalty",AdError:"advertising:AdError",AdQuartileReached:"advertising:AdQuartileReached"},Yt=class extends Mr{constructor(o,s={}){super(o,s)}},Ms=class extends Yt{constructor(o,s){super(o,s),this.opts=s,this.code=s.code,this.message=s.message}},xs=class extends Yt{constructor(o){super(St.AdSlotsCreated,o),this.adSlots=o.adSlots}},Gt=class extends Yt{constructor(o,s){super(o,s),this.adSlot=s.adSlot}},Vs=class extends Yt{constructor(o,s){super(o,s),this.adClip=s.adClip}},js=class extends Gt{constructor(o){super(St.InitAdSlot,o),this.autoplay=o.autoplay}},Us=class extends Gt{constructor(o){super(St.StopAdSlot,o),this.reason=o.reason}},Fs=class extends Yt{constructor(o={}){super(St.PauseAd,o)}},Bs=class extends Yt{constructor(o={}){super(St.ResumeAd,o)}},Hs=class extends Yt{constructor(o={}){super(St.SkipAd,o)}},qs=class extends Yt{constructor(o={}){super(St.OpenClickThrough,o)}},Ys=class extends Gt{constructor(o){super(St.HomadActivation,o),this.reason=o.reason}},Ws=class extends Gt{constructor(o){super(St.HomadPenalty,o)}},Yn=class extends Yt{constructor(o){super(St.AdQuartileReached,o),this.quartile=o.quartile}};var Wn=(o=>(o.LoaderCreation="metric:LoaderCreation",o.BuilderCreation="metric:BuilderCreation",o.PlayerCreation="metric:PlayerCreation",o.MediaLoad="metric:MediaLoad",o.MediaPlay="metric:MediaPlay",o.MediaPlayAfterAd="metric:MediaPlayAfterAd",o.AdSlotLoad="metric:AdSlotLoad",o))(Wn||{});var Gs=class{setPlayer(o){this.player=o}};var Ir=Ut(Ft());var oo=Ut(Ft());var Xn=class{constructor(s){this.config=s;this.duration=0;this.clips=0;this.commercials=0;this.playedClips=[];this.initialised=!1;this.loaded=!1;this.active=!1;this.completed=!1;this.failed=!1}canSkip(s){return!("skippable"in this.config)||this.config.skippable===void 0?!1:this.config.skippable!==-1&&s>=this.config.skippable}getBumper(){let s="bumpers"in this.config&&this.config.bumpers;return Array.isArray(s)?s.find(p=>p.url):void 0}setDuration(s){this.duration=s}getDuration(){return this.duration}setClips(s){this.clips=s}getClips(){return this.clips}setCommercials(s){this.commercials=s}getCommercials(){return this.commercials}getPlayedClips(){return this.playedClips}setCurrentClip(s){this.clip&&this.playedClips.push(this.clip),this.clip=s}getCurrentClip(){return this.clip}getCloser(){let s="closers"in this.config&&this.config.closers;return Array.isArray(s)?s.find(p=>p.url):void 0}getId(){return this.config.offset}getAdCall(){return this.config.adCall||""}setClickThroughUrlCallback(s){this.clickThroughUrlCallback=s}getClickThroughUrl(){return this.clickThroughUrlCallback?this.clickThroughUrlCallback():void 0}getOffset(){return this.config.offset}getPrefetch(){var s;return(s=this.config.prefetch)!=null?s:0}getOpener(){let s="openers"in this.config&&this.config.openers;return Array.isArray(s)?s.find(p=>p.url):void 0}getType(){if(this.config.type===Wr.NonLinear)return wt.NonLinear;switch(this.config.offset){case 0:return wt.PreRoll;case-1:return wt.PostRoll;default:return wt.MidRoll}}initialise(){this.initialised=!0}isInitialised(){return this.initialised}load(){this.loaded=!0}isLoaded(){return this.loaded}start(){this.active=!0}stop(){this.active=!1}isActive(){return this.active}complete(){this.completed=!0,this.active=!1}isCompleted(){return this.completed}fail(s){this.failed=!0,this.active=!1,this.error=s}isFailed(){return this.failed}getError(){return this.error}reset(){this.initialised=!1,this.completed=!1,this.active=!1,this.loaded=!1,this.failed=!1,this.error=void 0}toString(s=!1){var i;let p=[this.getType(),`offset ${this.getOffset()}`,`prefetch ${(i=this.config.prefetch)!=null?i:"-"}`];return s&&p.push(`initialized ${this.isInitialised()}`,`loaded ${this.isLoaded()}`,`active ${this.isActive()}`,`completed ${this.isCompleted()}`,`failed ${this.isFailed()}`),p.join(", ")}};var $n=class{constructor(s,p){this.player=s;this.adPlayer=p;this.log=kt("plugin.advertising.adapter");this.adSlots=new Map;this.prefetchAdSlots=new Map}getCurrentAdSlot(){return this.currentAdSlot}setCurrentAdSlot(s){this.currentAdSlot=s}getNextAdSlotToInitialize(s){var i;let p=(i=this.prefetchAdSlots)==null?void 0:i.get(s);return p&&!p.isInitialised()?p:void 0}getAdPlayer(){return this.adPlayer}getAdSlot(s){var p;return(p=this.adSlots)==null?void 0:p.get(s)}setNonLinearElement(s){if(s.children.length!==1)throw new Bt(Pt.Error,{message:"Non-Linear container MUST HAVE exactly one child element!",code:oo.ErrorCodes.FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING});this.nonLinearElement=s}getNonLinearElement(){return this.nonLinearElement}initAdSlot(s,p=!0){return s.isInitialised()||(this.resetPrefetchedAdSlots(),this.currentAdSlot=void 0,(p||s.getType()===wt.PreRoll)&&this.setCurrentAdSlot(s),s.initialise(),this.player.dispatchEvent(new js({adSlot:s,autoplay:p}))),Promise.resolve()}resetPrefetchedAdSlots(){if(this.adSlots)for(let s of this.adSlots.values())s.isInitialised()&&!(s.isCompleted()||s.isActive()||s.isFailed())&&s.reset()}isAd(){return this.currentAdSlot?this.currentAdSlot.isInitialised()&&!this.currentAdSlot.isCompleted()&&!this.currentAdSlot.isFailed():!1}isAdSlotInitialised(){var s;return((s=this.currentAdSlot)==null?void 0:s.isInitialised())||!1}destroy(){var s,p;this.adPlayer&&(this.adPlayer.destroy(),this.adPlayer=void 0),this.player=void 0,this.currentAdSlot=void 0,(s=this.adSlots)==null||s.clear(),this.adSlots=void 0,(p=this.prefetchAdSlots)==null||p.clear(),this.prefetchAdSlots=void 0}openClickThrough(){this.isAd()&&this.player.dispatchEvent(new qs)}pauseAd(){return this.isAd()&&this.player.dispatchEvent(new Fs),Promise.resolve()}resumeAd(){return this.isAd()&&this.player.dispatchEvent(new Bs),Promise.resolve()}skipAd(){return this.isAd()&&this.player.dispatchEvent(new Hs),Promise.resolve()}startAdSlot(){return this.isAd()&&this.player.dispatchEvent(new Gt(St.StartAdSlot,{adSlot:this.currentAdSlot})),Promise.resolve()}stopAdSlot(s){return this.isAd()&&this.player.dispatchEvent(new Us({adSlot:this.currentAdSlot,reason:s})),Promise.resolve()}onLoadMedia(s){if(!this.adSlots||!this.prefetchAdSlots)return Promise.resolve();if(this.advertisingSession=no(),this.adSlots.clear(),this.prefetchAdSlots.clear(),Array.isArray(s)){for(let p of s){if(p.type===Wr.NonLinear&&!this.nonLinearElement){console.error("Found non-linear ad slot but no non-linear container was configured!");continue}let i=new Xn(p);this.adSlots.set(i.getOffset(),i),this.prepareAdSlotPrefetch(i)}this.adSlots.size>0&&this.player.dispatchEvent(new xs({adSlots:this.adSlots}))}return Promise.resolve()}prepareAdSlotPrefetch(s){if(!this.prefetchAdSlots)return;let p=s.getOffset(),i=s.getPrefetch(),u=p===-1?Math.ceil(this.player.getDuration()):p,v=u-i;for(let m=v;m<u;m++)this.prefetchAdSlots.has(m)?this.log.isLoggingActiveForLevel(Zt.Warn)&&this.log.warn(`Overlap of prefetch interval at ${m} for ad slots "${this.prefetchAdSlots.get(m)}" and "${s}". Ignoring the latter.`):this.prefetchAdSlots.set(m,s)}getDebugInformation(){if(this.debugInformationCallback)return this.debugInformationCallback()}setDebugInformationCallback(s){this.debugInformationCallback=s}async loadAdSlot(s,p=!1){await this.onLoadMedia([s]);let i=this.getAdSlot(s.offset);if(!i)throw new Bt(Pt.Error,{message:"Given ad slot is invalid!",code:oo.ErrorCodes.FAULTY_ADVERTISING_ISLAND_CONFIGURED,context:{slotConfig:s}});return this.initAdSlot(i,p)}};var $s=Ut(Ft());var Xu=Ut(Xs());var Ks={name:"@foundation-player/smartclientcore",version:"6.4.10",description:"Smartclip's SDK to implement online video advertisment with any video player.",main:"dist/smartclientcore.min.js",config:{appName:"SmartclipAdModule",environment:"production"},repository:{type:"git",url:"git+https://bucket.burgeins.de/scm/sc/bitmovin"},keywords:["smartclip","openinstreamsuite","core","clientcore"],author:"BurgEins GmbH",license:"ISC",paths:{base:"./",public:"./dist/",docs:"./dist/docs/"}};var lo=(dt=>(dt.AdClickThru="AdClickThru",dt.AdCreativeView="AdCreativeView",dt.AdError="AdError",dt.AdImpression="AdImpression",dt.AdLinearChange="AdLinearChange",dt.AdLoaded="AdLoaded",dt.AdMuted="AdMuted",dt.AdPaused="AdPaused",dt.AdPlaying="AdPlaying",dt.AdProgress="AdProgress",dt.AdReinsertionActivation="AdReinsertionActivation",dt.AdSizeChanged="AdSizeChanged",dt.AdSkippableStateChange="AdSkippableStateChange",dt.AdSkipped="AdSkipped",dt.AdSlotComplete="AdSlotComplete",dt.AdSlotDurationChange="AdSlotDurationChange",dt.AdSlotStart="AdSlotStart",dt.AdSlotStarted="AdSlotStarted",dt.AdSlotStopped="AdSlotStopped",dt.AdStart="AdStart",dt.AdStarted="AdStarted",dt.AdStopped="AdStopped",dt.AdTagParsed="AdTagParsed",dt.AdUnmuted="AdUnmuted",dt.AdVerificationDetected="AdVerificationDetected",dt.AdVideoComplete="AdVideoComplete",dt.AdVideoFirstQuartile="AdVideoFirstQuartile",dt.AdVideoMidpoint="AdVideoMidpoint",dt.AdVideoStart="AdVideoStart",dt.AdVideoThirdQuartile="AdVideoThirdQuartile",dt.AdViewable="AdViewable",dt.AdVolumeChanged="AdVolumeChanged",dt.AdWarning="AdWarning",dt.ClosedCaptionsDetected="ClosedCaptionsDetected",dt.CompanionsDetected="CompanionsDetected",dt.ExtensionsDetected="ExtensionsDetected",dt.GeneralError="GeneralError",dt.HomadPenalty="HomadPenalty",dt.IconClickThru="IconClickThru",dt.IconsDetected="IconsDetected",dt))(lo||{});var Qn=class{constructor(s={},p){this.userConfig=s;this.homadActivationCallback=p;this.log=kt("plugin.advertising.smartclip.Sdk");this.smartclip=Xu;this.eventCache=[];this.homadReady=!1;this.config=this.prepareConfig()}getDebugInformation(){var s,p,i,u,v,m,S,P,x,w,W,Te,z,G,J,_e,tt,Ue,Ze,it,Qe,We,Ye,at,pt,ct,ht,gt,Mt;return{errorCode:(i=(p=(s=this.instance)==null?void 0:s.ad)==null?void 0:p.error)==null?void 0:i.code,errorDescription:(m=(v=(u=this.instance)==null?void 0:u.ad)==null?void 0:v.error)==null?void 0:m.description,wrappers:(P=(S=this.instance)==null?void 0:S.ad)==null?void 0:P.wrappers,adId:(W=(w=(x=this.instance)==null?void 0:x.ad)==null?void 0:w.info)!=null&&W.adId?this.instance.ad.info.adId.toString():void 0,crea:(G=(z=(Te=this.instance)==null?void 0:Te.ad)==null?void 0:z.info)==null?void 0:G.crea,type:(_e=(J=this.instance)==null?void 0:J.ad)==null?void 0:_e.type,currentClip:(Ze=(Ue=(tt=this.instance)==null?void 0:tt.ad)==null?void 0:Ue.info)==null?void 0:Ze.currentClip,goalId:(We=(Qe=(it=this.instance)==null?void 0:it.ad)==null?void 0:Qe.info)==null?void 0:We.ite,campaignId:(pt=(at=(Ye=this.instance)==null?void 0:Ye.ad)==null?void 0:at.info)==null?void 0:pt.cpg,universalId:(Mt=(gt=(ht=(ct=this.instance)==null?void 0:ct.ad)==null?void 0:ht.info)==null?void 0:gt.universalAdId)==null?void 0:Mt.idValue,pluginversion:this.getVersion()}}async getInstance(s){var u,v,m;if(this.instance)return this.instance;if(!s)throw new Bt(Pt.Error,{message:"You have to supply an advertisingFacade to create an instance!",code:$s.ErrorCodes.PLAYER_DEPENDENCY_MISSING});if(this.homadReady=!((m=(v=(u=this.config)==null?void 0:u.adReinsertion)==null?void 0:v.homad)!=null&&m.enabled),!this.smartclip.SCHEMA.validate(this.config,this.smartclip.SCHEMA.GLOBAL_CONFIG))return;this.instance=await this.smartclip.connect(s).setup(this.config),this.addEventListener("AdReinsertionActivation",()=>{this.homadReady=!0});for(let[S,P]of this.eventCache)this.addEventListener(S,P);this.eventCache=[];let i=Object.values(lo);for(let S of i){let P=`events.smartclip.${S}`,x=kt(P);x.isLoggingActiveForLevel(Zt.Debug)&&this.addEventListener(S,w=>{x.debug("",w)})}return this.instance}mapAdSlot(s){let p=s.getOpener(),i=s.getBumper(),u=s.getCloser(),v=P=>({progressive:P.url,forcePlay:P.forcePlay}),m={type:[wt.NonLinear].includes(s.getType())?"nonlinear":"linear",tag:s.getAdCall(),opener:p?v(p):{},bumper:i?v(i):{},closer:u?v(u):{}};if(this.smartclip.SCHEMA.validate(m,this.smartclip.SCHEMA.AD_BREAK))return m}createEnvironment(s,p,i,u,v){var P;let m={...(P=this.config)==null?void 0:P.environmentVars};u===wt.MidRoll&&(m.prefetchBuffetAds=!0);let S=this.getBitrate(p,v);return S&&S>0&&(m.desiredBitrate=S),m.macro={CONTENTPLAYHEAD:s,MEDIAPLAYHEAD:s},i&&(m.adContainer=i),m}isHomadReady(){return this.homadReady}async waitForHomad(s=5e3,p=250){var i,u,v,m;this.homadReady||!((v=(u=(i=this.config)==null?void 0:i.adReinsertion)==null?void 0:u.homad)!=null&&v.enabled)||!((m=this.config.adReinsertion.homad.setup)!=null&&m.forceActivation)||await new Promise(S=>{let P,x,w=()=>{clearInterval(P),P=void 0,clearTimeout(x),x=void 0};x=setTimeout(()=>{w(),S()},s),P=setInterval(()=>{this.homadReady&&(w(),S())},p)})}getSmartclip(){return this.smartclip}getConfig(){return this.config}getVersion(){return Ks.version}addEventListener(s,p){if(!this.instance){this.eventCache.push([s,p]);return}this.instance.addEventListener(s,p)}removeEventListener(s,p){if(!this.instance){this.eventCache=this.eventCache.filter(([i,u])=>i!==s||u!==p);return}this.instance.removeEventListener(s,p)}async homadCallback(s){var i,u;let p=(i=this.instance)==null?void 0:i.ad;if((u=p==null?void 0:p.info)!=null&&u.variant&&(p.info.variant==="opener"||p.info.variant==="closer"||p.info.variant==="bumper")||[1004,1010].includes(s))return Promise.reject(s);await this.homadActivationCallback(s)}prepareConfig(){var i,u,v,m,S,P,x,w,W,Te,z,G,J,_e,tt,Ue,Ze,it,Qe,We,Ye,at,pt,ct,ht,gt;let s=(v=(u=(i=this.userConfig.adReinsertion)==null?void 0:i.homad)==null?void 0:u.enabled)!=null?v:!1,p=(P=(S=(m=this.userConfig.adReinsertion)==null?void 0:m.homad)==null?void 0:S.setup)!=null&&P.forceActivation?!0:(Te=(W=(w=(x=this.userConfig.adReinsertion)==null?void 0:x.homad)==null?void 0:w.setup)==null?void 0:W.enableSessionCoverage)!=null?Te:!1;return{...this.userConfig,debug:(z=this.userConfig.debug)!=null?z:this.log.isLoggingActiveForLevel(Zt.Debug),environmentVars:{desiredMimeTypes:["video/mp4","application/javascript"],desiredVPAIDVendors:["flashtalking","d14rmrkxlk9ow8","emsservice"],desiredBitrate:1700,...(G=this.userConfig.environmentVars)!=null?G:{},vastMacros:{APIFRAMEWORKS:[7],...(_e=(J=this.userConfig.environmentVars)==null?void 0:J.vastMacros)!=null?_e:{}}},maxWrapperDepth:(tt=this.userConfig.maxWrapperDepth)!=null?tt:10,shareVideoElementWithVPAID:!0,timeouts:{adRequest:3,adRequestChain:6,adSlotRequest:15,videoRequest:3,vpaidRequest:3,vpaidReadiness:6,...(Ue=this.userConfig.timeouts)!=null?Ue:{}},trackImpressionOnStart:(Ze=this.userConfig.trackImpressionOnStart)!=null?Ze:!0,trackSkippedQuartiles:(it=this.userConfig.trackSkippedQuartiles)!=null?it:!0,prefetchBuffetAds:(Qe=this.userConfig.prefetchBuffetAds)!=null?Qe:!1,adVerification:{meetrics:!0,...(We=this.userConfig.adVerification)!=null?We:{}},adReinsertion:{...(Ye=this.userConfig.adReinsertion)!=null?Ye:{},homad:{...(pt=(at=this.userConfig.adReinsertion)==null?void 0:at.homad)!=null?pt:{},enabled:s,setup:s?{...(gt=(ht=(ct=this.userConfig.adReinsertion)==null?void 0:ct.homad)==null?void 0:ht.setup)!=null?gt:{},enableSessionCoverage:p,globalConfig:"https://s3.amazonaws.com/homad-global-configs.schneevonmorgen.com/global_config.json",activationCallback:this.homadCallback}:{}}}}}getBitrate(s,p){if(!p)return s;let i=p.measuredBitrateFactor||1,u=s?s*i:p.defaultBitrate||0;return p.maxBitrate&&(u=Math.min(u,p.maxBitrate)),p.minBitrate&&(u=Math.max(u,p.minBitrate)),u}};var Zn="data-foundation-ad-style",ea=class extends Gs{constructor(p,i){var u;super();this.adPlayerConstructor=p;this.pluginConfig=i;this.log=kt("plugin.advertising.advertising-plugin");this.adStarted=!1;this.smartclip=new Qn((u=this.pluginConfig)==null?void 0:u.smartclipConfig,this.homadActivationCallback)}getKey(){return"foundation.plugin.advertising"}getPlugin(){return this}playerInitialized(){return this.player&&(this.createAdvertisingAdapter(),this.player.addEventListener(St.AdSlotsCreated,async()=>{await this.createSdk()}),this.player.addEventListener(St.InitAdSlot,p=>this.onInitAdSlot(p)),this.player.addEventListener(Pt.TimeChanged,p=>this.onTimeChange(p)),this.player.addEventListener(Pt.ContentEnd,()=>this.onContentEnd()),this.player.addEventListener(St.StartAdSlot,p=>this.onStartAdSlot(p)),this.player.addEventListener(St.StopAdSlot,p=>this.onStopAdSlot(p)),this.player.addEventListener(St.ResumeAd,()=>{var p;(p=this.smartclipInstance)==null||p.resumeAd()}),this.player.addEventListener(St.PauseAd,()=>{var p;(p=this.smartclipInstance)==null||p.pauseAd()}),this.player.addEventListener(Pt.Paused,()=>this.onPlayerPaused()),this.player.addEventListener(St.SkipAd,()=>this.onSkipAd()),this.player.addEventListener(St.OpenClickThrough,()=>{var p,i;(i=(p=this.smartclipInstance)==null?void 0:p.ad)!=null&&i.hasClickThrough&&this.smartclipInstance.clickThrough()}),this.player.addEventListener(Pt.Destroy,()=>{this.resetContainers()})),Promise.resolve()}beforeLoadMedia(p){return this.resetContainers(),Promise.resolve(p)}async onInitAdSlot(p){var v,m,S,P,x,w,W,Te;if(!this.player)return;let i=performance.now(),u=z=>{var G;this.clearTimeout(),this.log.error("handle adSlot error: ",z),p.adSlot.fail(z),p.adSlot.getType()===wt.PreRoll&&!p.adSlot.isLoaded()&&((G=this.player)==null||G.dispatchEvent(new Mr(St.AdSlotReady)))};this.startTimeout();try{await this.createSdk();let z=this.smartclip.mapAdSlot(p.adSlot);if(!z){u(new Error("Could not map ad break!"));return}z.tag?z.tag=await this.replacePlaceholder(z.tag):z.tag="";let G=this.smartclip.createEnvironment(this.player.getCurrentTime.bind(this),this.player.getCurrentBitrate(),(v=this.advertisingAdapter)==null?void 0:v.getNonLinearElement(),p.adSlot.getType(),(m=this.pluginConfig)==null?void 0:m.qualitySettings);if(!this.timeout){u(new Error("Ad initialization timeout reached before HOMAD!"));return}if(await this.smartclip.waitForHomad((P=(S=this.pluginConfig)==null?void 0:S.homad)==null?void 0:P.timeout,(w=(x=this.pluginConfig)==null?void 0:x.homad)==null?void 0:w.interval),!this.timeout){u(new Error("Ad initialization timeout reached before init ad slot!"));return}await((W=this.smartclipInstance)==null?void 0:W.initAdSlot(z,G)),p.adSlot.load(),this.player.dispatchEvent(new Mr(St.AdSlotReady));let J=performance.now();if(this.player.dispatchEvent(new ao(Wn.AdSlotLoad,{start:i,end:J})),!p.autoplay){this.clearTimeout();return}if(!this.timeout){u(new Error("Ad initialization timeout reached before start ad slot!"));return}await((Te=this.smartclipInstance)==null?void 0:Te.startAdSlot())}catch(z){this.dispatchFoundationPlayerAdError(z),u(z)}}async onTimeChange(p){if(!this.advertisingAdapter||(this.adStarted&&(this.clearTimeout(),this.adStarted=!1),this.advertisingAdapter.isAd()))return;let i=Math.ceil(p.time);if(i===this.lastPlayerTime)return;this.lastPlayerTime=i;let u=this.advertisingAdapter.getNextAdSlotToInitialize(i);u&&await this.advertisingAdapter.initAdSlot(u,!1);let v=this.advertisingAdapter.getAdSlot(i);v&&await this.startAdSlot(v)}async onContentEnd(){if(!this.advertisingAdapter)return;let p=this.advertisingAdapter.getAdSlot(-1);p&&await this.startAdSlot(p)}onStartAdSlot(p){var i;(i=this.smartclipInstance)!=null&&i.adSlotModel&&p.adSlot.isLoaded()&&(this.startTimeout(),this.smartclipInstance.startAdSlot())}async onStopAdSlot(p){var i;try{await((i=this.smartclipInstance)==null?void 0:i.stopAdSlot()),p.adSlot.fail(p.reason)}catch(u){this.log.info(String(u)),p.adSlot.fail(u)}}onPlayerPaused(){this.advertisingAdapter&&this.adStarted&&(this.clearTimeout(),this.adStarted=!1)}onSkipAd(){var p,i,u,v,m,S;(i=(p=this.smartclipInstance)==null?void 0:p.ad)!=null&&i.isInteractive?(m=(v=(u=this.smartclipInstance.slot)==null?void 0:u.vpaidPlayer)==null?void 0:v.vpaidAd)==null||m.skipAd():(S=this.smartclipInstance)==null||S.skipAd()}getSdk(){return this.smartclip}async replacePlaceholder(p){if(!this.player)return p;let i=p,u="";if(i.includes("{CONSENT}"))try{u=await this.player.getConsent(1e3)}catch(S){}let v=this.player.getPlayerAdapter().getVideoElement(),m={"{CONSENT}":u!=null?u:"","{OPT}":u?"":"out","{TAGVER}":this.smartclip.getVersion(),"{PLAYER_WIDTH}":v!=null&&v.offsetWidth?String(v.offsetWidth):"","{PLAYER_HEIGHT}":v!=null&&v.offsetHeight?String(v.offsetHeight):"","{PLAYER_DURATION}":String(this.player.getDuration())};return Object.entries(m).forEach(([S,P])=>{i=i.replace(S,P)}),i}startTimeout(){var p;this.clearTimeout(),this.timeout=setTimeout(()=>{var i;(i=this.advertisingAdapter)==null||i.stopAdSlot("observation timeout")},((p=this.pluginConfig)==null?void 0:p.timeout)||5e3)}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}homadActivationCallback(p){var u;let i=(u=this.advertisingAdapter)==null?void 0:u.getCurrentAdSlot();return this.player!==void 0&&i!==void 0&&this.player.dispatchEvent(new Ys({adSlot:i,reason:p})),Promise.resolve()}createAdvertisingAdapter(){var u,v,m;if(!this.player)return;let p=this.adPlayerConstructor(this.player);p.onEvent(S=>{var P;(P=this.player)==null||P.dispatchEvent(S)}),this.advertisingAdapter=new $n(this.player,p),this.player.setAdvertisingAdapter(this.advertisingAdapter),((v=(u=this.pluginConfig)==null?void 0:u.handleClickThrough)!=null?v:!0)&&((m=p.getPlayerElement())==null||m.addEventListener("click",()=>{var S;return(S=this.advertisingAdapter)==null?void 0:S.openClickThrough()}))}getAdClipType(p,i){let u=Object.values(Nr).find(v=>i?v===i:v===p);return u||(this.log.error(`Cannot map unknown ad clip variant '${p}'`),Nr.Unknown)}resizeContainers(){var W;let p=(W=this.advertisingAdapter)==null?void 0:W.getNonLinearElement();if(!p)throw new Bt(Pt.Error,{message:"Non linear container does not exist!",code:Ir.ErrorCodes.FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING});let i=p.firstElementChild;if(!i)throw new Bt(Pt.Error,{message:"Non linear resize target does not exist!",code:Ir.ErrorCodes.FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING});let u=p.lastElementChild;if(!u||u===i)throw new Bt(Pt.Error,{message:"Non linear l-frame does not exist!?",code:Ir.ErrorCodes.FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING});u.setAttribute("style","display: block; width: 100%; height: 100%;"),u.firstElementChild&&u.firstElementChild.setAttribute("style","display: block; width: 100%; height: 100%; cursor: pointer;");let v=1280,m=720,S=284,P=160,x=S/v*100,w=P/m*100;i.setAttribute(Zn,i.getAttribute("style")||""),i.style.position="absolute",i.style.top="0",i.style.right="0",i.style.left="auto",i.style.bottom="auto",i.style.width=`${100-x}%`,i.style.height=`${100-w}%`}resetContainers(){var u;let p=(u=this.advertisingAdapter)==null?void 0:u.getNonLinearElement();if(!p)return;let i=p.firstElementChild;i&&i.hasAttribute(Zn)&&(i.setAttribute("style",i.getAttribute(Zn)||""),i.removeAttribute(Zn))}elevateOverlay(){var x;let p=(x=this.advertisingAdapter)==null?void 0:x.getNonLinearElement();if(!p)throw new Bt(Pt.Error,{message:"Non linear resize target does not exist!",code:Ir.ErrorCodes.FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING});let i=p.firstElementChild;if(!i)throw new Bt(Pt.Error,{message:"Non linear resize target does not exist!",code:Ir.ErrorCodes.FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING});let u=p.lastElementChild;if(!u||u===i)throw new Bt(Pt.Error,{message:"Non linear overlay does not exist!?",code:Ir.ErrorCodes.FAULTY_SETUP_FOR_NON_LINEAR_ADVERTISING});let v=i,m=window.getComputedStyle(v),S=m.getPropertyValue("z-index");for(;S==="auto"&&v.parentElement;)v=v.parentElement,m=window.getComputedStyle(v),S=m.getPropertyValue("z-index");let P=S==="auto"?0:Number(S);u.style.zIndex=String(P+1)}async createSdk(){this.smartclipInstance||!this.advertisingAdapter||(this.smartclipInstance=await this.smartclip.getInstance(this.advertisingAdapter.getAdPlayer()),this.advertisingAdapter.setDebugInformationCallback(()=>this.getSdk().getDebugInformation()),this.smartclip.addEventListener("AdStart",()=>{this.startTimeout()}),this.smartclip.addEventListener("AdStarted",()=>{var u,v,m,S,P,x,w,W,Te,z,G,J,_e,tt,Ue,Ze,it,Qe,We,Ye,at,pt,ct,ht,gt,Mt,Ct,Se,Xt,xt,Tt,Nt,Kt,Jt,Vt,vt,dt,bt;if(!this.advertisingAdapter)return;this.adStarted=!0,(v=(u=this.smartclipInstance)==null?void 0:u.ad)!=null&&v.isInteractive&&this.clearTimeout();let p=this.advertisingAdapter.getCurrentAdSlot(),i={id:((P=(S=(m=this.smartclipInstance)==null?void 0:m.ad)==null?void 0:S.info)==null?void 0:P.adId)||0,title:((W=(w=(x=this.smartclipInstance)==null?void 0:x.ad)==null?void 0:w.info)==null?void 0:W.title)||"",campaignName:((G=(z=(Te=this.smartclipInstance)==null?void 0:Te.ad)==null?void 0:z.info)==null?void 0:G.cpg)||"",creativeId:((tt=(_e=(J=this.smartclipInstance)==null?void 0:J.ad)==null?void 0:_e.info)==null?void 0:tt.crea)||"",url:(Qe=(it=(Ze=(Ue=this.smartclipInstance)==null?void 0:Ue.ad)==null?void 0:Ze.linear)==null?void 0:it.selectedMediaFile)==null?void 0:Qe.fileURL,bitrate:(pt=(at=(Ye=(We=this.smartclipInstance)==null?void 0:We.ad)==null?void 0:Ye.linear)==null?void 0:at.selectedMediaFile)==null?void 0:pt.bitrate,hasClickThrough:((ht=(ct=this.smartclipInstance)==null?void 0:ct.ad)==null?void 0:ht.hasClickThrough)||!1,duration:((Mt=(gt=this.smartclipInstance)==null?void 0:gt.ad)==null?void 0:Mt.duration)||this.advertisingAdapter.getAdPlayer().getDuration(),isInteractive:((Se=(Ct=this.smartclipInstance)==null?void 0:Ct.ad)==null?void 0:Se.isInteractive)||!1,type:this.getAdClipType((Tt=(xt=(Xt=this.smartclipInstance)==null?void 0:Xt.ad)==null?void 0:xt.info)==null?void 0:Tt.variant,(Vt=(Jt=(Kt=(Nt=this.smartclipInstance)==null?void 0:Nt.ad)==null?void 0:Kt.nonLinear)==null?void 0:Jt[0])==null?void 0:Vt.id)};if(i.type===Nr.ContentFrame?this.resizeContainers():i.type===Nr.Overlay&&this.elevateOverlay(),p){p.setClickThroughUrlCallback(()=>{var N;return(N=this.smartclipInstance)==null?void 0:N.clickThrough(!0)}),p.setCurrentClip(i);let It=p.getPlayedClips().length+1;p.getClips()<It&&p.setClips(It),p.setDuration(((dt=(vt=this.smartclipInstance)==null?void 0:vt.adSlot)==null?void 0:dt.totalCommercialsDuration)||0)}(bt=this.player)==null||bt.dispatchEvent(new Vs(St.AdStarted,{adClip:i}))}),this.smartclip.addEventListener("AdStopped",()=>{var p;this.resetContainers(),(p=this.player)==null||p.dispatchEvent(new Yt(St.AdStopped))}),this.smartclip.addEventListener("AdError",p=>{this.dispatchFoundationPlayerAdError(p)}),this.smartclip.addEventListener("AdSlotStart",()=>{var p,i;(i=(p=this.advertisingAdapter)==null?void 0:p.getCurrentAdSlot())==null||i.start()}),this.smartclip.addEventListener("AdSlotStarted",()=>{var i,u,v,m,S,P,x;let p=(i=this.advertisingAdapter)==null?void 0:i.getCurrentAdSlot();this.player!==void 0&&p!==void 0&&(p.setDuration(((v=(u=this.smartclipInstance)==null?void 0:u.adSlot)==null?void 0:v.totalCommercialsDuration)||0),p.setClips(((S=(m=this.smartclipInstance)==null?void 0:m.adSlot)==null?void 0:S.totalPlayableClips)||0),p.setCommercials(((x=(P=this.smartclipInstance)==null?void 0:P.adSlot)==null?void 0:x.totalPlayableCommercials)||0),this.player.dispatchEvent(new Gt(St.AdSlotStarted,{adSlot:p})))}),this.smartclip.addEventListener("AdSlotStopped",()=>{var i;let p=(i=this.advertisingAdapter)==null?void 0:i.getCurrentAdSlot();this.player!==void 0&&p!==void 0&&(p.stop(),this.player.dispatchEvent(new Gt(St.AdSlotStopped,{adSlot:p})))}),this.smartclip.addEventListener("AdSlotComplete",()=>{var i;let p=(i=this.advertisingAdapter)==null?void 0:i.getCurrentAdSlot();if(p!==void 0&&this.player!==void 0){if(p.complete(),p.getType()===wt.PreRoll||p.getType()===wt.MidRoll){let u=performance.now();this.player.listenOnce(Pt.TimeChanged,()=>{var m;let v=performance.now();(m=this.player)==null||m.dispatchEvent(new ao(Wn.MediaPlayAfterAd,{start:u,end:v}))})}this.player.dispatchEvent(new Gt(St.AdSlotCompleted,{adSlot:p}))}}),this.smartclip.addEventListener("HomadPenalty",()=>{var i;let p=(i=this.advertisingAdapter)==null?void 0:i.getCurrentAdSlot();this.advertisingAdapter!==void 0&&this.player!==void 0&&p!==void 0&&this.player.dispatchEvent(new Ws({adSlot:p}))}),this.smartclip.addEventListener("AdVideoFirstQuartile",p=>{this.player&&this.player.dispatchEvent(new Yn({quartile:1,originalEvent:p}))}),this.smartclip.addEventListener("AdVideoMidpoint",p=>{this.player&&this.player.dispatchEvent(new Yn({quartile:2,originalEvent:p}))}),this.smartclip.addEventListener("AdVideoThirdQuartile",p=>{this.player&&this.player.dispatchEvent(new Yn({quartile:3,originalEvent:p}))}))}dispatchFoundationPlayerAdError(p){var u;let i=this.smartclip.getDebugInformation();(u=this.player)==null||u.dispatchEvent(new Ms(St.AdError,{originalEvent:p,message:(p==null?void 0:p.message)||i.errorDescription||"",code:String((p==null?void 0:p.code)||i.errorCode||"")}))}async startAdSlot(p){this.advertisingAdapter&&(p.isInitialised()?(this.advertisingAdapter.setCurrentAdSlot(p),await this.advertisingAdapter.startAdSlot()):await this.advertisingAdapter.initAdSlot(p,!0))}};return Pu(Ku);})();
